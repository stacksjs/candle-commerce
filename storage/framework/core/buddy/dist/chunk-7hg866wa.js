import{Wc as F,Xc as Ee}from"./chunk-6xcm0tgx.js";import{$c as Te,_c as m,pd as wt}from"./chunk-y5t75bd1.js";import{Cd as or,Dd as wr,xd as _r,yd as be}from"./chunk-4r5aqn27.js";import{Vd as me}from"./chunk-q9cxybaw.js";import{Zd as Me}from"./chunk-19q2jx2t.js";import{ge as Lt}from"./chunk-v97r5n5v.js";import{je as S,oe as jr}from"./chunk-2g57f3kb.js";function Jr(e){return e}var Gt=(e)=>(t)=>async(r)=>{if(!m.isInstance(r.request))return t(r);let{request:o}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let s=o.hostname;if(o.port!=null)s+=`:${o.port}`;o.headers.host=s}return t(r)},Vt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Kr=(e)=>({applyToStack:(t)=>{t.add(Gt(e),Vt)}});var Bt=()=>(e,t)=>async(r)=>{try{let o=await e(r),{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:f}=a,u=c??t.inputFilterSensitiveLog,R=f??t.outputFilterSensitiveLog,{$metadata:l,...d}=o.output;return i?.info?.({clientName:n,commandName:s,input:u(r.input),output:R(d),metadata:l}),o}catch(o){let{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,f=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:s,input:f(r.input),error:o,metadata:o.$metadata}),o}},Wt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},eo=(e)=>({applyToStack:(t)=>{t.add(Bt(),Wt)}});var ne="X-Amzn-Trace-Id",Yt="AWS_LAMBDA_FUNCTION_NAME",jt="_X_AMZN_TRACE_ID",zt=(e)=>(t)=>async(r)=>{let{request:o}=r;if(!m.isInstance(o)||e.runtime!=="node")return t(r);let n=Object.keys(o.headers??{}).find((c)=>c.toLowerCase()===ne.toLowerCase())??ne;if(o.headers.hasOwnProperty(n))return t(r);let s=process.env[Yt],i=process.env[jt],a=(c)=>typeof c==="string"&&c.length>0;if(a(s)&&a(i))o.headers[ne]=i;return t({...r,request:o})},Xt={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},so=(e)=>({applyToStack:(t)=>{t.add(zt(e),Xt)}});var De=S(be(),1),se=void 0;function Ht(e){if(e===void 0)return!0;return typeof e==="string"&&e.length<=50}function ao(e){let t=De.normalizeProvider(e.userAgentAppId??se),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r==="string"?[[r]]:r,userAgentAppId:async()=>{let o=await t();if(!Ht(o)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;if(typeof o!=="string")n?.warn("userAgentAppId must be a string or undefined.");else if(o.length>50)n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return o}})}class qt{constructor({size:e,params:t}){if(this.data=new Map,this.parameters=[],this.capacity=e??50,t)this.parameters=t}get(e,t){let r=this.hash(e);if(r===!1)return t();if(!this.data.has(r)){if(this.data.size>this.capacity+10){let o=this.data.keys(),n=0;while(!0){let{value:s,done:i}=o.next();if(this.data.delete(s),i||++n>10)break}}this.data.set(r,t())}return this.data.get(r)}size(){return this.data.size}hash(e){let t="",{parameters:r}=this;if(r.length===0)return!1;for(let o of r){let n=String(e[o]??"");if(n.includes("|;"))return!1;t+=n+"|;"}return t}}var Zt=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),M=(e)=>Zt.test(e)||e.startsWith("[")&&e.endsWith("]");var Jt=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),L=(e,t=!1)=>{if(!t)return Jt.test(e);let r=e.split(".");for(let o of r)if(!L(o))return!1;return!0};var $={};var h="endpoints";function E(e){if(typeof e!=="object"||e==null)return e;if("ref"in e)return`$${E(e.ref)}`;if("fn"in e)return`${e.fn}(${(e.argv||[]).map(E).join(", ")})`;return JSON.stringify(e,null,2)}class p extends Error{constructor(e){super(e);this.name="EndpointError"}}var Ce=(e,t)=>e===t;var Pe=(e)=>{let t=e.split("."),r=[];for(let o of t){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new p(`Path: '${e}' does not end with ']'`);let s=o.slice(n+1,-1);if(Number.isNaN(parseInt(s)))throw new p(`Invalid array index: '${s}' in path: '${e}'`);if(n!==0)r.push(o.slice(0,n));r.push(s)}else r.push(o)}return r};var B=(e,t)=>Pe(t).reduce((r,o)=>{if(typeof r!=="object")throw new p(`Index '${o}' in '${t}' not found in '${JSON.stringify(e)}'`);else if(Array.isArray(r))return r[parseInt(o)];return r[o]},e);var Ue=(e)=>e!=null;var ve=(e)=>!e;var W=S(Me(),1);var ie={[W.EndpointURLScheme.HTTP]:80,[W.EndpointURLScheme.HTTPS]:443},Le=(e)=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e==="object"&&"hostname"in e){let{hostname:l,port:d,protocol:y="",path:V="",query:$t={}}=e,ye=new URL(`${y}//${l}${d?`:${d}`:""}${V}`);return ye.search=Object.entries($t).map(([Ft,kt])=>`${Ft}=${kt}`).join("&"),ye}return new URL(e)}catch(l){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:o,hostname:n,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(W.EndpointURLScheme).includes(c))return null;let f=M(n),u=r.includes(`${o}:${ie[c]}`)||typeof e==="string"&&e.includes(`${o}:${ie[c]}`),R=`${o}${u?`:${ie[c]}`:""}`;return{scheme:c,authority:R,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:f}};var $e=(e,t)=>e===t;var Fe=(e,t,r,o)=>{if(t>=r||e.length<r)return null;if(!o)return e.substring(t,r);return e.substring(e.length-r,e.length-t)};var ke=(e)=>encodeURIComponent(e).replace(/[!*'()]/g,(t)=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Ge={booleanEquals:Ce,getAttr:B,isSet:Ue,isValidHostLabel:L,not:ve,parseURL:Le,stringEquals:$e,substring:Fe,uriEncode:ke};var Y=(e,t)=>{let r=[],o={...t.endpointParams,...t.referenceRecord},n=0;while(n<e.length){let s=e.indexOf("{",n);if(s===-1){r.push(e.slice(n));break}r.push(e.slice(n,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}if(e[s+1]==="{"&&e[i+1]==="}")r.push(e.slice(s+1,i)),n=i+2;let a=e.substring(s+1,i);if(a.includes("#")){let[c,f]=a.split("#");r.push(B(o[c],f))}else r.push(o[a]);n=i+1}return r.join("")};var Ve=({ref:e},t)=>{return{...t.endpointParams,...t.referenceRecord}[e]};var T=(e,t,r)=>{if(typeof e==="string")return Y(e,r);else if(e.fn)return j(e,r);else if(e.ref)return Ve(e,r);throw new p(`'${t}': ${String(e)} is not a string, function or reference.`)};var j=({fn:e,argv:t},r)=>{let o=t.map((s)=>["boolean","number"].includes(typeof s)?s:T(s,"arg",r)),n=e.split(".");if(n[0]in $&&n[1]!=null)return $[n[0]][n[1]](...o);return Ge[e](...o)};var Be=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new p(`'${e}' is already defined in Reference Record.`);let o=j(t,r);return r.logger?.debug?.(`${h} evaluateCondition: ${E(t)} = ${E(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}};var b=(e=[],t)=>{let r={};for(let o of e){let{result:n,toAssign:s}=Be(o,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!n)return{result:n};if(s)r[s.name]=s.value,t.logger?.debug?.(`${h} assign: ${s.name} := ${E(s.value)}`)}return{result:!0,referenceRecord:r}};var We=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:n.map((s)=>{let i=T(s,"Header value entry",t);if(typeof i!=="string")throw new p(`Header '${o}' value '${i}' is not a string`);return i})}),{});var ae=(e,t)=>{if(Array.isArray(e))return e.map((r)=>ae(r,t));switch(typeof e){case"string":return Y(e,t);case"object":if(e===null)throw new p(`Unexpected endpoint property: ${e}`);return z(e,t);case"boolean":return e;default:throw new p(`Unexpected endpoint property type: ${typeof e}`)}};var z=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:ae(n,t)}),{});var Ye=(e,t)=>{let r=T(e,"Endpoint URL",t);if(typeof r==="string")try{return new URL(r)}catch(o){throw console.error(`Failed to construct URL with ${r}`,o),o}throw new p(`Endpoint URL must be a string, got ${typeof r}`)};var je=(e,t)=>{let{conditions:r,endpoint:o}=e,{result:n,referenceRecord:s}=b(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:f}=o;return t.logger?.debug?.(`${h} Resolving endpoint from template: ${E(o)}`),{...f!=null&&{headers:We(f,i)},...c!=null&&{properties:z(c,i)},url:Ye(a,i)}};var ze=(e,t)=>{let{conditions:r,error:o}=e,{result:n,referenceRecord:s}=b(r,t);if(!n)return;throw new p(T(o,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var Xe=(e,t)=>{let{conditions:r,rules:o}=e,{result:n,referenceRecord:s}=b(r,t);if(!n)return;return X(o,{...t,referenceRecord:{...t.referenceRecord,...s}})};var X=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let o=je(r,t);if(o)return o}else if(r.type==="error")ze(r,t);else if(r.type==="tree"){let o=Xe(r,t);if(o)return o}else throw new p(`Unknown endpoint rule: ${r}`);throw new p("Rules evaluation failed")};var Kt=(e,t)=>{let{endpointParams:r,logger:o}=t,{parameters:n,rules:s}=e;t.logger?.debug?.(`${h} Initial EndpointParams: ${E(r)}`);let i=Object.entries(n).filter(([,f])=>f.default!=null).map(([f,u])=>[f,u.default]);if(i.length>0)for(let[f,u]of i)r[f]=r[f]??u;let a=Object.entries(n).filter(([,f])=>f.required).map(([f])=>f);for(let f of a)if(r[f]==null)throw new p(`Missing required parameter: '${f}'`);let c=X(s,{endpointParams:r,logger:o,referenceRecord:{}});return t.logger?.debug?.(`${h} Resolved endpoint: ${E(c)}`),c};var ce=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!ce(r))return!1;return!0}if(!L(e))return!1;if(e.length<3||e.length>63)return!1;if(e!==e.toLowerCase())return!1;if(M(e))return!1;return!0};var He=(e)=>{let t=e.split(":");if(t.length<6)return null;let[r,o,n,s,i,...a]=t;if(r!=="arn"||o===""||n===""||a.join(":")==="")return null;let c=a.map((f)=>f.split("/")).flat();return{partition:o,service:n,region:s,accountId:i,resourceId:c}};var qe={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],version:"1.1"};var er=qe,tr="",Ze=(e)=>{let{partitions:t}=er;for(let o of t){let{regions:n,outputs:s}=o;for(let[i,a]of Object.entries(n))if(i===e)return{...s,...a}}for(let o of t){let{regionRegex:n,outputs:s}=o;if(new RegExp(n).test(e))return{...s}}let r=t.find((o)=>o.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var Je=()=>tr;var rr={isVirtualHostableS3Bucket:ce,parseArn:He,partition:Ze};$.aws=rr;var x=S(or(),1),nr=/\d{12}\.ddb/;async function Ke(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor")x.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M");if(typeof t.retryStrategy==="function"){let s=await t.retryStrategy();if(typeof s.acquireInitialRetryToken==="function")if(s.constructor?.name?.includes("Adaptive"))x.setFeature(e,"RETRY_MODE_ADAPTIVE","F");else x.setFeature(e,"RETRY_MODE_STANDARD","E");else x.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode==="function"){let s=e.endpointV2;if(String(s?.url?.hostname).match(nr))x.setFeature(e,"ACCOUNT_ID_ENDPOINT","O");switch(await t.accountIdEndpointMode?.()){case"disabled":x.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":x.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":x.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let s=n;if(s.accountId)x.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))x.setFeature(e,i,a)}}var fe="user-agent",H="x-amz-user-agent",pe=" ",q="/",Qe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,et=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,ue="-";function tt(e){let t="";for(let r in e){let o=e[r];if(t.length+o.length+1<=1024){if(t.length)t+=","+o;else t+=o;continue}break}return t}var sr=(e)=>(t,r)=>async(o)=>{let{request:n}=o;if(!m.isInstance(n))return t(o);let{headers:s}=n,i=r?.userAgent?.map(Z)||[],a=(await e.defaultUserAgentProvider()).map(Z);await Ke(r,e,o);let c=r;a.push(`m/${tt(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let f=e?.customUserAgent?.map(Z)||[],u=await e.userAgentAppId();if(u)a.push(Z([`app/${u}`]));let R=Je(),l=(R?[R]:[]).concat([...a,...i,...f]).join(pe),d=[...a.filter((y)=>y.startsWith("aws-sdk-")),...f].join(pe);if(e.runtime!=="browser"){if(d)s[H]=s[H]?`${s[fe]} ${d}`:d;s[fe]=l}else s[H]=l;return t({...o,request:n})},Z=(e)=>{let t=e[0].split(q).map((i)=>i.replace(Qe,ue)).join(q),r=e[1]?.replace(et,ue),o=t.indexOf(q),n=t.substring(0,o),s=t.substring(o+1);if(n==="api")s=s.toLowerCase();return[n,s,r].filter((i)=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},ir={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Hs=(e)=>({applyToStack:(t)=>{t.add(sr(e),ir)}});var J=(e)=>typeof e==="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var de=(e)=>J(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var ni=(e)=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if(typeof t==="string")return de(t);let o=await t();return de(o)},useFipsEndpoint:async()=>{let o=typeof t==="string"?t:await t();if(J(o))return!0;return typeof r!=="function"?Promise.resolve(!!r):r()}})};var D=(e,t,r)=>{if(!(t in e))return;if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)};var O;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(O||(O={}));var ar="AWS_USE_DUALSTACK_ENDPOINT",cr="use_dualstack_endpoint";var mi={environmentVariableSelector:(e)=>D(e,ar,O.ENV),configFileSelector:(e)=>D(e,cr,O.CONFIG),default:!1};var fr="AWS_USE_FIPS_ENDPOINT",pr="use_fips_endpoint";var xi={environmentVariableSelector:(e)=>D(e,fr,O.ENV),configFileSelector:(e)=>D(e,pr,O.CONFIG),default:!1};var le=S(Me(),1),rt=(e)=>e[le.SMITHY_CONTEXT_KEY]||(e[le.SMITHY_CONTEXT_KEY]={});var A=(e)=>{if(typeof e==="function")return e;let t=Promise.resolve(e);return()=>t};var ot={environmentVariableSelector:(e)=>e.AWS_REGION,configFileSelector:(e)=>e.region,default:()=>{throw new Error("Region is missing")}},Li={preferredFile:"credentials"};var nt="content-length";function ur(e){return(t)=>async(r)=>{let o=r.request;if(m.isInstance(o)){let{body:n,headers:s}=o;if(n&&Object.keys(s).map((i)=>i.toLowerCase()).indexOf(nt)===-1)try{let i=e(n);o.headers={...o.headers,[nt]:String(i)}}catch(i){}}return t({...r,request:o})}}var dr={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},fa=(e)=>({applyToStack:(t)=>{t.add(ur(e.bodyLengthChecker),dr)}});var lt=S(_r(),1);var ut=S(be(),1);var st=async(e)=>{let t=e?.Bucket||"";if(typeof e.Bucket==="string")e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"));if(xr(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else if(!gr(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)e.ForcePathStyle=!0;if(e.DisableMultiRegionAccessPoints)e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0;return e},lr=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,mr=/(\d+\.){3}\d+/,Er=/\.\./;var gr=(e)=>lr.test(e)&&!mr.test(e)&&!Er.test(e),xr=(e)=>{let[t,r,o,,,n]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=Boolean(s&&r&&o&&n);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i};var it=(e,t,r)=>{let o=async()=>{let n=r[e]??r[t];if(typeof n==="function")return n();return n};if(e==="credentialScope"||t==="CredentialScope")return async()=>{let n=typeof r.credentials==="function"?await r.credentials():r.credentials;return n?.credentialScope??n?.CredentialScope};if(e==="accountId"||t==="AccountId")return async()=>{let n=typeof r.credentials==="function"?await r.credentials():r.credentials;return n?.accountId??n?.AccountId};if(e==="endpoint"||t==="endpoint")return async()=>{let n=await o();if(n&&typeof n==="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:s,hostname:i,port:a,path:c}=n;return`${s}//${i}${a?":"+a:""}${c}`}}return n};return o};var at="AWS_ENDPOINT_URL",ct="endpoint_url",ft=(e)=>({environmentVariableSelector:(t)=>{let r=e.split(" ").map((s)=>s.toUpperCase()),o=t[[at,...r].join("_")];if(o)return o;let n=t[at];if(n)return n;return},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(me)];if(n){let s=e.split(" ").map((a)=>a.toLowerCase()),i=n[[s.join("_"),ct].join(me)];if(i)return i}}let o=t[ct];if(o)return o;return},default:void 0});var K=async(e)=>F(ft(e??""))();var Q=(e)=>{if(typeof e==="object"){if("url"in e)return Ee(e.url);return e}return Ee(e)};var pt=async(e,t,r,o)=>{if(!r.endpoint){let i;if(r.serviceConfiguredEndpoint)i=await r.serviceConfiguredEndpoint();else i=await K(r.serviceId);if(i)r.endpoint=()=>Promise.resolve(Q(i))}let n=await Rr(e,t,r);if(typeof r.endpointProvider!=="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,o)},Rr=async(e,t,r)=>{let o={},n=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(n))switch(i.type){case"staticContextParams":o[s]=i.value;break;case"contextParams":o[s]=e[i.name];break;case"clientContextParams":case"builtInParams":o[s]=await it(i.name,s,r)();break;case"operationContextParams":o[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}if(Object.keys(n).length===0)Object.assign(o,r);if(String(r.serviceId).toLowerCase()==="s3")await st(o);return o};var dt=({config:e,instructions:t})=>{return(r,o)=>async(n)=>{if(e.endpoint)ut.setFeature(o,"ENDPOINT_OVERRIDE","N");let s=await pt(n.input,{getEndpointParameterInstructions(){return t}},{...e},o);o.endpointV2=s,o.authSchemes=s.properties?.authSchemes;let i=o.authSchemes?.[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let c=rt(o)?.selectedHttpAuthScheme?.httpAuthOption;if(c)c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties)}return r({...n})}};var hr={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:lt.serializerMiddlewareOption.name},Ca=(e,t)=>({applyToStack:(r)=>{r.addRelativeTo(dt({config:e,instructions:t}),hr)}});var La=(e)=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:o,useFipsEndpoint:n}=e,s=r!=null?async()=>Q(await A(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:A(o??!1),useFipsEndpoint:A(n??!1)}),c=void 0;return a.serviceConfiguredEndpoint=async()=>{if(e.serviceId&&!c)c=K(e.serviceId);return c},a};var g;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(g||(g={}));var w=3,mt=g.STANDARD;var Et=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],gt=["TimeoutError","RequestTimeout","RequestTimeoutException"],xt=[500,502,503,504],Rt=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var Ar=(e)=>e.$metadata?.clockSkewCorrected,Sr=(e)=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);if(!(e&&e instanceof TypeError))return!1;return t.has(e.message)},C=(e)=>e.$metadata?.httpStatusCode===429||Et.includes(e.name)||e.$retryable?.throttling==!0,k=(e,t=0)=>Ar(e)||gt.includes(e.name)||Rt.includes(e?.code||"")||xt.includes(e.$metadata?.httpStatusCode||0)||Sr(e)||e.cause!==void 0&&t<=10&&k(e.cause,t+1),_t=(e)=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;if(500<=t&&t<=599&&!k(e))return!0;return!1}return!1};class P{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??0.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??0.5,this.scaleConstant=e?.scaleConstant??0.4,this.smooth=e?.smooth??0.8;let t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1000}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(!this.enabled)return;if(this.refillTokenBucket(),e>this.currentCapacity){let t=(e-this.currentCapacity)/this.fillRate*1000;await new Promise((r)=>P.setTimeoutFn(r,t))}this.currentCapacity=this.currentCapacity-e}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),C(e)){let o=!this.enabled?this.measuredTxRate:Math.min(this.measuredTxRate,this.fillRate);this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,0.3333333333333333))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),t=Math.floor(e*2)/2;if(this.requestCount++,t>this.lastTxRateBucket){let r=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}P.setTimeoutFn=setTimeout;var N=100,G=20000,ge=500,ee=500,xe=5,Re=10,_e=1,te="amz-sdk-invocation-id",re="amz-sdk-request";var ht=()=>{let e=N;return{computeNextBackoffDelay:(o)=>{return Math.floor(Math.min(G,Math.random()*2**o*e))},setDelayBase:(o)=>{e=o}}};var he=({retryDelay:e,retryCount:t,retryCost:r})=>{return{getRetryCount:()=>t,getRetryDelay:()=>Math.min(G,e),getRetryCost:()=>r}};class U{constructor(e){this.maxAttempts=e,this.mode=g.STANDARD,this.capacity=ee,this.retryBackoffStrategy=ht(),this.maxAttemptsProvider=typeof e==="function"?e:async()=>e}async acquireInitialRetryToken(e){return he({retryDelay:N,retryCount:0})}async refreshRetryTokenForRetry(e,t){let r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){let o=t.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?ge:N);let n=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,n):n,i=this.getCapacityCost(o);return this.capacity-=i,he({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:i})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(ee,this.capacity+(e.getRetryCost()??_e))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${w}`),w}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Re:xe}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Ae{constructor(e,t){this.maxAttemptsProvider=e,this.mode=g.ADAPTIVE;let{rateLimiter:r}=t??{};this.rateLimiter=r??new P,this.standardRetryStrategy=new U(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}var At="AWS_MAX_ATTEMPTS",St="max_attempts",Ic={environmentVariableSelector:(e)=>{let t=e[At];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${At} mast be a number, got "${t}"`);return r},configFileSelector:(e)=>{let t=e[St];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${St} mast be a number, got "${t}"`);return r},default:w},yc=(e)=>{let{retryStrategy:t,retryMode:r,maxAttempts:o}=e,n=A(o??w);return Object.assign(e,{maxAttempts:n,retryStrategy:async()=>{if(t)return t;if(await A(r)()===g.ADAPTIVE)return new Ae(n);return new U(n)}})},Tr="AWS_RETRY_MODE",Or="retry_mode",bc={environmentVariableSelector:(e)=>e[Tr],configFileSelector:(e)=>e[Or],default:mt};var _=S(wr(),1),Cc=_.default.v1,Pc=_.default.v3,Tt=_.default.v4,Uc=_.default.v5,vc=_.default.NIL,Mc=_.default.version,Lc=_.default.validate,$c=_.default.stringify,Fc=_.default.parse;import{Readable as Nr}from"stream";var Ot=(e)=>e?.body instanceof Nr||typeof ReadableStream!=="undefined"&&e?.body instanceof ReadableStream;var Se=(e)=>{if(e instanceof Error)return e;if(e instanceof Object)return Object.assign(new Error,e);if(typeof e==="string")return new Error(e);return new Error(`AWS SDK error wrapper for ${e}`)};var Ir=(e)=>(t,r)=>async(o)=>{let n=await e.retryStrategy(),s=await e.maxAttempts();if(yr(n)){n=n;let i=await n.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,f=0,{request:u}=o,R=m.isInstance(u);if(R)u.headers[te]=Tt();while(!0)try{if(R)u.headers[re]=`attempt=${c+1}; max=${s}`;let{response:l,output:d}=await t(o);return n.recordSuccess(i),d.$metadata.attempts=c+1,d.$metadata.totalRetryDelay=f,{response:l,output:d}}catch(l){let d=br(l);if(a=Se(l),R&&Ot(u))throw(r.logger instanceof wt?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await n.refreshRetryTokenForRetry(i,d)}catch(V){if(!a.$metadata)a.$metadata={};throw a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=f,a}c=i.getRetryCount();let y=i.getRetryDelay();f+=y,await new Promise((V)=>setTimeout(V,y))}}else{if(n=n,n?.mode)r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]];return n.retry(t,o)}},yr=(e)=>typeof e.acquireInitialRetryToken!=="undefined"&&typeof e.refreshRetryTokenForRetry!=="undefined"&&typeof e.recordSuccess!=="undefined",br=(e)=>{let t={error:e,errorType:Dr(e)},r=Pr(e.$response);if(r)t.retryAfterHint=r;return t},Dr=(e)=>{if(C(e))return"THROTTLING";if(k(e))return"TRANSIENT";if(_t(e))return"SERVER_ERROR";return"CLIENT_ERROR"},Cr={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Zc=(e)=>({applyToStack:(t)=>{t.add(Ir(e),Cr)}}),Pr=(e)=>{if(!Te.isInstance(e))return;let t=Object.keys(e.headers).find((s)=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],o=Number(r);if(!Number.isNaN(o))return new Date(o*1000);return new Date(r)};import{platform as Ur,release as vr}from"os";import{env as It,versions as Mr}from"process";var Oe={isCrtAvailable:!1};var Nt=()=>{if(Oe.isCrtAvailable)return["md/crt-avail"];return null};var kf=({serviceId:e,clientVersion:t})=>{return async(r)=>{let o=[["aws-sdk-js",t],["ua","2.1"],[`os/${Ur()}`,vr()],["lang/js"],["md/nodejs",`${Mr.node}`]],n=Nt();if(n)o.push(n);if(e)o.push([`api/${e}`,t]);if(It.AWS_EXECUTION_ENV)o.push([`exec-env/${It.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...o,[`app/${s}`]]:[...o]}};var Lr="AWS_SDK_UA_APP_ID",$r="sdk_ua_app_id",Fr="sdk-ua-app-id",Wf={environmentVariableSelector:(e)=>e[Lr],configFileSelector:(e)=>e[$r]??e[Fr],default:se};var yt=(e)=>typeof ArrayBuffer==="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";import{Buffer as we}from"buffer";var I=(e,t=0,r=e.byteLength-t)=>{if(!yt(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return we.from(e,t,r)},v=(e,t)=>{if(typeof e!=="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?we.from(e,t):we.from(e)};var oe=(e)=>{let t=v(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var bt=(e)=>{if(typeof e==="string")return oe(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(e)};var op=(e)=>{if(typeof e==="string")return e;if(typeof e!=="object"||typeof e.byteOffset!=="number"||typeof e.byteLength!=="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return I(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};import{Buffer as kr}from"buffer";import{createHash as Gr,createHmac as Vr}from"crypto";class Br{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update(bt(Dt(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?Vr(this.algorithmIdentifier,Dt(this.secret)):Gr(this.algorithmIdentifier)}}function Dt(e,t){if(kr.isBuffer(e))return e;if(typeof e==="string")return v(e,t);if(ArrayBuffer.isView(e))return I(e.buffer,e.byteOffset,e.byteLength);return I(e)}import{fstatSync as Wr,lstatSync as Yr}from"fs";var Ep=(e)=>{if(!e)return 0;if(typeof e==="string")return Buffer.byteLength(e);else if(typeof e.byteLength==="number")return e.byteLength;else if(typeof e.size==="number")return e.size;else if(typeof e.start==="number"&&typeof e.end==="number")return e.end+1-e.start;else if(typeof e.path==="string"||Buffer.isBuffer(e.path))return Yr(e.path).size;else if(typeof e.fd==="number")return Wr(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Ct="AWS_EXECUTION_ENV",Ne="AWS_REGION",Ie="AWS_DEFAULT_REGION",Pt="AWS_EC2_METADATA_DISABLED",Ut=["in-region","cross-region","mobile","standard","legacy"],vt="/latest/meta-data/placement/region";var Mt={environmentVariableSelector:(e)=>{return e.AWS_DEFAULTS_MODE},configFileSelector:(e)=>{return e.defaults_mode},default:"legacy"};var Np=({region:e=F(ot),defaultsMode:t=F(Mt)}={})=>Lt(async()=>{let r=typeof t==="function"?await t():t;switch(r?.toLowerCase()){case"auto":return zr(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Ut.join(", ")}, got ${r}`)}}),zr=async(e)=>{if(e){let t=typeof e==="function"?await e():e,r=await Xr();if(!r)return"standard";if(t===r)return"in-region";else return"cross-region"}return"standard"},Xr=async()=>{if(process.env[Ct]&&(process.env[Ne]||process.env[Ie]))return process.env[Ne]??process.env[Ie];if(!process.env[Pt])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await import("./chunk-gt75p009.js"),r=await e();return(await t({...r,path:vt})).toString()}catch(e){}};var Dp=(e)=>{return{setRegion(t){e.region=t},region(){return e.region}}},Cp=(e)=>{return{region:e.region()}};var qr=/^[A-Za-z0-9+/]*={0,2}$/,Hp=(e)=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!qr.exec(e))throw new TypeError("Invalid base64 string.");let t=v(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Kp=(e)=>{let t;if(typeof e==="string")t=oe(e);else t=e;if(typeof t!=="object"||typeof t.byteOffset!=="number"||typeof t.byteLength!=="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return I(t.buffer,t.byteOffset,t.byteLength).toString("base64")};export{Jr as mc,Kr as nc,eo as oc,so as pc,ao as qc,qt as rc,$ as sc,Kt as tc,rr as uc,Hs as vc,mi as wc,xi as xc,rt as yc,A as zc,ot as Ac,Li as Bc,ni as Cc,fa as Dc,Ca as Ec,La as Fc,mt as Gc,Ic as Hc,yc as Ic,bc as Jc,Zc as Kc,kf as Lc,Wf as Mc,oe as Nc,op as Oc,Br as Pc,Ep as Qc,Hp as Rc,Kp as Sc,Np as Tc,Dp as Uc,Cp as Vc};
