import{Ad as a0,Bd as W7,Cd as o5,Dd as Z7,xd as J2,yd as $4}from"./chunk-4r5aqn27.js";import{Ed as f0,Fd as l,Hd as t7,Id as e7}from"./chunk-dwjxgeh3.js";import{Zd as S1}from"./chunk-19q2jx2t.js";import{le as q,oe as F}from"./chunk-2g57f3kb.js";var nj=q((Dz,D1)=>{var{defineProperty:r,getOwnPropertyDescriptor:dj,getOwnPropertyNames:lj}=Object,_j=Object.prototype.hasOwnProperty,n=(j,$)=>r(j,"name",{value:$,configurable:!0}),sj=(j,$)=>{for(var z in $)r(j,z,{get:$[z],enumerable:!0})},mj=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of lj($))if(!_j.call(j,Q)&&Q!==z)r(j,Q,{get:()=>$[Q],enumerable:!(W=dj($,Q))||W.enumerable})}return j},pj=(j)=>mj(r({},"__esModule",{value:!0}),j),L1={};sj(L1,{getHostHeaderPlugin:()=>aj,hostHeaderMiddleware:()=>b1,hostHeaderMiddlewareOptions:()=>F1,resolveHostHeaderConfig:()=>M1});D1.exports=pj(L1);var ij=l();function M1(j){return j}n(M1,"resolveHostHeaderConfig");var b1=n((j)=>($)=>async(z)=>{if(!ij.HttpRequest.isInstance(z.request))return $(z);let{request:W}=z,{handlerProtocol:Q=""}=j.requestHandler.metadata||{};if(Q.indexOf("h2")>=0&&!W.headers[":authority"])delete W.headers.host,W.headers[":authority"]=W.hostname+(W.port?":"+W.port:"");else if(!W.headers.host){let Z=W.hostname;if(W.port!=null)Z+=`:${W.port}`;W.headers.host=Z}return $(z)},"hostHeaderMiddleware"),F1={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},aj=n((j)=>({applyToStack:n(($)=>{$.add(b1(j),F1)},"applyToStack")}),"getHostHeaderPlugin")});var Q5=q((hz,C1)=>{var{defineProperty:o,getOwnPropertyDescriptor:rj,getOwnPropertyNames:oj}=Object,tj=Object.prototype.hasOwnProperty,R0=(j,$)=>o(j,"name",{value:$,configurable:!0}),ej=(j,$)=>{for(var z in $)o(j,z,{get:$[z],enumerable:!0})},j5=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of oj($))if(!tj.call(j,Q)&&Q!==z)o(j,Q,{get:()=>$[Q],enumerable:!(W=rj($,Q))||W.enumerable})}return j},$5=(j)=>j5(o({},"__esModule",{value:!0}),j),h1={};ej(h1,{getLoggerPlugin:()=>z5,loggerMiddleware:()=>O1,loggerMiddlewareOptions:()=>N1});C1.exports=$5(h1);var O1=R0(()=>(j,$)=>async(z)=>{try{let W=await j(z),{clientName:Q,commandName:Z,logger:X,dynamoDbDocumentClientOptions:J={}}=$,{overrideInputFilterSensitiveLog:K,overrideOutputFilterSensitiveLog:G}=J,V=K??$.inputFilterSensitiveLog,Y=G??$.outputFilterSensitiveLog,{$metadata:B,...b}=W.output;return X?.info?.({clientName:Q,commandName:Z,input:V(z.input),output:Y(b),metadata:B}),W}catch(W){let{clientName:Q,commandName:Z,logger:X,dynamoDbDocumentClientOptions:J={}}=$,{overrideInputFilterSensitiveLog:K}=J,G=K??$.inputFilterSensitiveLog;throw X?.error?.({clientName:Q,commandName:Z,input:G(z.input),error:W,metadata:W.$metadata}),W}},"loggerMiddleware"),N1={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},z5=R0((j)=>({applyToStack:R0(($)=>{$.add(O1(),N1)},"applyToStack")}),"getLoggerPlugin")});var H5=q((Oz,R1)=>{var{defineProperty:e,getOwnPropertyDescriptor:W5,getOwnPropertyNames:Z5}=Object,X5=Object.prototype.hasOwnProperty,t=(j,$)=>e(j,"name",{value:$,configurable:!0}),J5=(j,$)=>{for(var z in $)e(j,z,{get:$[z],enumerable:!0})},K5=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of Z5($))if(!X5.call(j,Q)&&Q!==z)e(j,Q,{get:()=>$[Q],enumerable:!(W=W5($,Q))||W.enumerable})}return j},G5=(j)=>K5(e({},"__esModule",{value:!0}),j),T1={};J5(T1,{addRecursionDetectionMiddlewareOptions:()=>v1,getRecursionDetectionPlugin:()=>V5,recursionDetectionMiddleware:()=>I1});R1.exports=G5(T1);var Y5=l(),S0="X-Amzn-Trace-Id",B5="AWS_LAMBDA_FUNCTION_NAME",q5="_X_AMZN_TRACE_ID",I1=t((j)=>($)=>async(z)=>{let{request:W}=z;if(!Y5.HttpRequest.isInstance(W)||j.runtime!=="node")return $(z);let Q=Object.keys(W.headers??{}).find((K)=>K.toLowerCase()===S0.toLowerCase())??S0;if(W.headers.hasOwnProperty(Q))return $(z);let Z=process.env[B5],X=process.env[q5],J=t((K)=>typeof K==="string"&&K.length>0,"nonEmptyString");if(J(Z)&&J(X))W.headers[S0]=X;return $({...z,request:W})},"recursionDetectionMiddleware"),v1={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},V5=t((j)=>({applyToStack:t(($)=>{$.add(I1(j),v1)},"applyToStack")}),"getRecursionDetectionPlugin")});var c1=q((Nz,u1)=>{var{defineProperty:j0,getOwnPropertyDescriptor:w5,getOwnPropertyNames:U5}=Object,L5=Object.prototype.hasOwnProperty,H=(j,$)=>j0(j,"name",{value:$,configurable:!0}),M5=(j,$)=>{for(var z in $)j0(j,z,{get:$[z],enumerable:!0})},b5=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of U5($))if(!L5.call(j,Q)&&Q!==z)j0(j,Q,{get:()=>$[Q],enumerable:!(W=w5($,Q))||W.enumerable})}return j},F5=(j)=>b5(j0({},"__esModule",{value:!0}),j),k1={};M5(k1,{EndpointCache:()=>D5,EndpointError:()=>h,customEndpointFunctions:()=>P0,isIpAddress:()=>P1,isValidHostLabel:()=>x0,resolveEndpoint:()=>c5});u1.exports=F5(k1);var D5=class{constructor({size:j,params:$}){if(this.data=new Map,this.parameters=[],this.capacity=j??50,$)this.parameters=$}static{H(this,"EndpointCache")}get(j,$){let z=this.hash(j);if(z===!1)return $();if(!this.data.has(z)){if(this.data.size>this.capacity+10){let W=this.data.keys(),Q=0;while(!0){let{value:Z,done:X}=W.next();if(this.data.delete(Z),X||++Q>10)break}}this.data.set(z,$())}return this.data.get(z)}size(){return this.data.size}hash(j){let $="",{parameters:z}=this;if(z.length===0)return!1;for(let W of z){let Q=String(j[W]??"");if(Q.includes("|;"))return!1;$+=Q+"|;"}return $}},h5=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),P1=H((j)=>h5.test(j)||j.startsWith("[")&&j.endsWith("]"),"isIpAddress"),O5=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),x0=H((j,$=!1)=>{if(!$)return O5.test(j);let z=j.split(".");for(let W of z)if(!x0(W))return!1;return!0},"isValidHostLabel"),P0={},_="endpoints";function k(j){if(typeof j!=="object"||j==null)return j;if("ref"in j)return`$${k(j.ref)}`;if("fn"in j)return`${j.fn}(${(j.argv||[]).map(k).join(", ")})`;return JSON.stringify(j,null,2)}H(k,"toDebugString");var h=class extends Error{static{H(this,"EndpointError")}constructor(j){super(j);this.name="EndpointError"}},N5=H((j,$)=>j===$,"booleanEquals"),C5=H((j)=>{let $=j.split("."),z=[];for(let W of $){let Q=W.indexOf("[");if(Q!==-1){if(W.indexOf("]")!==W.length-1)throw new h(`Path: '${j}' does not end with ']'`);let Z=W.slice(Q+1,-1);if(Number.isNaN(parseInt(Z)))throw new h(`Invalid array index: '${Z}' in path: '${j}'`);if(Q!==0)z.push(W.slice(0,Q));z.push(Z)}else z.push(W)}return z},"getAttrPathList"),A1=H((j,$)=>C5($).reduce((z,W)=>{if(typeof z!=="object")throw new h(`Index '${W}' in '${$}' not found in '${JSON.stringify(j)}'`);else if(Array.isArray(z))return z[parseInt(W)];return z[W]},j),"getAttr"),T5=H((j)=>j!=null,"isSet"),I5=H((j)=>!j,"not"),A0=S1(),k0={[A0.EndpointURLScheme.HTTP]:80,[A0.EndpointURLScheme.HTTPS]:443},v5=H((j)=>{let $=(()=>{try{if(j instanceof URL)return j;if(typeof j==="object"&&"hostname"in j){let{hostname:B,port:b,protocol:D="",path:N="",query:fj={}}=j,U1=new URL(`${D}//${B}${b?`:${b}`:""}${N}`);return U1.search=Object.entries(fj).map(([uj,cj])=>`${uj}=${cj}`).join("&"),U1}return new URL(j)}catch(B){return null}})();if(!$)return console.error(`Unable to parse ${JSON.stringify(j)} as a whatwg URL.`),null;let z=$.href,{host:W,hostname:Q,pathname:Z,protocol:X,search:J}=$;if(J)return null;let K=X.slice(0,-1);if(!Object.values(A0.EndpointURLScheme).includes(K))return null;let G=P1(Q),V=z.includes(`${W}:${k0[K]}`)||typeof j==="string"&&j.includes(`${W}:${k0[K]}`),Y=`${W}${V?`:${k0[K]}`:""}`;return{scheme:K,authority:Y,path:Z,normalizedPath:Z.endsWith("/")?Z:`${Z}/`,isIp:G}},"parseURL"),R5=H((j,$)=>j===$,"stringEquals"),S5=H((j,$,z,W)=>{if($>=z||j.length<z)return null;if(!W)return j.substring($,z);return j.substring(j.length-z,j.length-$)},"substring"),k5=H((j)=>encodeURIComponent(j).replace(/[!*'()]/g,($)=>`%${$.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),P5={booleanEquals:N5,getAttr:A1,isSet:T5,isValidHostLabel:x0,not:I5,parseURL:v5,stringEquals:R5,substring:S5,uriEncode:k5},x1=H((j,$)=>{let z=[],W={...$.endpointParams,...$.referenceRecord},Q=0;while(Q<j.length){let Z=j.indexOf("{",Q);if(Z===-1){z.push(j.slice(Q));break}z.push(j.slice(Q,Z));let X=j.indexOf("}",Z);if(X===-1){z.push(j.slice(Z));break}if(j[Z+1]==="{"&&j[X+1]==="}")z.push(j.slice(Z+1,X)),Q=X+2;let J=j.substring(Z+1,X);if(J.includes("#")){let[K,G]=J.split("#");z.push(A1(W[K],G))}else z.push(W[J]);Q=X+1}return z.join("")},"evaluateTemplate"),A5=H(({ref:j},$)=>{return{...$.endpointParams,...$.referenceRecord}[j]},"getReferenceValue"),$0=H((j,$,z)=>{if(typeof j==="string")return x1(j,z);else if(j.fn)return E1(j,z);else if(j.ref)return A5(j,z);throw new h(`'${$}': ${String(j)} is not a string, function or reference.`)},"evaluateExpression"),E1=H(({fn:j,argv:$},z)=>{let W=$.map((Z)=>["boolean","number"].includes(typeof Z)?Z:$0(Z,"arg",z)),Q=j.split(".");if(Q[0]in P0&&Q[1]!=null)return P0[Q[0]][Q[1]](...W);return P5[j](...W)},"callFunction"),x5=H(({assign:j,...$},z)=>{if(j&&j in z.referenceRecord)throw new h(`'${j}' is already defined in Reference Record.`);let W=E1($,z);return z.logger?.debug?.(`${_} evaluateCondition: ${k($)} = ${k(W)}`),{result:W===""?!0:!!W,...j!=null&&{toAssign:{name:j,value:W}}}},"evaluateCondition"),E0=H((j=[],$)=>{let z={};for(let W of j){let{result:Q,toAssign:Z}=x5(W,{...$,referenceRecord:{...$.referenceRecord,...z}});if(!Q)return{result:Q};if(Z)z[Z.name]=Z.value,$.logger?.debug?.(`${_} assign: ${Z.name} := ${k(Z.value)}`)}return{result:!0,referenceRecord:z}},"evaluateConditions"),E5=H((j,$)=>Object.entries(j).reduce((z,[W,Q])=>({...z,[W]:Q.map((Z)=>{let X=$0(Z,"Header value entry",$);if(typeof X!=="string")throw new h(`Header '${W}' value '${X}' is not a string`);return X})}),{}),"getEndpointHeaders"),y1=H((j,$)=>{if(Array.isArray(j))return j.map((z)=>y1(z,$));switch(typeof j){case"string":return x1(j,$);case"object":if(j===null)throw new h(`Unexpected endpoint property: ${j}`);return g1(j,$);case"boolean":return j;default:throw new h(`Unexpected endpoint property type: ${typeof j}`)}},"getEndpointProperty"),g1=H((j,$)=>Object.entries(j).reduce((z,[W,Q])=>({...z,[W]:y1(Q,$)}),{}),"getEndpointProperties"),y5=H((j,$)=>{let z=$0(j,"Endpoint URL",$);if(typeof z==="string")try{return new URL(z)}catch(W){throw console.error(`Failed to construct URL with ${z}`,W),W}throw new h(`Endpoint URL must be a string, got ${typeof z}`)},"getEndpointUrl"),g5=H((j,$)=>{let{conditions:z,endpoint:W}=j,{result:Q,referenceRecord:Z}=E0(z,$);if(!Q)return;let X={...$,referenceRecord:{...$.referenceRecord,...Z}},{url:J,properties:K,headers:G}=W;return $.logger?.debug?.(`${_} Resolving endpoint from template: ${k(W)}`),{...G!=null&&{headers:E5(G,X)},...K!=null&&{properties:g1(K,X)},url:y5(J,X)}},"evaluateEndpointRule"),f5=H((j,$)=>{let{conditions:z,error:W}=j,{result:Q,referenceRecord:Z}=E0(z,$);if(!Q)return;throw new h($0(W,"Error",{...$,referenceRecord:{...$.referenceRecord,...Z}}))},"evaluateErrorRule"),u5=H((j,$)=>{let{conditions:z,rules:W}=j,{result:Q,referenceRecord:Z}=E0(z,$);if(!Q)return;return f1(W,{...$,referenceRecord:{...$.referenceRecord,...Z}})},"evaluateTreeRule"),f1=H((j,$)=>{for(let z of j)if(z.type==="endpoint"){let W=g5(z,$);if(W)return W}else if(z.type==="error")f5(z,$);else if(z.type==="tree"){let W=u5(z,$);if(W)return W}else throw new h(`Unknown endpoint rule: ${z}`);throw new h("Rules evaluation failed")},"evaluateRules"),c5=H((j,$)=>{let{endpointParams:z,logger:W}=$,{parameters:Q,rules:Z}=j;$.logger?.debug?.(`${_} Initial EndpointParams: ${k(z)}`);let X=Object.entries(Q).filter(([,G])=>G.default!=null).map(([G,V])=>[G,V.default]);if(X.length>0)for(let[G,V]of X)z[G]=z[G]??V;let J=Object.entries(Q).filter(([,G])=>G.required).map(([G])=>G);for(let G of J)if(z[G]==null)throw new h(`Missing required parameter: '${G}'`);let K=f1(Z,{endpointParams:z,logger:W,referenceRecord:{}});return $.logger?.debug?.(`${_} Resolved endpoint: ${k(K)}`),K},"resolveEndpoint")});var o1=q((Iz,r1)=>{var{defineProperty:z0,getOwnPropertyDescriptor:d5,getOwnPropertyNames:l5}=Object,_5=Object.prototype.hasOwnProperty,g=(j,$)=>z0(j,"name",{value:$,configurable:!0}),s5=(j,$)=>{for(var z in $)z0(j,z,{get:$[z],enumerable:!0})},m5=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of l5($))if(!_5.call(j,Q)&&Q!==z)z0(j,Q,{get:()=>$[Q],enumerable:!(W=d5($,Q))||W.enumerable})}return j},p5=(j)=>m5(z0({},"__esModule",{value:!0}),j),l1={};s5(l1,{ConditionObject:()=>w.ConditionObject,DeprecatedObject:()=>w.DeprecatedObject,EndpointError:()=>w.EndpointError,EndpointObject:()=>w.EndpointObject,EndpointObjectHeaders:()=>w.EndpointObjectHeaders,EndpointObjectProperties:()=>w.EndpointObjectProperties,EndpointParams:()=>w.EndpointParams,EndpointResolverOptions:()=>w.EndpointResolverOptions,EndpointRuleObject:()=>w.EndpointRuleObject,ErrorRuleObject:()=>w.ErrorRuleObject,EvaluateOptions:()=>w.EvaluateOptions,Expression:()=>w.Expression,FunctionArgv:()=>w.FunctionArgv,FunctionObject:()=>w.FunctionObject,FunctionReturn:()=>w.FunctionReturn,ParameterObject:()=>w.ParameterObject,ReferenceObject:()=>w.ReferenceObject,ReferenceRecord:()=>w.ReferenceRecord,RuleSetObject:()=>w.RuleSetObject,RuleSetRules:()=>w.RuleSetRules,TreeRuleObject:()=>w.TreeRuleObject,awsEndpointFunctions:()=>n1,getUserAgentPrefix:()=>r5,isIpAddress:()=>w.isIpAddress,partition:()=>i1,resolveEndpoint:()=>w.resolveEndpoint,setPartitionInfo:()=>a1,useDefaultPartitionInfo:()=>n5});r1.exports=p5(l1);var w=c1(),_1=g((j,$=!1)=>{if($){for(let z of j.split("."))if(!_1(z))return!1;return!0}if(!w.isValidHostLabel(j))return!1;if(j.length<3||j.length>63)return!1;if(j!==j.toLowerCase())return!1;if(w.isIpAddress(j))return!1;return!0},"isVirtualHostableS3Bucket"),d1=":",i5="/",a5=g((j)=>{let $=j.split(d1);if($.length<6)return null;let[z,W,Q,Z,X,...J]=$;if(z!=="arn"||W===""||Q===""||J.join(d1)==="")return null;let K=J.map((G)=>G.split(i5)).flat();return{partition:W,service:Q,region:Z,accountId:X,resourceId:K}},"parseArn"),s1={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],version:"1.1"},m1=s1,p1="",i1=g((j)=>{let{partitions:$}=m1;for(let W of $){let{regions:Q,outputs:Z}=W;for(let[X,J]of Object.entries(Q))if(X===j)return{...Z,...J}}for(let W of $){let{regionRegex:Q,outputs:Z}=W;if(new RegExp(Q).test(j))return{...Z}}let z=$.find((W)=>W.id==="aws");if(!z)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...z.outputs}},"partition"),a1=g((j,$="")=>{m1=j,p1=$},"setPartitionInfo"),n5=g(()=>{a1(s1,"")},"useDefaultPartitionInfo"),r5=g(()=>p1,"getUserAgentPrefix"),n1={isVirtualHostableS3Bucket:_1,parseArn:a5,partition:i1};w.customEndpointFunctions.aws=n1});var B4=q((vz,Y4)=>{var{defineProperty:W0,getOwnPropertyDescriptor:t5,getOwnPropertyNames:e5}=Object,j6=Object.prototype.hasOwnProperty,P=(j,$)=>W0(j,"name",{value:$,configurable:!0}),$6=(j,$)=>{for(var z in $)W0(j,z,{get:$[z],enumerable:!0})},z6=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of e5($))if(!j6.call(j,Q)&&Q!==z)W0(j,Q,{get:()=>$[Q],enumerable:!(W=t5($,Q))||W.enumerable})}return j},Q6=(j)=>z6(W0({},"__esModule",{value:!0}),j),z4={};$6(z4,{DEFAULT_UA_APP_ID:()=>Q4,getUserAgentMiddlewareOptions:()=>G4,getUserAgentPlugin:()=>B6,resolveUserAgentConfig:()=>Z4,userAgentMiddleware:()=>K4});Y4.exports=Q6(z4);var W6=$4(),Q4=void 0;function W4(j){if(j===void 0)return!0;return typeof j==="string"&&j.length<=50}P(W4,"isValidUserAgentAppId");function Z4(j){let $=W6.normalizeProvider(j.userAgentAppId??Q4),{customUserAgent:z}=j;return Object.assign(j,{customUserAgent:typeof z==="string"?[[z]]:z,userAgentAppId:P(async()=>{let W=await $();if(!W4(W)){let Q=j.logger?.constructor?.name==="NoOpLogger"||!j.logger?console:j.logger;if(typeof W!=="string")Q?.warn("userAgentAppId must be a string or undefined.");else if(W.length>50)Q?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return W},"userAgentAppId")})}P(Z4,"resolveUserAgentConfig");var Z6=o1(),X6=l(),v=o5(),J6=/\d{12}\.ddb/;async function X4(j,$,z){if(z.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor")v.setFeature(j,"PROTOCOL_RPC_V2_CBOR","M");if(typeof $.retryStrategy==="function"){let Z=await $.retryStrategy();if(typeof Z.acquireInitialRetryToken==="function")if(Z.constructor?.name?.includes("Adaptive"))v.setFeature(j,"RETRY_MODE_ADAPTIVE","F");else v.setFeature(j,"RETRY_MODE_STANDARD","E");else v.setFeature(j,"RETRY_MODE_LEGACY","D")}if(typeof $.accountIdEndpointMode==="function"){let Z=j.endpointV2;if(String(Z?.url?.hostname).match(J6))v.setFeature(j,"ACCOUNT_ID_ENDPOINT","O");switch(await $.accountIdEndpointMode?.()){case"disabled":v.setFeature(j,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":v.setFeature(j,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":v.setFeature(j,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let Q=j.__smithy_context?.selectedHttpAuthScheme?.identity;if(Q?.$source){let Z=Q;if(Z.accountId)v.setFeature(j,"RESOLVED_ACCOUNT_ID","T");for(let[X,J]of Object.entries(Z.$source??{}))v.setFeature(j,X,J)}}P(X4,"checkFeatures");var t1="user-agent",y0="x-amz-user-agent",e1=" ",g0="/",K6=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,G6=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,j4="-",Y6=1024;function J4(j){let $="";for(let z in j){let W=j[z];if($.length+W.length+1<=Y6){if($.length)$+=","+W;else $+=W;continue}break}return $}P(J4,"encodeFeatures");var K4=P((j)=>($,z)=>async(W)=>{let{request:Q}=W;if(!X6.HttpRequest.isInstance(Q))return $(W);let{headers:Z}=Q,X=z?.userAgent?.map(Q0)||[],J=(await j.defaultUserAgentProvider()).map(Q0);await X4(z,j,W);let K=z;J.push(`m/${J4(Object.assign({},z.__smithy_context?.features,K.__aws_sdk_context?.features))}`);let G=j?.customUserAgent?.map(Q0)||[],V=await j.userAgentAppId();if(V)J.push(Q0([`app/${V}`]));let Y=Z6.getUserAgentPrefix(),B=(Y?[Y]:[]).concat([...J,...X,...G]).join(e1),b=[...J.filter((D)=>D.startsWith("aws-sdk-")),...G].join(e1);if(j.runtime!=="browser"){if(b)Z[y0]=Z[y0]?`${Z[t1]} ${b}`:b;Z[t1]=B}else Z[y0]=B;return $({...W,request:Q})},"userAgentMiddleware"),Q0=P((j)=>{let $=j[0].split(g0).map((X)=>X.replace(K6,j4)).join(g0),z=j[1]?.replace(G6,j4),W=$.indexOf(g0),Q=$.substring(0,W),Z=$.substring(W+1);if(Q==="api")Z=Z.toLowerCase();return[Q,Z,z].filter((X)=>X&&X.length>0).reduce((X,J,K)=>{switch(K){case 0:return J;case 1:return`${X}/${J}`;default:return`${X}#${J}`}},"")},"escapeUserAgent"),G4={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},B6=P((j)=>({applyToStack:P(($)=>{$.add(K4(j),G4)},"applyToStack")}),"getUserAgentPlugin")});var U4=q((Rz,w4)=>{var{defineProperty:Z0,getOwnPropertyDescriptor:q6,getOwnPropertyNames:V6}=Object,H6=Object.prototype.hasOwnProperty,q4=(j,$)=>Z0(j,"name",{value:$,configurable:!0}),w6=(j,$)=>{for(var z in $)Z0(j,z,{get:$[z],enumerable:!0})},U6=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of V6($))if(!H6.call(j,Q)&&Q!==z)Z0(j,Q,{get:()=>$[Q],enumerable:!(W=q6($,Q))||W.enumerable})}return j},L6=(j)=>U6(Z0({},"__esModule",{value:!0}),j),V4={};w6(V4,{SelectorType:()=>H4,booleanSelector:()=>M6,numberSelector:()=>b6});w4.exports=L6(V4);var M6=q4((j,$,z)=>{if(!($ in j))return;if(j[$]==="true")return!0;if(j[$]==="false")return!1;throw new Error(`Cannot load ${z} "${$}". Expected "true" or "false", got ${j[$]}.`)},"booleanSelector"),b6=q4((j,$,z)=>{if(!($ in j))return;let W=parseInt(j[$],10);if(Number.isNaN(W))throw new TypeError(`Cannot load ${z} '${$}'. Expected number, got '${j[$]}'.`);return W},"numberSelector"),H4=((j)=>{return j.ENV="env",j.CONFIG="shared config entry",j})(H4||{})});var v4=q((Sz,I4)=>{var{defineProperty:J0,getOwnPropertyDescriptor:F6,getOwnPropertyNames:D6}=Object,h6=Object.prototype.hasOwnProperty,C=(j,$)=>J0(j,"name",{value:$,configurable:!0}),O6=(j,$)=>{for(var z in $)J0(j,z,{get:$[z],enumerable:!0})},N6=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of D6($))if(!h6.call(j,Q)&&Q!==z)J0(j,Q,{get:()=>$[Q],enumerable:!(W=F6($,Q))||W.enumerable})}return j},C6=(j)=>N6(J0({},"__esModule",{value:!0}),j),b4={};O6(b4,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>D4,CONFIG_USE_FIPS_ENDPOINT:()=>O4,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>T6,DEFAULT_USE_FIPS_ENDPOINT:()=>v6,ENV_USE_DUALSTACK_ENDPOINT:()=>F4,ENV_USE_FIPS_ENDPOINT:()=>h4,NODE_REGION_CONFIG_FILE_OPTIONS:()=>x6,NODE_REGION_CONFIG_OPTIONS:()=>A6,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>I6,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>R6,REGION_ENV_NAME:()=>N4,REGION_INI_NAME:()=>C4,getRegionInfo:()=>u6,resolveCustomEndpointsConfig:()=>S6,resolveEndpointsConfig:()=>P6,resolveRegionConfig:()=>E6});I4.exports=C6(b4);var A=U4(),F4="AWS_USE_DUALSTACK_ENDPOINT",D4="use_dualstack_endpoint",T6=!1,I6={environmentVariableSelector:(j)=>A.booleanSelector(j,F4,A.SelectorType.ENV),configFileSelector:(j)=>A.booleanSelector(j,D4,A.SelectorType.CONFIG),default:!1},h4="AWS_USE_FIPS_ENDPOINT",O4="use_fips_endpoint",v6=!1,R6={environmentVariableSelector:(j)=>A.booleanSelector(j,h4,A.SelectorType.ENV),configFileSelector:(j)=>A.booleanSelector(j,O4,A.SelectorType.CONFIG),default:!1},X0=f0(),S6=C((j)=>{let{tls:$,endpoint:z,urlParser:W,useDualstackEndpoint:Q}=j;return Object.assign(j,{tls:$??!0,endpoint:X0.normalizeProvider(typeof z==="string"?W(z):z),isCustomEndpoint:!0,useDualstackEndpoint:X0.normalizeProvider(Q??!1)})},"resolveCustomEndpointsConfig"),k6=C(async(j)=>{let{tls:$=!0}=j,z=await j.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(z))throw new Error("Invalid region in client config");let Q=await j.useDualstackEndpoint(),Z=await j.useFipsEndpoint(),{hostname:X}=await j.regionInfoProvider(z,{useDualstackEndpoint:Q,useFipsEndpoint:Z})??{};if(!X)throw new Error("Cannot resolve hostname from client config");return j.urlParser(`${$?"https:":"http:"}//${X}`)},"getEndpointFromRegion"),P6=C((j)=>{let $=X0.normalizeProvider(j.useDualstackEndpoint??!1),{endpoint:z,useFipsEndpoint:W,urlParser:Q,tls:Z}=j;return Object.assign(j,{tls:Z??!0,endpoint:z?X0.normalizeProvider(typeof z==="string"?Q(z):z):()=>k6({...j,useDualstackEndpoint:$,useFipsEndpoint:W}),isCustomEndpoint:!!z,useDualstackEndpoint:$})},"resolveEndpointsConfig"),N4="AWS_REGION",C4="region",A6={environmentVariableSelector:(j)=>j[N4],configFileSelector:(j)=>j[C4],default:()=>{throw new Error("Region is missing")}},x6={preferredFile:"credentials"},T4=C((j)=>typeof j==="string"&&(j.startsWith("fips-")||j.endsWith("-fips")),"isFipsRegion"),L4=C((j)=>T4(j)?["fips-aws-global","aws-fips"].includes(j)?"us-east-1":j.replace(/fips-(dkr-|prod-)?|-fips/,""):j,"getRealRegion"),E6=C((j)=>{let{region:$,useFipsEndpoint:z}=j;if(!$)throw new Error("Region is missing");return Object.assign(j,{region:async()=>{if(typeof $==="string")return L4($);let W=await $();return L4(W)},useFipsEndpoint:async()=>{let W=typeof $==="string"?$:await $();if(T4(W))return!0;return typeof z!=="function"?Promise.resolve(!!z):z()}})},"resolveRegionConfig"),M4=C((j=[],{useFipsEndpoint:$,useDualstackEndpoint:z})=>j.find(({tags:W})=>$===W.includes("fips")&&z===W.includes("dualstack"))?.hostname,"getHostnameFromVariants"),y6=C((j,{regionHostname:$,partitionHostname:z})=>$?$:z?z.replace("{region}",j):void 0,"getResolvedHostname"),g6=C((j,{partitionHash:$})=>Object.keys($||{}).find((z)=>$[z].regions.includes(j))??"aws","getResolvedPartition"),f6=C((j,{signingRegion:$,regionRegex:z,useFipsEndpoint:W})=>{if($)return $;else if(W){let Q=z.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),Z=j.match(Q);if(Z)return Z[0].slice(1,-1)}},"getResolvedSigningRegion"),u6=C((j,{useFipsEndpoint:$=!1,useDualstackEndpoint:z=!1,signingService:W,regionHash:Q,partitionHash:Z})=>{let X=g6(j,{partitionHash:Z}),J=j in Q?j:Z[X]?.endpoint??j,K={useFipsEndpoint:$,useDualstackEndpoint:z},G=M4(Q[J]?.variants,K),V=M4(Z[X]?.variants,K),Y=y6(J,{regionHostname:G,partitionHostname:V});if(Y===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:J,useFipsEndpoint:$,useDualstackEndpoint:z}}`);let B=f6(Y,{signingRegion:Q[J]?.signingRegion,regionRegex:Z[X].regionRegex,useFipsEndpoint:$});return{partition:X,signingService:W,hostname:Y,...B&&{signingRegion:B},...Q[J]?.signingService&&{signingService:Q[J].signingService}}},"getRegionInfo")});var a6=q((kz,A4)=>{var{defineProperty:K0,getOwnPropertyDescriptor:c6,getOwnPropertyNames:d6}=Object,l6=Object.prototype.hasOwnProperty,S4=(j,$)=>K0(j,"name",{value:$,configurable:!0}),_6=(j,$)=>{for(var z in $)K0(j,z,{get:$[z],enumerable:!0})},s6=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of d6($))if(!l6.call(j,Q)&&Q!==z)K0(j,Q,{get:()=>$[Q],enumerable:!(W=c6($,Q))||W.enumerable})}return j},m6=(j)=>s6(K0({},"__esModule",{value:!0}),j),k4={};_6(k4,{contentLengthMiddleware:()=>u0,contentLengthMiddlewareOptions:()=>P4,getContentLengthPlugin:()=>i6});A4.exports=m6(k4);var p6=l(),R4="content-length";function u0(j){return($)=>async(z)=>{let W=z.request;if(p6.HttpRequest.isInstance(W)){let{body:Q,headers:Z}=W;if(Q&&Object.keys(Z).map((X)=>X.toLowerCase()).indexOf(R4)===-1)try{let X=j(Q);W.headers={...W.headers,[R4]:String(X)}}catch(X){}}return $({...z,request:W})}}S4(u0,"contentLengthMiddleware");var P4={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},i6=S4((j)=>({applyToStack:($)=>{$.add(u0(j.bodyLengthChecker),P4)}}),"getContentLengthPlugin")});var f=q((x4)=>{Object.defineProperty(x4,"__esModule",{value:!0});x4.getHomeDir=void 0;var n6=F("os"),r6=F("path"),c0={},o6=()=>{if(process&&process.geteuid)return`${process.geteuid()}`;return"DEFAULT"},t6=()=>{let{HOME:j,USERPROFILE:$,HOMEPATH:z,HOMEDRIVE:W=`C:${r6.sep}`}=process.env;if(j)return j;if($)return $;if(z)return`${W}${z}`;let Q=o6();if(!c0[Q])c0[Q]=n6.homedir();return c0[Q]};x4.getHomeDir=t6});var d0=q((y4)=>{Object.defineProperty(y4,"__esModule",{value:!0});y4.getSSOTokenFilepath=void 0;var e6=F("crypto"),j$=F("path"),$$=f(),z$=(j)=>{let z=e6.createHash("sha1").update(j).digest("hex");return j$.join($$.getHomeDir(),".aws","sso","cache",`${z}.json`)};y4.getSSOTokenFilepath=z$});var c4=q((f4)=>{Object.defineProperty(f4,"__esModule",{value:!0});f4.getSSOTokenFromFile=void 0;var Q$=F("fs"),W$=d0(),{readFile:Z$}=Q$.promises,X$=async(j)=>{let $=W$.getSSOTokenFilepath(j),z=await Z$($,"utf8");return JSON.parse(z)};f4.getSSOTokenFromFile=X$});var _0=q((d4)=>{Object.defineProperty(d4,"__esModule",{value:!0});d4.slurpFile=void 0;var J$=F("fs"),{readFile:K$}=J$.promises,l0={},G$=(j,$)=>{if(!l0[j]||($===null||$===void 0?void 0:$.ignoreCache))l0[j]=K$(j,"utf8");return l0[j]};d4.slurpFile=G$});var i0=q((yz,m)=>{var{defineProperty:B0,getOwnPropertyDescriptor:Y$,getOwnPropertyNames:B$}=Object,q$=Object.prototype.hasOwnProperty,O=(j,$)=>B0(j,"name",{value:$,configurable:!0}),V$=(j,$)=>{for(var z in $)B0(j,z,{get:$[z],enumerable:!0})},s0=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of B$($))if(!q$.call(j,Q)&&Q!==z)B0(j,Q,{get:()=>$[Q],enumerable:!(W=Y$($,Q))||W.enumerable})}return j},p0=(j,$,z)=>(s0(j,$,"default"),z&&s0(z,$,"default")),H$=(j)=>s0(B0({},"__esModule",{value:!0}),j),s={};V$(s,{CONFIG_PREFIX_SEPARATOR:()=>E,DEFAULT_PROFILE:()=>p4,ENV_PROFILE:()=>m4,getProfileName:()=>w$,loadSharedConfigFiles:()=>a4,loadSsoSessionData:()=>v$,parseKnownFiles:()=>S$});m.exports=H$(s);p0(s,f(),m.exports);var m4="AWS_PROFILE",p4="default",w$=O((j)=>j.profile||process.env[m4]||p4,"getProfileName");p0(s,d0(),m.exports);p0(s,c4(),m.exports);var G0=S1(),U$=O((j)=>Object.entries(j).filter(([$])=>{let z=$.indexOf(E);if(z===-1)return!1;return Object.values(G0.IniSectionType).includes($.substring(0,z))}).reduce(($,[z,W])=>{let Q=z.indexOf(E),Z=z.substring(0,Q)===G0.IniSectionType.PROFILE?z.substring(Q+1):z;return $[Z]=W,$},{...j.default&&{default:j.default}}),"getConfigData"),Y0=F("path"),L$=f(),M$="AWS_CONFIG_FILE",i4=O(()=>process.env[M$]||Y0.join(L$.getHomeDir(),".aws","config"),"getConfigFilepath"),b$=f(),F$="AWS_SHARED_CREDENTIALS_FILE",D$=O(()=>process.env[F$]||Y0.join(b$.getHomeDir(),".aws","credentials"),"getCredentialsFilepath"),h$=f(),O$=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,N$=["__proto__","profile __proto__"],m0=O((j)=>{let $={},z,W;for(let Q of j.split(/\r?\n/)){let Z=Q.split(/(^|\s)[;#]/)[0].trim();if(Z[0]==="["&&Z[Z.length-1]==="]"){z=void 0,W=void 0;let J=Z.substring(1,Z.length-1),K=O$.exec(J);if(K){let[,G,,V]=K;if(Object.values(G0.IniSectionType).includes(G))z=[G,V].join(E)}else z=J;if(N$.includes(J))throw new Error(`Found invalid profile name "${J}"`)}else if(z){let J=Z.indexOf("=");if(![0,-1].includes(J)){let[K,G]=[Z.substring(0,J).trim(),Z.substring(J+1).trim()];if(G==="")W=K;else{if(W&&Q.trimStart()===Q)W=void 0;$[z]=$[z]||{};let V=W?[W,K].join(E):K;$[z][V]=G}}}}return $},"parseIni"),_4=_0(),s4=O(()=>({}),"swallowError"),E=".",a4=O(async(j={})=>{let{filepath:$=D$(),configFilepath:z=i4()}=j,W=h$.getHomeDir(),Q="~/",Z=$;if($.startsWith("~/"))Z=Y0.join(W,$.slice(2));let X=z;if(z.startsWith("~/"))X=Y0.join(W,z.slice(2));let J=await Promise.all([_4.slurpFile(X,{ignoreCache:j.ignoreCache}).then(m0).then(U$).catch(s4),_4.slurpFile(Z,{ignoreCache:j.ignoreCache}).then(m0).catch(s4)]);return{configFile:J[0],credentialsFile:J[1]}},"loadSharedConfigFiles"),C$=O((j)=>Object.entries(j).filter(([$])=>$.startsWith(G0.IniSectionType.SSO_SESSION+E)).reduce(($,[z,W])=>({...$,[z.substring(z.indexOf(E)+1)]:W}),{}),"getSsoSessionData"),T$=_0(),I$=O(()=>({}),"swallowError"),v$=O(async(j={})=>T$.slurpFile(j.configFilepath??i4()).then(m0).then(C$).catch(I$),"loadSsoSessionData"),R$=O((...j)=>{let $={};for(let z of j)for(let[W,Q]of Object.entries(z))if($[W]!==void 0)Object.assign($[W],Q);else $[W]=Q;return $},"mergeConfigFiles"),S$=O(async(j)=>{let $=await a4(j);return R$($.configFile,$.credentialsFile)},"parseKnownFiles")});var V0=q((gz,o4)=>{var{defineProperty:q0,getOwnPropertyDescriptor:k$,getOwnPropertyNames:P$}=Object,A$=Object.prototype.hasOwnProperty,u=(j,$)=>q0(j,"name",{value:$,configurable:!0}),x$=(j,$)=>{for(var z in $)q0(j,z,{get:$[z],enumerable:!0})},E$=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of P$($))if(!A$.call(j,Q)&&Q!==z)q0(j,Q,{get:()=>$[Q],enumerable:!(W=k$($,Q))||W.enumerable})}return j},y$=(j)=>E$(q0({},"__esModule",{value:!0}),j),r4={};x$(r4,{loadConfig:()=>d$});o4.exports=y$(r4);var p=a0();function n0(j){try{let $=new Set(Array.from(j.match(/([A-Z_]){3,}/g)??[]));return $.delete("CONFIG"),$.delete("CONFIG_PREFIX_SEPARATOR"),$.delete("ENV"),[...$].join(", ")}catch($){return j}}u(n0,"getSelectorName");var g$=u((j,$)=>async()=>{try{let z=j(process.env,$);if(z===void 0)throw new Error;return z}catch(z){throw new p.CredentialsProviderError(z.message||`Not found in ENV: ${n0(j.toString())}`,{logger:$?.logger})}},"fromEnv"),n4=i0(),f$=u((j,{preferredFile:$="config",...z}={})=>async()=>{let W=n4.getProfileName(z),{configFile:Q,credentialsFile:Z}=await n4.loadSharedConfigFiles(z),X=Z[W]||{},J=Q[W]||{},K=$==="config"?{...X,...J}:{...J,...X};try{let V=j(K,$==="config"?Q:Z);if(V===void 0)throw new Error;return V}catch(G){throw new p.CredentialsProviderError(G.message||`Not found in config files w/ profile [${W}]: ${n0(j.toString())}`,{logger:z.logger})}},"fromSharedConfigFiles"),u$=u((j)=>typeof j==="function","isFunction"),c$=u((j)=>u$(j)?async()=>await j():p.fromStatic(j),"fromStatic"),d$=u(({environmentVariableSelector:j,configFileSelector:$,default:z},W={})=>{let{signingName:Q,logger:Z}=W,X={signingName:Q,logger:Z};return p.memoize(p.chain(g$(j,X),f$($,W),c$(z)))},"loadConfig")});var Q8=q(($8)=>{Object.defineProperty($8,"__esModule",{value:!0});$8.getEndpointUrlConfig=void 0;var t4=i0(),e4="AWS_ENDPOINT_URL",j8="endpoint_url",l$=(j)=>({environmentVariableSelector:($)=>{let z=j.split(" ").map((Z)=>Z.toUpperCase()),W=$[[e4,...z].join("_")];if(W)return W;let Q=$[e4];if(Q)return Q;return},configFileSelector:($,z)=>{if(z&&$.services){let Q=z[["services",$.services].join(t4.CONFIG_PREFIX_SEPARATOR)];if(Q){let Z=j.split(" ").map((J)=>J.toLowerCase()),X=Q[[Z.join("_"),j8].join(t4.CONFIG_PREFIX_SEPARATOR)];if(X)return X}}let W=$[j8];if(W)return W;return},default:void 0});$8.getEndpointUrlConfig=l$});var r0=q((W8)=>{Object.defineProperty(W8,"__esModule",{value:!0});W8.getEndpointFromConfig=void 0;var _$=V0(),s$=Q8(),m$=async(j)=>_$.loadConfig(s$.getEndpointUrlConfig(j!==null&&j!==void 0?j:""))();W8.getEndpointFromConfig=m$});var G8=q((cz,K8)=>{var{defineProperty:H0,getOwnPropertyDescriptor:p$,getOwnPropertyNames:i$}=Object,a$=Object.prototype.hasOwnProperty,n$=(j,$)=>H0(j,"name",{value:$,configurable:!0}),r$=(j,$)=>{for(var z in $)H0(j,z,{get:$[z],enumerable:!0})},o$=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of i$($))if(!a$.call(j,Q)&&Q!==z)H0(j,Q,{get:()=>$[Q],enumerable:!(W=p$($,Q))||W.enumerable})}return j},t$=(j)=>o$(H0({},"__esModule",{value:!0}),j),X8={};r$(X8,{parseQueryString:()=>J8});K8.exports=t$(X8);function J8(j){let $={};if(j=j.replace(/^\?/,""),j)for(let z of j.split("&")){let[W,Q=null]=z.split("=");if(W=decodeURIComponent(W),Q)Q=decodeURIComponent(Q);if(!(W in $))$[W]=Q;else if(Array.isArray($[W]))$[W].push(Q);else $[W]=[$[W],Q]}return $}n$(J8,"parseQueryString")});var o0=q((dz,q8)=>{var{defineProperty:w0,getOwnPropertyDescriptor:e$,getOwnPropertyNames:j2}=Object,$2=Object.prototype.hasOwnProperty,z2=(j,$)=>w0(j,"name",{value:$,configurable:!0}),Q2=(j,$)=>{for(var z in $)w0(j,z,{get:$[z],enumerable:!0})},W2=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of j2($))if(!$2.call(j,Q)&&Q!==z)w0(j,Q,{get:()=>$[Q],enumerable:!(W=e$($,Q))||W.enumerable})}return j},Z2=(j)=>W2(w0({},"__esModule",{value:!0}),j),Y8={};Q2(Y8,{parseUrl:()=>B8});q8.exports=Z2(Y8);var X2=G8(),B8=z2((j)=>{if(typeof j==="string")return B8(new URL(j));let{hostname:$,pathname:z,port:W,protocol:Q,search:Z}=j,X;if(Z)X=X2.parseQueryString(Z);return{hostname:$,port:W?parseInt(W):void 0,protocol:Q,path:z,query:X}},"parseUrl")});var I2=q((lz,b8)=>{var{defineProperty:L0,getOwnPropertyDescriptor:K2,getOwnPropertyNames:G2}=Object,Y2=Object.prototype.hasOwnProperty,T=(j,$)=>L0(j,"name",{value:$,configurable:!0}),B2=(j,$)=>{for(var z in $)L0(j,z,{get:$[z],enumerable:!0})},q2=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of G2($))if(!Y2.call(j,Q)&&Q!==z)L0(j,Q,{get:()=>$[Q],enumerable:!(W=K2($,Q))||W.enumerable})}return j},V2=(j)=>q2(L0({},"__esModule",{value:!0}),j),H8={};B2(H8,{endpointMiddleware:()=>L8,endpointMiddlewareOptions:()=>M8,getEndpointFromInstructions:()=>w8,getEndpointPlugin:()=>N2,resolveEndpointConfig:()=>T2,resolveParams:()=>U8,toEndpointV1:()=>t0});b8.exports=V2(H8);var H2=T(async(j)=>{let $=j?.Bucket||"";if(typeof j.Bucket==="string")j.Bucket=$.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"));if(b2($)){if(j.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else if(!M2($)||$.indexOf(".")!==-1&&!String(j.Endpoint).startsWith("http:")||$.toLowerCase()!==$||$.length<3)j.ForcePathStyle=!0;if(j.DisableMultiRegionAccessPoints)j.disableMultiRegionAccessPoints=!0,j.DisableMRAP=!0;return j},"resolveParamsForS3"),w2=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,U2=/(\d+\.){3}\d+/,L2=/\.\./,M2=T((j)=>w2.test(j)&&!U2.test(j)&&!L2.test(j),"isDnsCompatibleBucketName"),b2=T((j)=>{let[$,z,W,,,Q]=j.split(":"),Z=$==="arn"&&j.split(":").length>=6,X=Boolean(Z&&z&&W&&Q);if(Z&&!X)throw new Error(`Invalid ARN: ${j} was an invalid ARN.`);return X},"isArnBucketName"),F2=T((j,$,z)=>{let W=T(async()=>{let Q=z[j]??z[$];if(typeof Q==="function")return Q();return Q},"configProvider");if(j==="credentialScope"||$==="CredentialScope")return async()=>{let Q=typeof z.credentials==="function"?await z.credentials():z.credentials;return Q?.credentialScope??Q?.CredentialScope};if(j==="accountId"||$==="AccountId")return async()=>{let Q=typeof z.credentials==="function"?await z.credentials():z.credentials;return Q?.accountId??Q?.AccountId};if(j==="endpoint"||$==="endpoint")return async()=>{let Q=await W();if(Q&&typeof Q==="object"){if("url"in Q)return Q.url.href;if("hostname"in Q){let{protocol:Z,hostname:X,port:J,path:K}=Q;return`${Z}//${X}${J?":"+J:""}${K}`}}return Q};return W},"createConfigValueProvider"),D2=r0(),V8=o0(),t0=T((j)=>{if(typeof j==="object"){if("url"in j)return V8.parseUrl(j.url);return j}return V8.parseUrl(j)},"toEndpointV1"),w8=T(async(j,$,z,W)=>{if(!z.endpoint){let X;if(z.serviceConfiguredEndpoint)X=await z.serviceConfiguredEndpoint();else X=await D2.getEndpointFromConfig(z.serviceId);if(X)z.endpoint=()=>Promise.resolve(t0(X))}let Q=await U8(j,$,z);if(typeof z.endpointProvider!=="function")throw new Error("config.endpointProvider is not set.");return z.endpointProvider(Q,W)},"getEndpointFromInstructions"),U8=T(async(j,$,z)=>{let W={},Q=$?.getEndpointParameterInstructions?.()||{};for(let[Z,X]of Object.entries(Q))switch(X.type){case"staticContextParams":W[Z]=X.value;break;case"contextParams":W[Z]=j[X.name];break;case"clientContextParams":case"builtInParams":W[Z]=await F2(X.name,Z,z)();break;case"operationContextParams":W[Z]=X.get(j);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(X))}if(Object.keys(Q).length===0)Object.assign(W,z);if(String(z.serviceId).toLowerCase()==="s3")await H2(W);return W},"resolveParams"),h2=$4(),U0=f0(),L8=T(({config:j,instructions:$})=>{return(z,W)=>async(Q)=>{if(j.endpoint)h2.setFeature(W,"ENDPOINT_OVERRIDE","N");let Z=await w8(Q.input,{getEndpointParameterInstructions(){return $}},{...j},W);W.endpointV2=Z,W.authSchemes=Z.properties?.authSchemes;let X=W.authSchemes?.[0];if(X){W.signing_region=X.signingRegion,W.signing_service=X.signingName;let K=U0.getSmithyContext(W)?.selectedHttpAuthScheme?.httpAuthOption;if(K)K.signingProperties=Object.assign(K.signingProperties||{},{signing_region:X.signingRegion,signingRegion:X.signingRegion,signing_service:X.signingName,signingName:X.signingName,signingRegionSet:X.signingRegionSet},X.properties)}return z({...Q})}},"endpointMiddleware"),O2=J2(),M8={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:O2.serializerMiddlewareOption.name},N2=T((j,$)=>({applyToStack:(z)=>{z.addRelativeTo(L8({config:j,instructions:$}),M8)}}),"getEndpointPlugin"),C2=r0(),T2=T((j)=>{let $=j.tls??!0,{endpoint:z,useDualstackEndpoint:W,useFipsEndpoint:Q}=j,Z=z!=null?async()=>t0(await U0.normalizeProvider(z)()):void 0,J=Object.assign(j,{endpoint:Z,tls:$,isCustomEndpoint:!!z,useDualstackEndpoint:U0.normalizeProvider(W??!1),useFipsEndpoint:U0.normalizeProvider(Q??!1)}),K=void 0;return J.serviceConfiguredEndpoint=async()=>{if(j.serviceId&&!K)K=C2.getEndpointFromConfig(j.serviceId);return K},J},"resolveEndpointConfig")});var j1=q((_z,O8)=>{var{defineProperty:M0,getOwnPropertyDescriptor:v2,getOwnPropertyNames:R2}=Object,S2=Object.prototype.hasOwnProperty,y=(j,$)=>M0(j,"name",{value:$,configurable:!0}),k2=(j,$)=>{for(var z in $)M0(j,z,{get:$[z],enumerable:!0})},P2=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of R2($))if(!S2.call(j,Q)&&Q!==z)M0(j,Q,{get:()=>$[Q],enumerable:!(W=v2($,Q))||W.enumerable})}return j},A2=(j)=>P2(M0({},"__esModule",{value:!0}),j),F8={};k2(F8,{isBrowserNetworkError:()=>h8,isClockSkewCorrectedError:()=>D8,isClockSkewError:()=>c2,isRetryableByTrait:()=>u2,isServerError:()=>l2,isThrottlingError:()=>d2,isTransientError:()=>e0});O8.exports=A2(F8);var x2=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],E2=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],y2=["TimeoutError","RequestTimeout","RequestTimeoutException"],g2=[500,502,503,504],f2=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],u2=y((j)=>j.$retryable!==void 0,"isRetryableByTrait"),c2=y((j)=>x2.includes(j.name),"isClockSkewError"),D8=y((j)=>j.$metadata?.clockSkewCorrected,"isClockSkewCorrectedError"),h8=y((j)=>{let $=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);if(!(j&&j instanceof TypeError))return!1;return $.has(j.message)},"isBrowserNetworkError"),d2=y((j)=>j.$metadata?.httpStatusCode===429||E2.includes(j.name)||j.$retryable?.throttling==!0,"isThrottlingError"),e0=y((j,$=0)=>D8(j)||y2.includes(j.name)||f2.includes(j?.code||"")||g2.includes(j.$metadata?.httpStatusCode||0)||h8(j)||j.cause!==void 0&&$<=10&&e0(j.cause,$+1),"isTransientError"),l2=y((j)=>{if(j.$metadata?.httpStatusCode!==void 0){let $=j.$metadata.httpStatusCode;if(500<=$&&$<=599&&!e0(j))return!0;return!1}return!1},"isServerError")});var A8=q((sz,P8)=>{var{defineProperty:b0,getOwnPropertyDescriptor:_2,getOwnPropertyNames:s2}=Object,m2=Object.prototype.hasOwnProperty,I=(j,$)=>b0(j,"name",{value:$,configurable:!0}),p2=(j,$)=>{for(var z in $)b0(j,z,{get:$[z],enumerable:!0})},i2=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of s2($))if(!m2.call(j,Q)&&Q!==z)b0(j,Q,{get:()=>$[Q],enumerable:!(W=_2($,Q))||W.enumerable})}return j},a2=(j)=>i2(b0({},"__esModule",{value:!0}),j),C8={};p2(C8,{AdaptiveRetryStrategy:()=>j7,ConfiguredRetryStrategy:()=>$7,DEFAULT_MAX_ATTEMPTS:()=>$1,DEFAULT_RETRY_DELAY_BASE:()=>i,DEFAULT_RETRY_MODE:()=>n2,DefaultRateLimiter:()=>I8,INITIAL_RETRY_TOKENS:()=>z1,INVOCATION_ID_HEADER:()=>o2,MAXIMUM_RETRY_DELAY:()=>Q1,NO_RETRY_INCREMENT:()=>k8,REQUEST_HEADER:()=>t2,RETRY_COST:()=>R8,RETRY_MODES:()=>T8,StandardRetryStrategy:()=>W1,THROTTLING_RETRY_DELAY_BASE:()=>v8,TIMEOUT_RETRY_COST:()=>S8});P8.exports=a2(C8);var T8=((j)=>{return j.STANDARD="standard",j.ADAPTIVE="adaptive",j})(T8||{}),$1=3,n2="standard",r2=j1(),I8=class j{constructor($){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=$?.beta??0.7,this.minCapacity=$?.minCapacity??1,this.minFillRate=$?.minFillRate??0.5,this.scaleConstant=$?.scaleConstant??0.4,this.smooth=$?.smooth??0.8;let z=this.getCurrentTimeInSeconds();this.lastThrottleTime=z,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}static{I(this,"DefaultRateLimiter")}static{this.setTimeoutFn=setTimeout}getCurrentTimeInSeconds(){return Date.now()/1000}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket($){if(!this.enabled)return;if(this.refillTokenBucket(),$>this.currentCapacity){let z=($-this.currentCapacity)/this.fillRate*1000;await new Promise((W)=>j.setTimeoutFn(W,z))}this.currentCapacity=this.currentCapacity-$}refillTokenBucket(){let $=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=$;return}let z=($-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+z),this.lastTimestamp=$}updateClientSendingRate($){let z;if(this.updateMeasuredRate(),r2.isThrottlingError($)){let Q=!this.enabled?this.measuredTxRate:Math.min(this.measuredTxRate,this.fillRate);this.lastMaxRate=Q,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),z=this.cubicThrottle(Q),this.enableTokenBucket()}else this.calculateTimeWindow(),z=this.cubicSuccess(this.getCurrentTimeInSeconds());let W=Math.min(z,2*this.measuredTxRate);this.updateTokenBucketRate(W)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,0.3333333333333333))}cubicThrottle($){return this.getPrecise($*this.beta)}cubicSuccess($){return this.getPrecise(this.scaleConstant*Math.pow($-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate($){this.refillTokenBucket(),this.fillRate=Math.max($,this.minFillRate),this.maxCapacity=Math.max($,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let $=this.getCurrentTimeInSeconds(),z=Math.floor($*2)/2;if(this.requestCount++,z>this.lastTxRateBucket){let W=this.requestCount/(z-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(W*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=z}}getPrecise($){return parseFloat($.toFixed(8))}},i=100,Q1=20000,v8=500,z1=500,R8=5,S8=10,k8=1,o2="amz-sdk-invocation-id",t2="amz-sdk-request",e2=I(()=>{let j=i;return{computeNextBackoffDelay:I((W)=>{return Math.floor(Math.min(Q1,Math.random()*2**W*j))},"computeNextBackoffDelay"),setDelayBase:I((W)=>{j=W},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),N8=I(({retryDelay:j,retryCount:$,retryCost:z})=>{return{getRetryCount:I(()=>$,"getRetryCount"),getRetryDelay:I(()=>Math.min(Q1,j),"getRetryDelay"),getRetryCost:I(()=>z,"getRetryCost")}},"createDefaultRetryToken"),W1=class{constructor(j){this.maxAttempts=j,this.mode="standard",this.capacity=z1,this.retryBackoffStrategy=e2(),this.maxAttemptsProvider=typeof j==="function"?j:async()=>j}static{I(this,"StandardRetryStrategy")}async acquireInitialRetryToken(j){return N8({retryDelay:i,retryCount:0})}async refreshRetryTokenForRetry(j,$){let z=await this.getMaxAttempts();if(this.shouldRetry(j,$,z)){let W=$.errorType;this.retryBackoffStrategy.setDelayBase(W==="THROTTLING"?v8:i);let Q=this.retryBackoffStrategy.computeNextBackoffDelay(j.getRetryCount()),Z=$.retryAfterHint?Math.max($.retryAfterHint.getTime()-Date.now()||0,Q):Q,X=this.getCapacityCost(W);return this.capacity-=X,N8({retryDelay:Z,retryCount:j.getRetryCount()+1,retryCost:X})}throw new Error("No retry token available")}recordSuccess(j){this.capacity=Math.max(z1,this.capacity+(j.getRetryCost()??k8))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(j){return console.warn(`Max attempts provider could not resolve. Using default of ${$1}`),$1}}shouldRetry(j,$,z){return j.getRetryCount()+1<z&&this.capacity>=this.getCapacityCost($.errorType)&&this.isRetryableError($.errorType)}getCapacityCost(j){return j==="TRANSIENT"?S8:R8}isRetryableError(j){return j==="THROTTLING"||j==="TRANSIENT"}},j7=class{constructor(j,$){this.maxAttemptsProvider=j,this.mode="adaptive";let{rateLimiter:z}=$??{};this.rateLimiter=z??new I8,this.standardRetryStrategy=new W1(j)}static{I(this,"AdaptiveRetryStrategy")}async acquireInitialRetryToken(j){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(j)}async refreshRetryTokenForRetry(j,$){return this.rateLimiter.updateClientSendingRate($),this.standardRetryStrategy.refreshRetryTokenForRetry(j,$)}recordSuccess(j){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(j)}},$7=class extends W1{static{I(this,"ConfiguredRetryStrategy")}constructor(j,$=i){super(typeof j==="function"?j:async()=>j);if(typeof $==="number")this.computeNextBackoffDelay=()=>$;else this.computeNextBackoffDelay=$}async refreshRetryTokenForRetry(j,$){let z=await super.refreshRetryTokenForRetry(j,$);return z.getRetryDelay=()=>this.computeNextBackoffDelay(z.getRetryCount()),z}}});var y8=q((x8)=>{Object.defineProperty(x8,"__esModule",{value:!0});x8.isStreamingPayload=void 0;var z7=F("stream"),Q7=(j)=>(j===null||j===void 0?void 0:j.body)instanceof z7.Readable||typeof ReadableStream!=="undefined"&&(j===null||j===void 0?void 0:j.body)instanceof ReadableStream;x8.isStreamingPayload=Q7});var C7=q((nz,o8)=>{var{defineProperty:F0,getOwnPropertyDescriptor:X7,getOwnPropertyNames:J7}=Object,K7=Object.prototype.hasOwnProperty,L=(j,$)=>F0(j,"name",{value:$,configurable:!0}),G7=(j,$)=>{for(var z in $)F0(j,z,{get:$[z],enumerable:!0})},Y7=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of J7($))if(!K7.call(j,Q)&&Q!==z)F0(j,Q,{get:()=>$[Q],enumerable:!(W=X7($,Q))||W.enumerable})}return j},B7=(j)=>Y7(F0({},"__esModule",{value:!0}),j),f8={};G7(f8,{AdaptiveRetryStrategy:()=>H7,CONFIG_MAX_ATTEMPTS:()=>X1,CONFIG_RETRY_MODE:()=>m8,ENV_MAX_ATTEMPTS:()=>Z1,ENV_RETRY_MODE:()=>s8,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>w7,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>L7,StandardRetryStrategy:()=>_8,defaultDelayDecider:()=>c8,defaultRetryDecider:()=>d8,getOmitRetryHeadersPlugin:()=>M7,getRetryAfterHint:()=>r8,getRetryPlugin:()=>N7,omitRetryHeadersMiddleware:()=>p8,omitRetryHeadersMiddlewareOptions:()=>i8,resolveRetryConfig:()=>U7,retryMiddleware:()=>a8,retryMiddlewareOptions:()=>n8});o8.exports=B7(f8);var c=l(),u8=Z7(),U=A8(),q7=L((j,$)=>{let z=j,W=$?.noRetryIncrement??U.NO_RETRY_INCREMENT,Q=$?.retryCost??U.RETRY_COST,Z=$?.timeoutRetryCost??U.TIMEOUT_RETRY_COST,X=j,J=L((Y)=>Y.name==="TimeoutError"?Z:Q,"getCapacityAmount"),K=L((Y)=>J(Y)<=X,"hasRetryTokens");return Object.freeze({hasRetryTokens:K,retrieveRetryTokens:L((Y)=>{if(!K(Y))throw new Error("No retry token available");let B=J(Y);return X-=B,B},"retrieveRetryTokens"),releaseRetryTokens:L((Y)=>{X+=Y??W,X=Math.min(X,z)},"releaseRetryTokens")})},"getDefaultRetryQuota"),c8=L((j,$)=>Math.floor(Math.min(U.MAXIMUM_RETRY_DELAY,Math.random()*2**$*j)),"defaultDelayDecider"),x=j1(),d8=L((j)=>{if(!j)return!1;return x.isRetryableByTrait(j)||x.isClockSkewError(j)||x.isThrottlingError(j)||x.isTransientError(j)},"defaultRetryDecider"),l8=L((j)=>{if(j instanceof Error)return j;if(j instanceof Object)return Object.assign(new Error,j);if(typeof j==="string")return new Error(j);return new Error(`AWS SDK error wrapper for ${j}`)},"asSdkError"),_8=class{constructor(j,$){this.maxAttemptsProvider=j,this.mode=U.RETRY_MODES.STANDARD,this.retryDecider=$?.retryDecider??d8,this.delayDecider=$?.delayDecider??c8,this.retryQuota=$?.retryQuota??q7(U.INITIAL_RETRY_TOKENS)}static{L(this,"StandardRetryStrategy")}shouldRetry(j,$,z){return $<z&&this.retryDecider(j)&&this.retryQuota.hasRetryTokens(j)}async getMaxAttempts(){let j;try{j=await this.maxAttemptsProvider()}catch($){j=U.DEFAULT_MAX_ATTEMPTS}return j}async retry(j,$,z){let W,Q=0,Z=0,X=await this.getMaxAttempts(),{request:J}=$;if(c.HttpRequest.isInstance(J))J.headers[U.INVOCATION_ID_HEADER]=u8.v4();while(!0)try{if(c.HttpRequest.isInstance(J))J.headers[U.REQUEST_HEADER]=`attempt=${Q+1}; max=${X}`;if(z?.beforeRequest)await z.beforeRequest();let{response:K,output:G}=await j($);if(z?.afterRequest)z.afterRequest(K);return this.retryQuota.releaseRetryTokens(W),G.$metadata.attempts=Q+1,G.$metadata.totalRetryDelay=Z,{response:K,output:G}}catch(K){let G=l8(K);if(Q++,this.shouldRetry(G,Q,X)){W=this.retryQuota.retrieveRetryTokens(G);let V=this.delayDecider(x.isThrottlingError(G)?U.THROTTLING_RETRY_DELAY_BASE:U.DEFAULT_RETRY_DELAY_BASE,Q),Y=V7(G.$response),B=Math.max(Y||0,V);Z+=B,await new Promise((b)=>setTimeout(b,B));continue}if(!G.$metadata)G.$metadata={};throw G.$metadata.attempts=Q,G.$metadata.totalRetryDelay=Z,G}}},V7=L((j)=>{if(!c.HttpResponse.isInstance(j))return;let $=Object.keys(j.headers).find((Z)=>Z.toLowerCase()==="retry-after");if(!$)return;let z=j.headers[$],W=Number(z);if(!Number.isNaN(W))return W*1000;return new Date(z).getTime()-Date.now()},"getDelayFromRetryAfterHeader"),H7=class extends _8{static{L(this,"AdaptiveRetryStrategy")}constructor(j,$){let{rateLimiter:z,...W}=$??{};super(j,W);this.rateLimiter=z??new U.DefaultRateLimiter,this.mode=U.RETRY_MODES.ADAPTIVE}async retry(j,$){return super.retry(j,$,{beforeRequest:async()=>{return this.rateLimiter.getSendToken()},afterRequest:(z)=>{this.rateLimiter.updateClientSendingRate(z)}})}},g8=f0(),Z1="AWS_MAX_ATTEMPTS",X1="max_attempts",w7={environmentVariableSelector:(j)=>{let $=j[Z1];if(!$)return;let z=parseInt($);if(Number.isNaN(z))throw new Error(`Environment variable ${Z1} mast be a number, got "${$}"`);return z},configFileSelector:(j)=>{let $=j[X1];if(!$)return;let z=parseInt($);if(Number.isNaN(z))throw new Error(`Shared config file entry ${X1} mast be a number, got "${$}"`);return z},default:U.DEFAULT_MAX_ATTEMPTS},U7=L((j)=>{let{retryStrategy:$,retryMode:z,maxAttempts:W}=j,Q=g8.normalizeProvider(W??U.DEFAULT_MAX_ATTEMPTS);return Object.assign(j,{maxAttempts:Q,retryStrategy:async()=>{if($)return $;if(await g8.normalizeProvider(z)()===U.RETRY_MODES.ADAPTIVE)return new U.AdaptiveRetryStrategy(Q);return new U.StandardRetryStrategy(Q)}})},"resolveRetryConfig"),s8="AWS_RETRY_MODE",m8="retry_mode",L7={environmentVariableSelector:(j)=>j[s8],configFileSelector:(j)=>j[m8],default:U.DEFAULT_RETRY_MODE},p8=L(()=>(j)=>async($)=>{let{request:z}=$;if(c.HttpRequest.isInstance(z))delete z.headers[U.INVOCATION_ID_HEADER],delete z.headers[U.REQUEST_HEADER];return j($)},"omitRetryHeadersMiddleware"),i8={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},M7=L((j)=>({applyToStack:($)=>{$.addRelativeTo(p8(),i8)}}),"getOmitRetryHeadersPlugin"),b7=W7(),F7=y8(),a8=L((j)=>($,z)=>async(W)=>{let Q=await j.retryStrategy(),Z=await j.maxAttempts();if(D7(Q)){Q=Q;let X=await Q.acquireInitialRetryToken(z.partition_id),J=new Error,K=0,G=0,{request:V}=W,Y=c.HttpRequest.isInstance(V);if(Y)V.headers[U.INVOCATION_ID_HEADER]=u8.v4();while(!0)try{if(Y)V.headers[U.REQUEST_HEADER]=`attempt=${K+1}; max=${Z}`;let{response:B,output:b}=await $(W);return Q.recordSuccess(X),b.$metadata.attempts=K+1,b.$metadata.totalRetryDelay=G,{response:B,output:b}}catch(B){let b=h7(B);if(J=l8(B),Y&&F7.isStreamingPayload(V))throw(z.logger instanceof b7.NoOpLogger?console:z.logger)?.warn("An error was encountered in a non-retryable streaming request."),J;try{X=await Q.refreshRetryTokenForRetry(X,b)}catch(N){if(!J.$metadata)J.$metadata={};throw J.$metadata.attempts=K+1,J.$metadata.totalRetryDelay=G,J}K=X.getRetryCount();let D=X.getRetryDelay();G+=D,await new Promise((N)=>setTimeout(N,D))}}else{if(Q=Q,Q?.mode)z.userAgent=[...z.userAgent||[],["cfg/retry-mode",Q.mode]];return Q.retry($,W)}},"retryMiddleware"),D7=L((j)=>typeof j.acquireInitialRetryToken!=="undefined"&&typeof j.refreshRetryTokenForRetry!=="undefined"&&typeof j.recordSuccess!=="undefined","isRetryStrategyV2"),h7=L((j)=>{let $={error:j,errorType:O7(j)},z=r8(j.$response);if(z)$.retryAfterHint=z;return $},"getRetryErrorInfo"),O7=L((j)=>{if(x.isThrottlingError(j))return"THROTTLING";if(x.isTransientError(j))return"TRANSIENT";if(x.isServerError(j))return"SERVER_ERROR";return"CLIENT_ERROR"},"getRetryErrorType"),n8={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},N7=L((j)=>({applyToStack:($)=>{$.add(a8(j),n8)}}),"getRetryPlugin"),r8=L((j)=>{if(!c.HttpResponse.isInstance(j))return;let $=Object.keys(j.headers).find((Z)=>Z.toLowerCase()==="retry-after");if(!$)return;let z=j.headers[$],W=Number(z);if(!Number.isNaN(W))return new Date(W*1000);return new Date(z)},"getRetryAfterHint")});var g7=q((tz,Qj)=>{var{defineProperty:D0,getOwnPropertyDescriptor:T7,getOwnPropertyNames:I7}=Object,v7=Object.prototype.hasOwnProperty,R=(j,$)=>D0(j,"name",{value:$,configurable:!0}),R7=(j,$)=>{for(var z in $)D0(j,z,{get:$[z],enumerable:!0})},S7=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of I7($))if(!v7.call(j,Q)&&Q!==z)D0(j,Q,{get:()=>$[Q],enumerable:!(W=T7($,Q))||W.enumerable})}return j},k7=(j)=>S7(D0({},"__esModule",{value:!0}),j),e8={};R7(e8,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>E7,NODE_REGION_CONFIG_OPTIONS:()=>x7,REGION_ENV_NAME:()=>jj,REGION_INI_NAME:()=>$j,getAwsRegionExtensionConfiguration:()=>P7,resolveAwsRegionExtensionConfiguration:()=>A7,resolveRegionConfig:()=>y7});Qj.exports=k7(e8);var P7=R((j)=>{return{setRegion($){j.region=$},region(){return j.region}}},"getAwsRegionExtensionConfiguration"),A7=R((j)=>{return{region:j.region()}},"resolveAwsRegionExtensionConfiguration"),jj="AWS_REGION",$j="region",x7={environmentVariableSelector:R((j)=>j[jj],"environmentVariableSelector"),configFileSelector:R((j)=>j[$j],"configFileSelector"),default:R(()=>{throw new Error("Region is missing")},"default")},E7={preferredFile:"credentials"},zj=R((j)=>typeof j==="string"&&(j.startsWith("fips-")||j.endsWith("-fips")),"isFipsRegion"),t8=R((j)=>zj(j)?["fips-aws-global","aws-fips"].includes(j)?"us-east-1":j.replace(/fips-(dkr-|prod-)?|-fips/,""):j,"getRealRegion"),y7=R((j)=>{let{region:$,useFipsEndpoint:z}=j;if(!$)throw new Error("Region is missing");return Object.assign(j,{region:R(async()=>{if(typeof $==="string")return t8($);let W=await $();return t8(W)},"region"),useFipsEndpoint:R(async()=>{let W=typeof $==="string"?$:await $();if(zj(W))return!0;return typeof z!=="function"?Promise.resolve(!!z):z()},"useFipsEndpoint")})},"resolveRegionConfig")});var u7=q((ez,f7)=>{f7.exports={name:"@aws-sdk/nested-clients",version:"3.828.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.826.0","@aws-sdk/middleware-host-header":"3.821.0","@aws-sdk/middleware-logger":"3.821.0","@aws-sdk/middleware-recursion-detection":"3.821.0","@aws-sdk/middleware-user-agent":"3.828.0","@aws-sdk/region-config-resolver":"3.821.0","@aws-sdk/types":"3.821.0","@aws-sdk/util-endpoints":"3.828.0","@aws-sdk/util-user-agent-browser":"3.821.0","@aws-sdk/util-user-agent-node":"3.828.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.5.3","@smithy/fetch-http-handler":"^5.0.4","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.11","@smithy/middleware-retry":"^4.1.12","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.0.6","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.3","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.19","@smithy/util-defaults-mode-node":"^4.0.19","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.5","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var o7=q((jQ,Yj)=>{var{defineProperty:O0,getOwnPropertyDescriptor:c7,getOwnPropertyNames:d7}=Object,l7=Object.prototype.hasOwnProperty,h0=(j,$)=>O0(j,"name",{value:$,configurable:!0}),_7=(j,$)=>{for(var z in $)O0(j,z,{get:$[z],enumerable:!0})},s7=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of d7($))if(!l7.call(j,Q)&&Q!==z)O0(j,Q,{get:()=>$[Q],enumerable:!(W=c7($,Q))||W.enumerable})}return j},m7=(j)=>s7(O0({},"__esModule",{value:!0}),j),Zj={};_7(Zj,{NODE_APP_ID_CONFIG_OPTIONS:()=>r7,UA_APP_ID_ENV_NAME:()=>Kj,UA_APP_ID_INI_NAME:()=>Gj,createDefaultUserAgentProvider:()=>Jj,crtAvailability:()=>Xj,defaultUserAgent:()=>i7});Yj.exports=m7(Zj);var Wj=F("os"),J1=F("process"),Xj={isCrtAvailable:!1},p7=h0(()=>{if(Xj.isCrtAvailable)return["md/crt-avail"];return null},"isCrtAvailable"),Jj=h0(({serviceId:j,clientVersion:$})=>{return async(z)=>{let W=[["aws-sdk-js",$],["ua","2.1"],[`os/${Wj.platform()}`,Wj.release()],["lang/js"],["md/nodejs",`${J1.versions.node}`]],Q=p7();if(Q)W.push(Q);if(j)W.push([`api/${j}`,$]);if(J1.env.AWS_EXECUTION_ENV)W.push([`exec-env/${J1.env.AWS_EXECUTION_ENV}`]);let Z=await z?.userAgentAppId?.();return Z?[...W,[`app/${Z}`]]:[...W]}},"createDefaultUserAgentProvider"),i7=Jj,a7=B4(),Kj="AWS_SDK_UA_APP_ID",Gj="sdk_ua_app_id",n7="sdk-ua-app-id",r7={environmentVariableSelector:h0((j)=>j[Kj],"environmentVariableSelector"),configFileSelector:h0((j)=>j[Gj]??j[n7],"configFileSelector"),default:a7.DEFAULT_UA_APP_ID}});var G9=q(($Q,Hj)=>{var{defineProperty:N0,getOwnPropertyDescriptor:j9,getOwnPropertyNames:$9}=Object,z9=Object.prototype.hasOwnProperty,qj=(j,$)=>N0(j,"name",{value:$,configurable:!0}),Q9=(j,$)=>{for(var z in $)N0(j,z,{get:$[z],enumerable:!0})},W9=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of $9($))if(!z9.call(j,Q)&&Q!==z)N0(j,Q,{get:()=>$[Q],enumerable:!(W=j9($,Q))||W.enumerable})}return j},Z9=(j)=>W9(N0({},"__esModule",{value:!0}),j),Vj={};Q9(Vj,{Hash:()=>K9});Hj.exports=Z9(Vj);var K1=t7(),X9=e7(),J9=F("buffer"),Bj=F("crypto"),K9=class{static{qj(this,"Hash")}constructor(j,$){this.algorithmIdentifier=j,this.secret=$,this.reset()}update(j,$){this.hash.update(X9.toUint8Array(G1(j,$)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?Bj.createHmac(this.algorithmIdentifier,G1(this.secret)):Bj.createHash(this.algorithmIdentifier)}};function G1(j,$){if(J9.Buffer.isBuffer(j))return j;if(typeof j==="string")return K1.fromString(j,$);if(ArrayBuffer.isView(j))return K1.fromArrayBuffer(j.buffer,j.byteOffset,j.byteLength);return K1.fromArrayBuffer(j)}qj(G1,"castSourceData")});var M9=q((QQ,Lj)=>{var{defineProperty:C0,getOwnPropertyDescriptor:Y9,getOwnPropertyNames:B9}=Object,q9=Object.prototype.hasOwnProperty,V9=(j,$)=>C0(j,"name",{value:$,configurable:!0}),H9=(j,$)=>{for(var z in $)C0(j,z,{get:$[z],enumerable:!0})},w9=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of B9($))if(!q9.call(j,Q)&&Q!==z)C0(j,Q,{get:()=>$[Q],enumerable:!(W=Y9($,Q))||W.enumerable})}return j},U9=(j)=>w9(C0({},"__esModule",{value:!0}),j),Uj={};H9(Uj,{calculateBodyLength:()=>L9});Lj.exports=U9(Uj);var wj=F("fs"),L9=V9((j)=>{if(!j)return 0;if(typeof j==="string")return Buffer.byteLength(j);else if(typeof j.byteLength==="number")return j.byteLength;else if(typeof j.size==="number")return j.size;else if(typeof j.start==="number"&&typeof j.end==="number")return j.end+1-j.start;else if(typeof j.path==="string"||Buffer.isBuffer(j.path))return wj.lstatSync(j.path).size;else if(typeof j.fd==="number")return wj.fstatSync(j.fd).size;throw new Error(`Body Length computation failed for ${j}`)},"calculateBodyLength")});var kj=q((WQ,Sj)=>{var{defineProperty:v0,getOwnPropertyDescriptor:b9,getOwnPropertyNames:F9}=Object,D9=Object.prototype.hasOwnProperty,M=(j,$)=>v0(j,"name",{value:$,configurable:!0}),h9=(j,$)=>{for(var z in $)v0(j,z,{get:$[z],enumerable:!0})},O9=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of F9($))if(!D9.call(j,Q)&&Q!==z)v0(j,Q,{get:()=>$[Q],enumerable:!(W=b9($,Q))||W.enumerable})}return j},N9=(j)=>O9(v0({},"__esModule",{value:!0}),j),Dj={};h9(Dj,{DEFAULT_MAX_RETRIES:()=>Cj,DEFAULT_TIMEOUT:()=>Nj,ENV_CMDS_AUTH_TOKEN:()=>q1,ENV_CMDS_FULL_URI:()=>T0,ENV_CMDS_RELATIVE_URI:()=>I0,Endpoint:()=>Tj,fromContainerMetadata:()=>v9,fromInstanceMetadata:()=>n9,getInstanceMetadataEndpoint:()=>vj,httpRequest:()=>d,providerConfigFromInit:()=>V1});Sj.exports=N9(Dj);var C9=F("url"),S=a0(),T9=F("buffer"),I9=F("http");function d(j){return new Promise(($,z)=>{let W=I9.request({method:"GET",...j,hostname:j.hostname?.replace(/^\[(.+)\]$/,"$1")});W.on("error",(Q)=>{z(Object.assign(new S.ProviderError("Unable to connect to instance metadata service"),Q)),W.destroy()}),W.on("timeout",()=>{z(new S.ProviderError("TimeoutError from instance metadata service")),W.destroy()}),W.on("response",(Q)=>{let{statusCode:Z=400}=Q;if(Z<200||300<=Z)z(Object.assign(new S.ProviderError("Error response received from instance metadata service"),{statusCode:Z})),W.destroy();let X=[];Q.on("data",(J)=>{X.push(J)}),Q.on("end",()=>{$(T9.Buffer.concat(X)),W.destroy()})}),W.end()})}M(d,"httpRequest");var hj=M((j)=>Boolean(j)&&typeof j==="object"&&typeof j.AccessKeyId==="string"&&typeof j.SecretAccessKey==="string"&&typeof j.Token==="string"&&typeof j.Expiration==="string","isImdsCredentials"),Oj=M((j)=>({accessKeyId:j.AccessKeyId,secretAccessKey:j.SecretAccessKey,sessionToken:j.Token,expiration:new Date(j.Expiration),...j.AccountId&&{accountId:j.AccountId}}),"fromImdsCredentials"),Nj=1000,Cj=0,V1=M(({maxRetries:j=Cj,timeout:$=Nj})=>({maxRetries:j,timeout:$}),"providerConfigFromInit"),B1=M((j,$)=>{let z=j();for(let W=0;W<$;W++)z=z.catch(j);return z},"retry"),T0="AWS_CONTAINER_CREDENTIALS_FULL_URI",I0="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",q1="AWS_CONTAINER_AUTHORIZATION_TOKEN",v9=M((j={})=>{let{timeout:$,maxRetries:z}=V1(j);return()=>B1(async()=>{let W=await A9({logger:j.logger}),Q=JSON.parse(await R9($,W));if(!hj(Q))throw new S.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:j.logger});return Oj(Q)},z)},"fromContainerMetadata"),R9=M(async(j,$)=>{if(process.env[q1])$.headers={...$.headers,Authorization:process.env[q1]};return(await d({...$,timeout:j})).toString()},"requestFromEcsImds"),S9="169.254.170.2",k9={localhost:!0,"127.0.0.1":!0},P9={"http:":!0,"https:":!0},A9=M(async({logger:j})=>{if(process.env[I0])return{hostname:S9,path:process.env[I0]};if(process.env[T0]){let $=C9.parse(process.env[T0]);if(!$.hostname||!($.hostname in k9))throw new S.CredentialsProviderError(`${$.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:j});if(!$.protocol||!($.protocol in P9))throw new S.CredentialsProviderError(`${$.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:j});return{...$,port:$.port?parseInt($.port,10):void 0}}throw new S.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${I0} or ${T0} environment variable is set`,{tryNextLink:!1,logger:j})},"getCmdsUri"),x9=class j extends S.CredentialsProviderError{constructor($,z=!0){super($,z);this.tryNextLink=z,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,j.prototype)}static{M(this,"InstanceMetadataV1FallbackError")}},H1=V0(),E9=o0(),Tj=((j)=>{return j.IPv4="http://169.254.169.254",j.IPv6="http://[fd00:ec2::254]",j})(Tj||{}),y9="AWS_EC2_METADATA_SERVICE_ENDPOINT",g9="ec2_metadata_service_endpoint",f9={environmentVariableSelector:(j)=>j[y9],configFileSelector:(j)=>j[g9],default:void 0},Ij=((j)=>{return j.IPv4="IPv4",j.IPv6="IPv6",j})(Ij||{}),u9="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",c9="ec2_metadata_service_endpoint_mode",d9={environmentVariableSelector:(j)=>j[u9],configFileSelector:(j)=>j[c9],default:"IPv4"},vj=M(async()=>E9.parseUrl(await l9()||await _9()),"getInstanceMetadataEndpoint"),l9=M(async()=>H1.loadConfig(f9)(),"getFromEndpointConfig"),_9=M(async()=>{let j=await H1.loadConfig(d9)();switch(j){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${j}. Select from ${Object.values(Ij)}`)}},"getFromEndpointModeConfig"),s9=300,m9=300,p9="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Mj=M((j,$)=>{let z=s9+Math.floor(Math.random()*m9),W=new Date(Date.now()+z*1000);$.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(W)}.
For more information, please visit: `+p9);let Q=j.originalExpiration??j.expiration;return{...j,...Q?{originalExpiration:Q}:{},expiration:W}},"getExtendedInstanceMetadataCredentials"),i9=M((j,$={})=>{let z=$?.logger||console,W;return async()=>{let Q;try{if(Q=await j(),Q.expiration&&Q.expiration.getTime()<Date.now())Q=Mj(Q,z)}catch(Z){if(W)z.warn("Credential renew failed: ",Z),Q=Mj(W,z);else throw Z}return W=Q,Q}},"staticStabilityProvider"),Rj="/latest/meta-data/iam/security-credentials/",a9="/latest/api/token",Y1="AWS_EC2_METADATA_V1_DISABLED",bj="ec2_metadata_v1_disabled",Fj="x-aws-ec2-metadata-token",n9=M((j={})=>i9(r9(j),{logger:j.logger}),"fromInstanceMetadata"),r9=M((j={})=>{let $=!1,{logger:z,profile:W}=j,{timeout:Q,maxRetries:Z}=V1(j),X=M(async(J,K)=>{if($||K.headers?.[Fj]==null){let Y=!1,B=!1,b=await H1.loadConfig({environmentVariableSelector:(D)=>{let N=D[Y1];if(B=!!N&&N!=="false",N===void 0)throw new S.CredentialsProviderError(`${Y1} not set in env, checking config file next.`,{logger:j.logger});return B},configFileSelector:(D)=>{let N=D[bj];return Y=!!N&&N!=="false",Y},default:!1},{profile:W})();if(j.ec2MetadataV1Disabled||b){let D=[];if(j.ec2MetadataV1Disabled)D.push("credential provider initialization (runtime option ec2MetadataV1Disabled)");if(Y)D.push(`config file profile (${bj})`);if(B)D.push(`process environment variable (${Y1})`);throw new x9(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${D.join(", ")}].`)}}let V=(await B1(async()=>{let Y;try{Y=await t9(K)}catch(B){if(B.statusCode===401)$=!1;throw B}return Y},J)).trim();return B1(async()=>{let Y;try{Y=await e9(V,K,j)}catch(B){if(B.statusCode===401)$=!1;throw B}return Y},J)},"getCredentials");return async()=>{let J=await vj();if($)return z?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),X(Z,{...J,timeout:Q});else{let K;try{K=(await o9({...J,timeout:Q})).toString()}catch(G){if(G?.statusCode===400)throw Object.assign(G,{message:"EC2 Metadata token request returned error"});else if(G.message==="TimeoutError"||[403,404,405].includes(G.statusCode))$=!0;return z?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),X(Z,{...J,timeout:Q})}return X(Z,{...J,headers:{[Fj]:K},timeout:Q})}}},"getInstanceMetadataProvider"),o9=M(async(j)=>d({...j,path:a9,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),t9=M(async(j)=>(await d({...j,path:Rj})).toString(),"getProfile"),e9=M(async(j,$,z)=>{let W=JSON.parse((await d({...$,path:Rj+j})).toString());if(!hj(W))throw new S.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:z.logger});return Oj(W)},"getCredentialsFromProfile")});var Fz=q((ZQ,gj)=>{var{create:jz,defineProperty:a,getOwnPropertyDescriptor:$z,getOwnPropertyNames:zz,getPrototypeOf:Qz}=Object,Wz=Object.prototype.hasOwnProperty,w1=(j,$)=>a(j,"name",{value:$,configurable:!0}),Zz=(j,$)=>{for(var z in $)a(j,z,{get:$[z],enumerable:!0})},Ej=(j,$,z,W)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of zz($))if(!Wz.call(j,Q)&&Q!==z)a(j,Q,{get:()=>$[Q],enumerable:!(W=$z($,Q))||W.enumerable})}return j},Xz=(j,$,z)=>(z=j!=null?jz(Qz(j)):{},Ej($||!j||!j.__esModule?a(z,"default",{value:j,enumerable:!0}):z,j)),Jz=(j)=>Ej(a({},"__esModule",{value:!0}),j),yj={};Zz(yj,{resolveDefaultsModeConfig:()=>Lz});gj.exports=Jz(yj);var Kz=v4(),Pj=V0(),Gz=a0(),Yz="AWS_EXECUTION_ENV",Aj="AWS_REGION",xj="AWS_DEFAULT_REGION",Bz="AWS_EC2_METADATA_DISABLED",qz=["in-region","cross-region","mobile","standard","legacy"],Vz="/latest/meta-data/placement/region",Hz="AWS_DEFAULTS_MODE",wz="defaults_mode",Uz={environmentVariableSelector:(j)=>{return j[Hz]},configFileSelector:(j)=>{return j[wz]},default:"legacy"},Lz=w1(({region:j=Pj.loadConfig(Kz.NODE_REGION_CONFIG_OPTIONS),defaultsMode:$=Pj.loadConfig(Uz)}={})=>Gz.memoize(async()=>{let z=typeof $==="function"?await $():$;switch(z?.toLowerCase()){case"auto":return Mz(j);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(z?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${qz.join(", ")}, got ${z}`)}}),"resolveDefaultsModeConfig"),Mz=w1(async(j)=>{if(j){let $=typeof j==="function"?await j():j,z=await bz();if(!z)return"standard";if($===z)return"in-region";else return"cross-region"}return"standard"},"resolveNodeDefaultsModeAuto"),bz=w1(async()=>{if(process.env[Yz]&&(process.env[Aj]||process.env[xj]))return process.env[Aj]??process.env[xj];if(!process.env[Bz])try{let{getInstanceMetadataEndpoint:j,httpRequest:$}=await Promise.resolve().then(()=>Xz(kj())),z=await j();return(await $({...z,path:Vz})).toString()}catch(j){}},"inferPhysicalRegion")});
export{nj as Vb,Q5 as Wb,H5 as Xb,c1 as Yb,o1 as Zb,B4 as _b,v4 as $b,a6 as ac,V0 as bc,o0 as cc,I2 as dc,A8 as ec,C7 as fc,u7 as gc,o7 as hc,G9 as ic,M9 as jc,Fz as kc,g7 as lc};
