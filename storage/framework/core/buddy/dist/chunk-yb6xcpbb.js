import{Bd as a0,Cd as Xz,Dd as o6,Ed as Jz,yd as J7,zd as $1}from"./chunk-gs1ffr9z.js";import{Fd as f0,Gd as l,Id as j9,Jd as $9}from"./chunk-pp53149a.js";import{_d as S4}from"./chunk-p9k8vjq3.js";import{me as q,pe as F}from"./chunk-9ph3hk3r.js";var nj=q((NQ,D4)=>{var{defineProperty:r,getOwnPropertyDescriptor:dj,getOwnPropertyNames:lj}=Object,_j=Object.prototype.hasOwnProperty,n=(j,$)=>r(j,"name",{value:$,configurable:!0}),sj=(j,$)=>{for(var z in $)r(j,z,{get:$[z],enumerable:!0})},mj=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of lj($))if(!_j.call(j,Q)&&Q!==z)r(j,Q,{get:()=>$[Q],enumerable:!(Z=dj($,Q))||Z.enumerable})}return j},pj=(j)=>mj(r({},"__esModule",{value:!0}),j),L4={};sj(L4,{getHostHeaderPlugin:()=>aj,hostHeaderMiddleware:()=>b4,hostHeaderMiddlewareOptions:()=>F4,resolveHostHeaderConfig:()=>M4});D4.exports=pj(L4);var ij=l();function M4(j){return j}n(M4,"resolveHostHeaderConfig");var b4=n((j)=>($)=>async(z)=>{if(!ij.HttpRequest.isInstance(z.request))return $(z);let{request:Z}=z,{handlerProtocol:Q=""}=j.requestHandler.metadata||{};if(Q.indexOf("h2")>=0&&!Z.headers[":authority"])delete Z.headers.host,Z.headers[":authority"]=Z.hostname+(Z.port?":"+Z.port:"");else if(!Z.headers.host){let W=Z.hostname;if(Z.port!=null)W+=`:${Z.port}`;Z.headers.host=W}return $(z)},"hostHeaderMiddleware"),F4={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},aj=n((j)=>({applyToStack:n(($)=>{$.add(b4(j),F4)},"applyToStack")}),"getHostHeaderPlugin")});var Q6=q((OQ,C4)=>{var{defineProperty:o,getOwnPropertyDescriptor:rj,getOwnPropertyNames:oj}=Object,tj=Object.prototype.hasOwnProperty,R0=(j,$)=>o(j,"name",{value:$,configurable:!0}),ej=(j,$)=>{for(var z in $)o(j,z,{get:$[z],enumerable:!0})},j6=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of oj($))if(!tj.call(j,Q)&&Q!==z)o(j,Q,{get:()=>$[Q],enumerable:!(Z=rj($,Q))||Z.enumerable})}return j},$6=(j)=>j6(o({},"__esModule",{value:!0}),j),h4={};ej(h4,{getLoggerPlugin:()=>z6,loggerMiddleware:()=>N4,loggerMiddlewareOptions:()=>O4});C4.exports=$6(h4);var N4=R0(()=>(j,$)=>async(z)=>{try{let Z=await j(z),{clientName:Q,commandName:W,logger:X,dynamoDbDocumentClientOptions:J={}}=$,{overrideInputFilterSensitiveLog:K,overrideOutputFilterSensitiveLog:G}=J,V=K??$.inputFilterSensitiveLog,Y=G??$.outputFilterSensitiveLog,{$metadata:B,...b}=Z.output;return X?.info?.({clientName:Q,commandName:W,input:V(z.input),output:Y(b),metadata:B}),Z}catch(Z){let{clientName:Q,commandName:W,logger:X,dynamoDbDocumentClientOptions:J={}}=$,{overrideInputFilterSensitiveLog:K}=J,G=K??$.inputFilterSensitiveLog;throw X?.error?.({clientName:Q,commandName:W,input:G(z.input),error:Z,metadata:Z.$metadata}),Z}},"loggerMiddleware"),O4={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},z6=R0((j)=>({applyToStack:R0(($)=>{$.add(N4(),O4)},"applyToStack")}),"getLoggerPlugin")});var H6=q((CQ,R4)=>{var{defineProperty:e,getOwnPropertyDescriptor:Z6,getOwnPropertyNames:W6}=Object,X6=Object.prototype.hasOwnProperty,t=(j,$)=>e(j,"name",{value:$,configurable:!0}),J6=(j,$)=>{for(var z in $)e(j,z,{get:$[z],enumerable:!0})},K6=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of W6($))if(!X6.call(j,Q)&&Q!==z)e(j,Q,{get:()=>$[Q],enumerable:!(Z=Z6($,Q))||Z.enumerable})}return j},G6=(j)=>K6(e({},"__esModule",{value:!0}),j),I4={};J6(I4,{addRecursionDetectionMiddlewareOptions:()=>v4,getRecursionDetectionPlugin:()=>V6,recursionDetectionMiddleware:()=>T4});R4.exports=G6(I4);var Y6=l(),S0="X-Amzn-Trace-Id",B6="AWS_LAMBDA_FUNCTION_NAME",q6="_X_AMZN_TRACE_ID",T4=t((j)=>($)=>async(z)=>{let{request:Z}=z;if(!Y6.HttpRequest.isInstance(Z)||j.runtime!=="node")return $(z);let Q=Object.keys(Z.headers??{}).find((K)=>K.toLowerCase()===S0.toLowerCase())??S0;if(Z.headers.hasOwnProperty(Q))return $(z);let W=process.env[B6],X=process.env[q6],J=t((K)=>typeof K==="string"&&K.length>0,"nonEmptyString");if(J(W)&&J(X))Z.headers[S0]=X;return $({...z,request:Z})},"recursionDetectionMiddleware"),v4={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},V6=t((j)=>({applyToStack:t(($)=>{$.add(T4(j),v4)},"applyToStack")}),"getRecursionDetectionPlugin")});var c4=q((IQ,u4)=>{var{defineProperty:j0,getOwnPropertyDescriptor:w6,getOwnPropertyNames:U6}=Object,L6=Object.prototype.hasOwnProperty,H=(j,$)=>j0(j,"name",{value:$,configurable:!0}),M6=(j,$)=>{for(var z in $)j0(j,z,{get:$[z],enumerable:!0})},b6=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of U6($))if(!L6.call(j,Q)&&Q!==z)j0(j,Q,{get:()=>$[Q],enumerable:!(Z=w6($,Q))||Z.enumerable})}return j},F6=(j)=>b6(j0({},"__esModule",{value:!0}),j),k4={};M6(k4,{EndpointCache:()=>D6,EndpointError:()=>h,customEndpointFunctions:()=>P0,isIpAddress:()=>P4,isValidHostLabel:()=>x0,resolveEndpoint:()=>c6});u4.exports=F6(k4);var D6=class{constructor({size:j,params:$}){if(this.data=new Map,this.parameters=[],this.capacity=j??50,$)this.parameters=$}static{H(this,"EndpointCache")}get(j,$){let z=this.hash(j);if(z===!1)return $();if(!this.data.has(z)){if(this.data.size>this.capacity+10){let Z=this.data.keys(),Q=0;while(!0){let{value:W,done:X}=Z.next();if(this.data.delete(W),X||++Q>10)break}}this.data.set(z,$())}return this.data.get(z)}size(){return this.data.size}hash(j){let $="",{parameters:z}=this;if(z.length===0)return!1;for(let Z of z){let Q=String(j[Z]??"");if(Q.includes("|;"))return!1;$+=Q+"|;"}return $}},h6=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),P4=H((j)=>h6.test(j)||j.startsWith("[")&&j.endsWith("]"),"isIpAddress"),N6=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),x0=H((j,$=!1)=>{if(!$)return N6.test(j);let z=j.split(".");for(let Z of z)if(!x0(Z))return!1;return!0},"isValidHostLabel"),P0={},_="endpoints";function k(j){if(typeof j!=="object"||j==null)return j;if("ref"in j)return`$${k(j.ref)}`;if("fn"in j)return`${j.fn}(${(j.argv||[]).map(k).join(", ")})`;return JSON.stringify(j,null,2)}H(k,"toDebugString");var h=class extends Error{static{H(this,"EndpointError")}constructor(j){super(j);this.name="EndpointError"}},O6=H((j,$)=>j===$,"booleanEquals"),C6=H((j)=>{let $=j.split("."),z=[];for(let Z of $){let Q=Z.indexOf("[");if(Q!==-1){if(Z.indexOf("]")!==Z.length-1)throw new h(`Path: '${j}' does not end with ']'`);let W=Z.slice(Q+1,-1);if(Number.isNaN(parseInt(W)))throw new h(`Invalid array index: '${W}' in path: '${j}'`);if(Q!==0)z.push(Z.slice(0,Q));z.push(W)}else z.push(Z)}return z},"getAttrPathList"),A4=H((j,$)=>C6($).reduce((z,Z)=>{if(typeof z!=="object")throw new h(`Index '${Z}' in '${$}' not found in '${JSON.stringify(j)}'`);else if(Array.isArray(z))return z[parseInt(Z)];return z[Z]},j),"getAttr"),I6=H((j)=>j!=null,"isSet"),T6=H((j)=>!j,"not"),A0=S4(),k0={[A0.EndpointURLScheme.HTTP]:80,[A0.EndpointURLScheme.HTTPS]:443},v6=H((j)=>{let $=(()=>{try{if(j instanceof URL)return j;if(typeof j==="object"&&"hostname"in j){let{hostname:B,port:b,protocol:D="",path:C="",query:fj={}}=j,U4=new URL(`${D}//${B}${b?`:${b}`:""}${C}`);return U4.search=Object.entries(fj).map(([uj,cj])=>`${uj}=${cj}`).join("&"),U4}return new URL(j)}catch(B){return null}})();if(!$)return console.error(`Unable to parse ${JSON.stringify(j)} as a whatwg URL.`),null;let z=$.href,{host:Z,hostname:Q,pathname:W,protocol:X,search:J}=$;if(J)return null;let K=X.slice(0,-1);if(!Object.values(A0.EndpointURLScheme).includes(K))return null;let G=P4(Q),V=z.includes(`${Z}:${k0[K]}`)||typeof j==="string"&&j.includes(`${Z}:${k0[K]}`),Y=`${Z}${V?`:${k0[K]}`:""}`;return{scheme:K,authority:Y,path:W,normalizedPath:W.endsWith("/")?W:`${W}/`,isIp:G}},"parseURL"),R6=H((j,$)=>j===$,"stringEquals"),S6=H((j,$,z,Z)=>{if($>=z||j.length<z)return null;if(!Z)return j.substring($,z);return j.substring(j.length-z,j.length-$)},"substring"),k6=H((j)=>encodeURIComponent(j).replace(/[!*'()]/g,($)=>`%${$.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),P6={booleanEquals:O6,getAttr:A4,isSet:I6,isValidHostLabel:x0,not:T6,parseURL:v6,stringEquals:R6,substring:S6,uriEncode:k6},x4=H((j,$)=>{let z=[],Z={...$.endpointParams,...$.referenceRecord},Q=0;while(Q<j.length){let W=j.indexOf("{",Q);if(W===-1){z.push(j.slice(Q));break}z.push(j.slice(Q,W));let X=j.indexOf("}",W);if(X===-1){z.push(j.slice(W));break}if(j[W+1]==="{"&&j[X+1]==="}")z.push(j.slice(W+1,X)),Q=X+2;let J=j.substring(W+1,X);if(J.includes("#")){let[K,G]=J.split("#");z.push(A4(Z[K],G))}else z.push(Z[J]);Q=X+1}return z.join("")},"evaluateTemplate"),A6=H(({ref:j},$)=>{return{...$.endpointParams,...$.referenceRecord}[j]},"getReferenceValue"),$0=H((j,$,z)=>{if(typeof j==="string")return x4(j,z);else if(j.fn)return E4(j,z);else if(j.ref)return A6(j,z);throw new h(`'${$}': ${String(j)} is not a string, function or reference.`)},"evaluateExpression"),E4=H(({fn:j,argv:$},z)=>{let Z=$.map((W)=>["boolean","number"].includes(typeof W)?W:$0(W,"arg",z)),Q=j.split(".");if(Q[0]in P0&&Q[1]!=null)return P0[Q[0]][Q[1]](...Z);return P6[j](...Z)},"callFunction"),x6=H(({assign:j,...$},z)=>{if(j&&j in z.referenceRecord)throw new h(`'${j}' is already defined in Reference Record.`);let Z=E4($,z);return z.logger?.debug?.(`${_} evaluateCondition: ${k($)} = ${k(Z)}`),{result:Z===""?!0:!!Z,...j!=null&&{toAssign:{name:j,value:Z}}}},"evaluateCondition"),E0=H((j=[],$)=>{let z={};for(let Z of j){let{result:Q,toAssign:W}=x6(Z,{...$,referenceRecord:{...$.referenceRecord,...z}});if(!Q)return{result:Q};if(W)z[W.name]=W.value,$.logger?.debug?.(`${_} assign: ${W.name} := ${k(W.value)}`)}return{result:!0,referenceRecord:z}},"evaluateConditions"),E6=H((j,$)=>Object.entries(j).reduce((z,[Z,Q])=>({...z,[Z]:Q.map((W)=>{let X=$0(W,"Header value entry",$);if(typeof X!=="string")throw new h(`Header '${Z}' value '${X}' is not a string`);return X})}),{}),"getEndpointHeaders"),y4=H((j,$)=>{if(Array.isArray(j))return j.map((z)=>y4(z,$));switch(typeof j){case"string":return x4(j,$);case"object":if(j===null)throw new h(`Unexpected endpoint property: ${j}`);return g4(j,$);case"boolean":return j;default:throw new h(`Unexpected endpoint property type: ${typeof j}`)}},"getEndpointProperty"),g4=H((j,$)=>Object.entries(j).reduce((z,[Z,Q])=>({...z,[Z]:y4(Q,$)}),{}),"getEndpointProperties"),y6=H((j,$)=>{let z=$0(j,"Endpoint URL",$);if(typeof z==="string")try{return new URL(z)}catch(Z){throw console.error(`Failed to construct URL with ${z}`,Z),Z}throw new h(`Endpoint URL must be a string, got ${typeof z}`)},"getEndpointUrl"),g6=H((j,$)=>{let{conditions:z,endpoint:Z}=j,{result:Q,referenceRecord:W}=E0(z,$);if(!Q)return;let X={...$,referenceRecord:{...$.referenceRecord,...W}},{url:J,properties:K,headers:G}=Z;return $.logger?.debug?.(`${_} Resolving endpoint from template: ${k(Z)}`),{...G!=null&&{headers:E6(G,X)},...K!=null&&{properties:g4(K,X)},url:y6(J,X)}},"evaluateEndpointRule"),f6=H((j,$)=>{let{conditions:z,error:Z}=j,{result:Q,referenceRecord:W}=E0(z,$);if(!Q)return;throw new h($0(Z,"Error",{...$,referenceRecord:{...$.referenceRecord,...W}}))},"evaluateErrorRule"),u6=H((j,$)=>{let{conditions:z,rules:Z}=j,{result:Q,referenceRecord:W}=E0(z,$);if(!Q)return;return f4(Z,{...$,referenceRecord:{...$.referenceRecord,...W}})},"evaluateTreeRule"),f4=H((j,$)=>{for(let z of j)if(z.type==="endpoint"){let Z=g6(z,$);if(Z)return Z}else if(z.type==="error")f6(z,$);else if(z.type==="tree"){let Z=u6(z,$);if(Z)return Z}else throw new h(`Unknown endpoint rule: ${z}`);throw new h("Rules evaluation failed")},"evaluateRules"),c6=H((j,$)=>{let{endpointParams:z,logger:Z}=$,{parameters:Q,rules:W}=j;$.logger?.debug?.(`${_} Initial EndpointParams: ${k(z)}`);let X=Object.entries(Q).filter(([,G])=>G.default!=null).map(([G,V])=>[G,V.default]);if(X.length>0)for(let[G,V]of X)z[G]=z[G]??V;let J=Object.entries(Q).filter(([,G])=>G.required).map(([G])=>G);for(let G of J)if(z[G]==null)throw new h(`Missing required parameter: '${G}'`);let K=f4(W,{endpointParams:z,logger:Z,referenceRecord:{}});return $.logger?.debug?.(`${_} Resolved endpoint: ${k(K)}`),K},"resolveEndpoint")});var o4=q((RQ,r4)=>{var{defineProperty:z0,getOwnPropertyDescriptor:d6,getOwnPropertyNames:l6}=Object,_6=Object.prototype.hasOwnProperty,g=(j,$)=>z0(j,"name",{value:$,configurable:!0}),s6=(j,$)=>{for(var z in $)z0(j,z,{get:$[z],enumerable:!0})},m6=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of l6($))if(!_6.call(j,Q)&&Q!==z)z0(j,Q,{get:()=>$[Q],enumerable:!(Z=d6($,Q))||Z.enumerable})}return j},p6=(j)=>m6(z0({},"__esModule",{value:!0}),j),l4={};s6(l4,{ConditionObject:()=>w.ConditionObject,DeprecatedObject:()=>w.DeprecatedObject,EndpointError:()=>w.EndpointError,EndpointObject:()=>w.EndpointObject,EndpointObjectHeaders:()=>w.EndpointObjectHeaders,EndpointObjectProperties:()=>w.EndpointObjectProperties,EndpointParams:()=>w.EndpointParams,EndpointResolverOptions:()=>w.EndpointResolverOptions,EndpointRuleObject:()=>w.EndpointRuleObject,ErrorRuleObject:()=>w.ErrorRuleObject,EvaluateOptions:()=>w.EvaluateOptions,Expression:()=>w.Expression,FunctionArgv:()=>w.FunctionArgv,FunctionObject:()=>w.FunctionObject,FunctionReturn:()=>w.FunctionReturn,ParameterObject:()=>w.ParameterObject,ReferenceObject:()=>w.ReferenceObject,ReferenceRecord:()=>w.ReferenceRecord,RuleSetObject:()=>w.RuleSetObject,RuleSetRules:()=>w.RuleSetRules,TreeRuleObject:()=>w.TreeRuleObject,awsEndpointFunctions:()=>n4,getUserAgentPrefix:()=>r6,isIpAddress:()=>w.isIpAddress,partition:()=>i4,resolveEndpoint:()=>w.resolveEndpoint,setPartitionInfo:()=>a4,useDefaultPartitionInfo:()=>n6});r4.exports=p6(l4);var w=c4(),_4=g((j,$=!1)=>{if($){for(let z of j.split("."))if(!_4(z))return!1;return!0}if(!w.isValidHostLabel(j))return!1;if(j.length<3||j.length>63)return!1;if(j!==j.toLowerCase())return!1;if(w.isIpAddress(j))return!1;return!0},"isVirtualHostableS3Bucket"),d4=":",i6="/",a6=g((j)=>{let $=j.split(d4);if($.length<6)return null;let[z,Z,Q,W,X,...J]=$;if(z!=="arn"||Z===""||Q===""||J.join(d4)==="")return null;let K=J.map((G)=>G.split(i6)).flat();return{partition:Z,service:Q,region:W,accountId:X,resourceId:K}},"parseArn"),s4={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],version:"1.1"},m4=s4,p4="",i4=g((j)=>{let{partitions:$}=m4;for(let Z of $){let{regions:Q,outputs:W}=Z;for(let[X,J]of Object.entries(Q))if(X===j)return{...W,...J}}for(let Z of $){let{regionRegex:Q,outputs:W}=Z;if(new RegExp(Q).test(j))return{...W}}let z=$.find((Z)=>Z.id==="aws");if(!z)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...z.outputs}},"partition"),a4=g((j,$="")=>{m4=j,p4=$},"setPartitionInfo"),n6=g(()=>{a4(s4,"")},"useDefaultPartitionInfo"),r6=g(()=>p4,"getUserAgentPrefix"),n4={isVirtualHostableS3Bucket:_4,parseArn:a6,partition:i4};w.customEndpointFunctions.aws=n4});var B1=q((SQ,Y1)=>{var{defineProperty:Z0,getOwnPropertyDescriptor:t6,getOwnPropertyNames:e6}=Object,j5=Object.prototype.hasOwnProperty,P=(j,$)=>Z0(j,"name",{value:$,configurable:!0}),$5=(j,$)=>{for(var z in $)Z0(j,z,{get:$[z],enumerable:!0})},z5=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of e6($))if(!j5.call(j,Q)&&Q!==z)Z0(j,Q,{get:()=>$[Q],enumerable:!(Z=t6($,Q))||Z.enumerable})}return j},Q5=(j)=>z5(Z0({},"__esModule",{value:!0}),j),z1={};$5(z1,{DEFAULT_UA_APP_ID:()=>Q1,getUserAgentMiddlewareOptions:()=>G1,getUserAgentPlugin:()=>B5,resolveUserAgentConfig:()=>W1,userAgentMiddleware:()=>K1});Y1.exports=Q5(z1);var Z5=$1(),Q1=void 0;function Z1(j){if(j===void 0)return!0;return typeof j==="string"&&j.length<=50}P(Z1,"isValidUserAgentAppId");function W1(j){let $=Z5.normalizeProvider(j.userAgentAppId??Q1),{customUserAgent:z}=j;return Object.assign(j,{customUserAgent:typeof z==="string"?[[z]]:z,userAgentAppId:P(async()=>{let Z=await $();if(!Z1(Z)){let Q=j.logger?.constructor?.name==="NoOpLogger"||!j.logger?console:j.logger;if(typeof Z!=="string")Q?.warn("userAgentAppId must be a string or undefined.");else if(Z.length>50)Q?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return Z},"userAgentAppId")})}P(W1,"resolveUserAgentConfig");var W5=o4(),X5=l(),v=o6(),J5=/\d{12}\.ddb/;async function X1(j,$,z){if(z.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor")v.setFeature(j,"PROTOCOL_RPC_V2_CBOR","M");if(typeof $.retryStrategy==="function"){let W=await $.retryStrategy();if(typeof W.acquireInitialRetryToken==="function")if(W.constructor?.name?.includes("Adaptive"))v.setFeature(j,"RETRY_MODE_ADAPTIVE","F");else v.setFeature(j,"RETRY_MODE_STANDARD","E");else v.setFeature(j,"RETRY_MODE_LEGACY","D")}if(typeof $.accountIdEndpointMode==="function"){let W=j.endpointV2;if(String(W?.url?.hostname).match(J5))v.setFeature(j,"ACCOUNT_ID_ENDPOINT","O");switch(await $.accountIdEndpointMode?.()){case"disabled":v.setFeature(j,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":v.setFeature(j,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":v.setFeature(j,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let Q=j.__smithy_context?.selectedHttpAuthScheme?.identity;if(Q?.$source){let W=Q;if(W.accountId)v.setFeature(j,"RESOLVED_ACCOUNT_ID","T");for(let[X,J]of Object.entries(W.$source??{}))v.setFeature(j,X,J)}}P(X1,"checkFeatures");var t4="user-agent",y0="x-amz-user-agent",e4=" ",g0="/",K5=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,G5=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,j1="-",Y5=1024;function J1(j){let $="";for(let z in j){let Z=j[z];if($.length+Z.length+1<=Y5){if($.length)$+=","+Z;else $+=Z;continue}break}return $}P(J1,"encodeFeatures");var K1=P((j)=>($,z)=>async(Z)=>{let{request:Q}=Z;if(!X5.HttpRequest.isInstance(Q))return $(Z);let{headers:W}=Q,X=z?.userAgent?.map(Q0)||[],J=(await j.defaultUserAgentProvider()).map(Q0);await X1(z,j,Z);let K=z;J.push(`m/${J1(Object.assign({},z.__smithy_context?.features,K.__aws_sdk_context?.features))}`);let G=j?.customUserAgent?.map(Q0)||[],V=await j.userAgentAppId();if(V)J.push(Q0([`app/${V}`]));let Y=W5.getUserAgentPrefix(),B=(Y?[Y]:[]).concat([...J,...X,...G]).join(e4),b=[...J.filter((D)=>D.startsWith("aws-sdk-")),...G].join(e4);if(j.runtime!=="browser"){if(b)W[y0]=W[y0]?`${W[t4]} ${b}`:b;W[t4]=B}else W[y0]=B;return $({...Z,request:Q})},"userAgentMiddleware"),Q0=P((j)=>{let $=j[0].split(g0).map((X)=>X.replace(K5,j1)).join(g0),z=j[1]?.replace(G5,j1),Z=$.indexOf(g0),Q=$.substring(0,Z),W=$.substring(Z+1);if(Q==="api")W=W.toLowerCase();return[Q,W,z].filter((X)=>X&&X.length>0).reduce((X,J,K)=>{switch(K){case 0:return J;case 1:return`${X}/${J}`;default:return`${X}#${J}`}},"")},"escapeUserAgent"),G1={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},B5=P((j)=>({applyToStack:P(($)=>{$.add(K1(j),G1)},"applyToStack")}),"getUserAgentPlugin")});var U1=q((kQ,w1)=>{var{defineProperty:W0,getOwnPropertyDescriptor:q5,getOwnPropertyNames:V5}=Object,H5=Object.prototype.hasOwnProperty,q1=(j,$)=>W0(j,"name",{value:$,configurable:!0}),w5=(j,$)=>{for(var z in $)W0(j,z,{get:$[z],enumerable:!0})},U5=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of V5($))if(!H5.call(j,Q)&&Q!==z)W0(j,Q,{get:()=>$[Q],enumerable:!(Z=q5($,Q))||Z.enumerable})}return j},L5=(j)=>U5(W0({},"__esModule",{value:!0}),j),V1={};w5(V1,{SelectorType:()=>H1,booleanSelector:()=>M5,numberSelector:()=>b5});w1.exports=L5(V1);var M5=q1((j,$,z)=>{if(!($ in j))return;if(j[$]==="true")return!0;if(j[$]==="false")return!1;throw new Error(`Cannot load ${z} "${$}". Expected "true" or "false", got ${j[$]}.`)},"booleanSelector"),b5=q1((j,$,z)=>{if(!($ in j))return;let Z=parseInt(j[$],10);if(Number.isNaN(Z))throw new TypeError(`Cannot load ${z} '${$}'. Expected number, got '${j[$]}'.`);return Z},"numberSelector"),H1=((j)=>{return j.ENV="env",j.CONFIG="shared config entry",j})(H1||{})});var v1=q((PQ,T1)=>{var{defineProperty:J0,getOwnPropertyDescriptor:F5,getOwnPropertyNames:D5}=Object,h5=Object.prototype.hasOwnProperty,I=(j,$)=>J0(j,"name",{value:$,configurable:!0}),N5=(j,$)=>{for(var z in $)J0(j,z,{get:$[z],enumerable:!0})},O5=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of D5($))if(!h5.call(j,Q)&&Q!==z)J0(j,Q,{get:()=>$[Q],enumerable:!(Z=F5($,Q))||Z.enumerable})}return j},C5=(j)=>O5(J0({},"__esModule",{value:!0}),j),b1={};N5(b1,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>D1,CONFIG_USE_FIPS_ENDPOINT:()=>N1,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>I5,DEFAULT_USE_FIPS_ENDPOINT:()=>v5,ENV_USE_DUALSTACK_ENDPOINT:()=>F1,ENV_USE_FIPS_ENDPOINT:()=>h1,NODE_REGION_CONFIG_FILE_OPTIONS:()=>x5,NODE_REGION_CONFIG_OPTIONS:()=>A5,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>T5,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>R5,REGION_ENV_NAME:()=>O1,REGION_INI_NAME:()=>C1,getRegionInfo:()=>u5,resolveCustomEndpointsConfig:()=>S5,resolveEndpointsConfig:()=>P5,resolveRegionConfig:()=>E5});T1.exports=C5(b1);var A=U1(),F1="AWS_USE_DUALSTACK_ENDPOINT",D1="use_dualstack_endpoint",I5=!1,T5={environmentVariableSelector:(j)=>A.booleanSelector(j,F1,A.SelectorType.ENV),configFileSelector:(j)=>A.booleanSelector(j,D1,A.SelectorType.CONFIG),default:!1},h1="AWS_USE_FIPS_ENDPOINT",N1="use_fips_endpoint",v5=!1,R5={environmentVariableSelector:(j)=>A.booleanSelector(j,h1,A.SelectorType.ENV),configFileSelector:(j)=>A.booleanSelector(j,N1,A.SelectorType.CONFIG),default:!1},X0=f0(),S5=I((j)=>{let{tls:$,endpoint:z,urlParser:Z,useDualstackEndpoint:Q}=j;return Object.assign(j,{tls:$??!0,endpoint:X0.normalizeProvider(typeof z==="string"?Z(z):z),isCustomEndpoint:!0,useDualstackEndpoint:X0.normalizeProvider(Q??!1)})},"resolveCustomEndpointsConfig"),k5=I(async(j)=>{let{tls:$=!0}=j,z=await j.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(z))throw new Error("Invalid region in client config");let Q=await j.useDualstackEndpoint(),W=await j.useFipsEndpoint(),{hostname:X}=await j.regionInfoProvider(z,{useDualstackEndpoint:Q,useFipsEndpoint:W})??{};if(!X)throw new Error("Cannot resolve hostname from client config");return j.urlParser(`${$?"https:":"http:"}//${X}`)},"getEndpointFromRegion"),P5=I((j)=>{let $=X0.normalizeProvider(j.useDualstackEndpoint??!1),{endpoint:z,useFipsEndpoint:Z,urlParser:Q,tls:W}=j;return Object.assign(j,{tls:W??!0,endpoint:z?X0.normalizeProvider(typeof z==="string"?Q(z):z):()=>k5({...j,useDualstackEndpoint:$,useFipsEndpoint:Z}),isCustomEndpoint:!!z,useDualstackEndpoint:$})},"resolveEndpointsConfig"),O1="AWS_REGION",C1="region",A5={environmentVariableSelector:(j)=>j[O1],configFileSelector:(j)=>j[C1],default:()=>{throw new Error("Region is missing")}},x5={preferredFile:"credentials"},I1=I((j)=>typeof j==="string"&&(j.startsWith("fips-")||j.endsWith("-fips")),"isFipsRegion"),L1=I((j)=>I1(j)?["fips-aws-global","aws-fips"].includes(j)?"us-east-1":j.replace(/fips-(dkr-|prod-)?|-fips/,""):j,"getRealRegion"),E5=I((j)=>{let{region:$,useFipsEndpoint:z}=j;if(!$)throw new Error("Region is missing");return Object.assign(j,{region:async()=>{if(typeof $==="string")return L1($);let Z=await $();return L1(Z)},useFipsEndpoint:async()=>{let Z=typeof $==="string"?$:await $();if(I1(Z))return!0;return typeof z!=="function"?Promise.resolve(!!z):z()}})},"resolveRegionConfig"),M1=I((j=[],{useFipsEndpoint:$,useDualstackEndpoint:z})=>j.find(({tags:Z})=>$===Z.includes("fips")&&z===Z.includes("dualstack"))?.hostname,"getHostnameFromVariants"),y5=I((j,{regionHostname:$,partitionHostname:z})=>$?$:z?z.replace("{region}",j):void 0,"getResolvedHostname"),g5=I((j,{partitionHash:$})=>Object.keys($||{}).find((z)=>$[z].regions.includes(j))??"aws","getResolvedPartition"),f5=I((j,{signingRegion:$,regionRegex:z,useFipsEndpoint:Z})=>{if($)return $;else if(Z){let Q=z.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),W=j.match(Q);if(W)return W[0].slice(1,-1)}},"getResolvedSigningRegion"),u5=I((j,{useFipsEndpoint:$=!1,useDualstackEndpoint:z=!1,signingService:Z,regionHash:Q,partitionHash:W})=>{let X=g5(j,{partitionHash:W}),J=j in Q?j:W[X]?.endpoint??j,K={useFipsEndpoint:$,useDualstackEndpoint:z},G=M1(Q[J]?.variants,K),V=M1(W[X]?.variants,K),Y=y5(J,{regionHostname:G,partitionHostname:V});if(Y===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:J,useFipsEndpoint:$,useDualstackEndpoint:z}}`);let B=f5(Y,{signingRegion:Q[J]?.signingRegion,regionRegex:W[X].regionRegex,useFipsEndpoint:$});return{partition:X,signingService:Z,hostname:Y,...B&&{signingRegion:B},...Q[J]?.signingService&&{signingService:Q[J].signingService}}},"getRegionInfo")});var a5=q((AQ,A1)=>{var{defineProperty:K0,getOwnPropertyDescriptor:c5,getOwnPropertyNames:d5}=Object,l5=Object.prototype.hasOwnProperty,S1=(j,$)=>K0(j,"name",{value:$,configurable:!0}),_5=(j,$)=>{for(var z in $)K0(j,z,{get:$[z],enumerable:!0})},s5=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of d5($))if(!l5.call(j,Q)&&Q!==z)K0(j,Q,{get:()=>$[Q],enumerable:!(Z=c5($,Q))||Z.enumerable})}return j},m5=(j)=>s5(K0({},"__esModule",{value:!0}),j),k1={};_5(k1,{contentLengthMiddleware:()=>u0,contentLengthMiddlewareOptions:()=>P1,getContentLengthPlugin:()=>i5});A1.exports=m5(k1);var p5=l(),R1="content-length";function u0(j){return($)=>async(z)=>{let Z=z.request;if(p5.HttpRequest.isInstance(Z)){let{body:Q,headers:W}=Z;if(Q&&Object.keys(W).map((X)=>X.toLowerCase()).indexOf(R1)===-1)try{let X=j(Q);Z.headers={...Z.headers,[R1]:String(X)}}catch(X){}}return $({...z,request:Z})}}S1(u0,"contentLengthMiddleware");var P1={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},i5=S1((j)=>({applyToStack:($)=>{$.add(u0(j.bodyLengthChecker),P1)}}),"getContentLengthPlugin")});var f=q((x1)=>{Object.defineProperty(x1,"__esModule",{value:!0});x1.getHomeDir=void 0;var n5=F("os"),r5=F("path"),c0={},o5=()=>{if(process&&process.geteuid)return`${process.geteuid()}`;return"DEFAULT"},t5=()=>{let{HOME:j,USERPROFILE:$,HOMEPATH:z,HOMEDRIVE:Z=`C:${r5.sep}`}=process.env;if(j)return j;if($)return $;if(z)return`${Z}${z}`;let Q=o5();if(!c0[Q])c0[Q]=n5.homedir();return c0[Q]};x1.getHomeDir=t5});var d0=q((y1)=>{Object.defineProperty(y1,"__esModule",{value:!0});y1.getSSOTokenFilepath=void 0;var e5=F("crypto"),j$=F("path"),$$=f(),z$=(j)=>{let z=e5.createHash("sha1").update(j).digest("hex");return j$.join($$.getHomeDir(),".aws","sso","cache",`${z}.json`)};y1.getSSOTokenFilepath=z$});var c1=q((f1)=>{Object.defineProperty(f1,"__esModule",{value:!0});f1.getSSOTokenFromFile=void 0;var Q$=F("fs"),Z$=d0(),{readFile:W$}=Q$.promises,X$=async(j)=>{let $=Z$.getSSOTokenFilepath(j),z=await W$($,"utf8");return JSON.parse(z)};f1.getSSOTokenFromFile=X$});var _0=q((d1)=>{Object.defineProperty(d1,"__esModule",{value:!0});d1.slurpFile=void 0;var J$=F("fs"),{readFile:K$}=J$.promises,l0={},G$=(j,$)=>{if(!l0[j]||($===null||$===void 0?void 0:$.ignoreCache))l0[j]=K$(j,"utf8");return l0[j]};d1.slurpFile=G$});var i0=q((fQ,m)=>{var{defineProperty:B0,getOwnPropertyDescriptor:Y$,getOwnPropertyNames:B$}=Object,q$=Object.prototype.hasOwnProperty,N=(j,$)=>B0(j,"name",{value:$,configurable:!0}),V$=(j,$)=>{for(var z in $)B0(j,z,{get:$[z],enumerable:!0})},s0=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of B$($))if(!q$.call(j,Q)&&Q!==z)B0(j,Q,{get:()=>$[Q],enumerable:!(Z=Y$($,Q))||Z.enumerable})}return j},p0=(j,$,z)=>(s0(j,$,"default"),z&&s0(z,$,"default")),H$=(j)=>s0(B0({},"__esModule",{value:!0}),j),s={};V$(s,{CONFIG_PREFIX_SEPARATOR:()=>E,DEFAULT_PROFILE:()=>p1,ENV_PROFILE:()=>m1,getProfileName:()=>w$,loadSharedConfigFiles:()=>a1,loadSsoSessionData:()=>v$,parseKnownFiles:()=>S$});m.exports=H$(s);p0(s,f(),m.exports);var m1="AWS_PROFILE",p1="default",w$=N((j)=>j.profile||process.env[m1]||p1,"getProfileName");p0(s,d0(),m.exports);p0(s,c1(),m.exports);var G0=S4(),U$=N((j)=>Object.entries(j).filter(([$])=>{let z=$.indexOf(E);if(z===-1)return!1;return Object.values(G0.IniSectionType).includes($.substring(0,z))}).reduce(($,[z,Z])=>{let Q=z.indexOf(E),W=z.substring(0,Q)===G0.IniSectionType.PROFILE?z.substring(Q+1):z;return $[W]=Z,$},{...j.default&&{default:j.default}}),"getConfigData"),Y0=F("path"),L$=f(),M$="AWS_CONFIG_FILE",i1=N(()=>process.env[M$]||Y0.join(L$.getHomeDir(),".aws","config"),"getConfigFilepath"),b$=f(),F$="AWS_SHARED_CREDENTIALS_FILE",D$=N(()=>process.env[F$]||Y0.join(b$.getHomeDir(),".aws","credentials"),"getCredentialsFilepath"),h$=f(),N$=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,O$=["__proto__","profile __proto__"],m0=N((j)=>{let $={},z,Z;for(let Q of j.split(/\r?\n/)){let W=Q.split(/(^|\s)[;#]/)[0].trim();if(W[0]==="["&&W[W.length-1]==="]"){z=void 0,Z=void 0;let J=W.substring(1,W.length-1),K=N$.exec(J);if(K){let[,G,,V]=K;if(Object.values(G0.IniSectionType).includes(G))z=[G,V].join(E)}else z=J;if(O$.includes(J))throw new Error(`Found invalid profile name "${J}"`)}else if(z){let J=W.indexOf("=");if(![0,-1].includes(J)){let[K,G]=[W.substring(0,J).trim(),W.substring(J+1).trim()];if(G==="")Z=K;else{if(Z&&Q.trimStart()===Q)Z=void 0;$[z]=$[z]||{};let V=Z?[Z,K].join(E):K;$[z][V]=G}}}}return $},"parseIni"),_1=_0(),s1=N(()=>({}),"swallowError"),E=".",a1=N(async(j={})=>{let{filepath:$=D$(),configFilepath:z=i1()}=j,Z=h$.getHomeDir(),Q="~/",W=$;if($.startsWith("~/"))W=Y0.join(Z,$.slice(2));let X=z;if(z.startsWith("~/"))X=Y0.join(Z,z.slice(2));let J=await Promise.all([_1.slurpFile(X,{ignoreCache:j.ignoreCache}).then(m0).then(U$).catch(s1),_1.slurpFile(W,{ignoreCache:j.ignoreCache}).then(m0).catch(s1)]);return{configFile:J[0],credentialsFile:J[1]}},"loadSharedConfigFiles"),C$=N((j)=>Object.entries(j).filter(([$])=>$.startsWith(G0.IniSectionType.SSO_SESSION+E)).reduce(($,[z,Z])=>({...$,[z.substring(z.indexOf(E)+1)]:Z}),{}),"getSsoSessionData"),I$=_0(),T$=N(()=>({}),"swallowError"),v$=N(async(j={})=>I$.slurpFile(j.configFilepath??i1()).then(m0).then(C$).catch(T$),"loadSsoSessionData"),R$=N((...j)=>{let $={};for(let z of j)for(let[Z,Q]of Object.entries(z))if($[Z]!==void 0)Object.assign($[Z],Q);else $[Z]=Q;return $},"mergeConfigFiles"),S$=N(async(j)=>{let $=await a1(j);return R$($.configFile,$.credentialsFile)},"parseKnownFiles")});var V0=q((uQ,o1)=>{var{defineProperty:q0,getOwnPropertyDescriptor:k$,getOwnPropertyNames:P$}=Object,A$=Object.prototype.hasOwnProperty,u=(j,$)=>q0(j,"name",{value:$,configurable:!0}),x$=(j,$)=>{for(var z in $)q0(j,z,{get:$[z],enumerable:!0})},E$=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of P$($))if(!A$.call(j,Q)&&Q!==z)q0(j,Q,{get:()=>$[Q],enumerable:!(Z=k$($,Q))||Z.enumerable})}return j},y$=(j)=>E$(q0({},"__esModule",{value:!0}),j),r1={};x$(r1,{loadConfig:()=>d$});o1.exports=y$(r1);var p=a0();function n0(j){try{let $=new Set(Array.from(j.match(/([A-Z_]){3,}/g)??[]));return $.delete("CONFIG"),$.delete("CONFIG_PREFIX_SEPARATOR"),$.delete("ENV"),[...$].join(", ")}catch($){return j}}u(n0,"getSelectorName");var g$=u((j,$)=>async()=>{try{let z=j(process.env,$);if(z===void 0)throw new Error;return z}catch(z){throw new p.CredentialsProviderError(z.message||`Not found in ENV: ${n0(j.toString())}`,{logger:$?.logger})}},"fromEnv"),n1=i0(),f$=u((j,{preferredFile:$="config",...z}={})=>async()=>{let Z=n1.getProfileName(z),{configFile:Q,credentialsFile:W}=await n1.loadSharedConfigFiles(z),X=W[Z]||{},J=Q[Z]||{},K=$==="config"?{...X,...J}:{...J,...X};try{let V=j(K,$==="config"?Q:W);if(V===void 0)throw new Error;return V}catch(G){throw new p.CredentialsProviderError(G.message||`Not found in config files w/ profile [${Z}]: ${n0(j.toString())}`,{logger:z.logger})}},"fromSharedConfigFiles"),u$=u((j)=>typeof j==="function","isFunction"),c$=u((j)=>u$(j)?async()=>await j():p.fromStatic(j),"fromStatic"),d$=u(({environmentVariableSelector:j,configFileSelector:$,default:z},Z={})=>{let{signingName:Q,logger:W}=Z,X={signingName:Q,logger:W};return p.memoize(p.chain(g$(j,X),f$($,Z),c$(z)))},"loadConfig")});var Q8=q(($8)=>{Object.defineProperty($8,"__esModule",{value:!0});$8.getEndpointUrlConfig=void 0;var t1=i0(),e1="AWS_ENDPOINT_URL",j8="endpoint_url",l$=(j)=>({environmentVariableSelector:($)=>{let z=j.split(" ").map((W)=>W.toUpperCase()),Z=$[[e1,...z].join("_")];if(Z)return Z;let Q=$[e1];if(Q)return Q;return},configFileSelector:($,z)=>{if(z&&$.services){let Q=z[["services",$.services].join(t1.CONFIG_PREFIX_SEPARATOR)];if(Q){let W=j.split(" ").map((J)=>J.toLowerCase()),X=Q[[W.join("_"),j8].join(t1.CONFIG_PREFIX_SEPARATOR)];if(X)return X}}let Z=$[j8];if(Z)return Z;return},default:void 0});$8.getEndpointUrlConfig=l$});var r0=q((Z8)=>{Object.defineProperty(Z8,"__esModule",{value:!0});Z8.getEndpointFromConfig=void 0;var _$=V0(),s$=Q8(),m$=async(j)=>_$.loadConfig(s$.getEndpointUrlConfig(j!==null&&j!==void 0?j:""))();Z8.getEndpointFromConfig=m$});var G8=q((lQ,K8)=>{var{defineProperty:H0,getOwnPropertyDescriptor:p$,getOwnPropertyNames:i$}=Object,a$=Object.prototype.hasOwnProperty,n$=(j,$)=>H0(j,"name",{value:$,configurable:!0}),r$=(j,$)=>{for(var z in $)H0(j,z,{get:$[z],enumerable:!0})},o$=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of i$($))if(!a$.call(j,Q)&&Q!==z)H0(j,Q,{get:()=>$[Q],enumerable:!(Z=p$($,Q))||Z.enumerable})}return j},t$=(j)=>o$(H0({},"__esModule",{value:!0}),j),X8={};r$(X8,{parseQueryString:()=>J8});K8.exports=t$(X8);function J8(j){let $={};if(j=j.replace(/^\?/,""),j)for(let z of j.split("&")){let[Z,Q=null]=z.split("=");if(Z=decodeURIComponent(Z),Q)Q=decodeURIComponent(Q);if(!(Z in $))$[Z]=Q;else if(Array.isArray($[Z]))$[Z].push(Q);else $[Z]=[$[Z],Q]}return $}n$(J8,"parseQueryString")});var o0=q((_Q,q8)=>{var{defineProperty:w0,getOwnPropertyDescriptor:e$,getOwnPropertyNames:j7}=Object,$7=Object.prototype.hasOwnProperty,z7=(j,$)=>w0(j,"name",{value:$,configurable:!0}),Q7=(j,$)=>{for(var z in $)w0(j,z,{get:$[z],enumerable:!0})},Z7=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of j7($))if(!$7.call(j,Q)&&Q!==z)w0(j,Q,{get:()=>$[Q],enumerable:!(Z=e$($,Q))||Z.enumerable})}return j},W7=(j)=>Z7(w0({},"__esModule",{value:!0}),j),Y8={};Q7(Y8,{parseUrl:()=>B8});q8.exports=W7(Y8);var X7=G8(),B8=z7((j)=>{if(typeof j==="string")return B8(new URL(j));let{hostname:$,pathname:z,port:Z,protocol:Q,search:W}=j,X;if(W)X=X7.parseQueryString(W);return{hostname:$,port:Z?parseInt(Z):void 0,protocol:Q,path:z,query:X}},"parseUrl")});var v7=q((sQ,b8)=>{var{defineProperty:L0,getOwnPropertyDescriptor:K7,getOwnPropertyNames:G7}=Object,Y7=Object.prototype.hasOwnProperty,O=(j,$)=>L0(j,"name",{value:$,configurable:!0}),B7=(j,$)=>{for(var z in $)L0(j,z,{get:$[z],enumerable:!0})},q7=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of G7($))if(!Y7.call(j,Q)&&Q!==z)L0(j,Q,{get:()=>$[Q],enumerable:!(Z=K7($,Q))||Z.enumerable})}return j},V7=(j)=>q7(L0({},"__esModule",{value:!0}),j),H8={};B7(H8,{endpointMiddleware:()=>L8,endpointMiddlewareOptions:()=>M8,getEndpointFromInstructions:()=>w8,getEndpointPlugin:()=>O7,resolveEndpointConfig:()=>I7,resolveEndpointRequiredConfig:()=>T7,resolveParams:()=>U8,toEndpointV1:()=>t0});b8.exports=V7(H8);var H7=O(async(j)=>{let $=j?.Bucket||"";if(typeof j.Bucket==="string")j.Bucket=$.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"));if(b7($)){if(j.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else if(!M7($)||$.indexOf(".")!==-1&&!String(j.Endpoint).startsWith("http:")||$.toLowerCase()!==$||$.length<3)j.ForcePathStyle=!0;if(j.DisableMultiRegionAccessPoints)j.disableMultiRegionAccessPoints=!0,j.DisableMRAP=!0;return j},"resolveParamsForS3"),w7=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,U7=/(\d+\.){3}\d+/,L7=/\.\./,M7=O((j)=>w7.test(j)&&!U7.test(j)&&!L7.test(j),"isDnsCompatibleBucketName"),b7=O((j)=>{let[$,z,Z,,,Q]=j.split(":"),W=$==="arn"&&j.split(":").length>=6,X=Boolean(W&&z&&Z&&Q);if(W&&!X)throw new Error(`Invalid ARN: ${j} was an invalid ARN.`);return X},"isArnBucketName"),F7=O((j,$,z)=>{let Z=O(async()=>{let Q=z[j]??z[$];if(typeof Q==="function")return Q();return Q},"configProvider");if(j==="credentialScope"||$==="CredentialScope")return async()=>{let Q=typeof z.credentials==="function"?await z.credentials():z.credentials;return Q?.credentialScope??Q?.CredentialScope};if(j==="accountId"||$==="AccountId")return async()=>{let Q=typeof z.credentials==="function"?await z.credentials():z.credentials;return Q?.accountId??Q?.AccountId};if(j==="endpoint"||$==="endpoint")return async()=>{let Q=await Z();if(Q&&typeof Q==="object"){if("url"in Q)return Q.url.href;if("hostname"in Q){let{protocol:W,hostname:X,port:J,path:K}=Q;return`${W}//${X}${J?":"+J:""}${K}`}}return Q};return Z},"createConfigValueProvider"),D7=r0(),V8=o0(),t0=O((j)=>{if(typeof j==="object"){if("url"in j)return V8.parseUrl(j.url);return j}return V8.parseUrl(j)},"toEndpointV1"),w8=O(async(j,$,z,Z)=>{if(!z.endpoint){let X;if(z.serviceConfiguredEndpoint)X=await z.serviceConfiguredEndpoint();else X=await D7.getEndpointFromConfig(z.serviceId);if(X)z.endpoint=()=>Promise.resolve(t0(X))}let Q=await U8(j,$,z);if(typeof z.endpointProvider!=="function")throw new Error("config.endpointProvider is not set.");return z.endpointProvider(Q,Z)},"getEndpointFromInstructions"),U8=O(async(j,$,z)=>{let Z={},Q=$?.getEndpointParameterInstructions?.()||{};for(let[W,X]of Object.entries(Q))switch(X.type){case"staticContextParams":Z[W]=X.value;break;case"contextParams":Z[W]=j[X.name];break;case"clientContextParams":case"builtInParams":Z[W]=await F7(X.name,W,z)();break;case"operationContextParams":Z[W]=X.get(j);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(X))}if(Object.keys(Q).length===0)Object.assign(Z,z);if(String(z.serviceId).toLowerCase()==="s3")await H7(Z);return Z},"resolveParams"),h7=$1(),U0=f0(),L8=O(({config:j,instructions:$})=>{return(z,Z)=>async(Q)=>{if(j.endpoint)h7.setFeature(Z,"ENDPOINT_OVERRIDE","N");let W=await w8(Q.input,{getEndpointParameterInstructions(){return $}},{...j},Z);Z.endpointV2=W,Z.authSchemes=W.properties?.authSchemes;let X=Z.authSchemes?.[0];if(X){Z.signing_region=X.signingRegion,Z.signing_service=X.signingName;let K=U0.getSmithyContext(Z)?.selectedHttpAuthScheme?.httpAuthOption;if(K)K.signingProperties=Object.assign(K.signingProperties||{},{signing_region:X.signingRegion,signingRegion:X.signingRegion,signing_service:X.signingName,signingName:X.signingName,signingRegionSet:X.signingRegionSet},X.properties)}return z({...Q})}},"endpointMiddleware"),N7=J7(),M8={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:N7.serializerMiddlewareOption.name},O7=O((j,$)=>({applyToStack:(z)=>{z.addRelativeTo(L8({config:j,instructions:$}),M8)}}),"getEndpointPlugin"),C7=r0(),I7=O((j)=>{let $=j.tls??!0,{endpoint:z,useDualstackEndpoint:Z,useFipsEndpoint:Q}=j,W=z!=null?async()=>t0(await U0.normalizeProvider(z)()):void 0,J=Object.assign(j,{endpoint:W,tls:$,isCustomEndpoint:!!z,useDualstackEndpoint:U0.normalizeProvider(Z??!1),useFipsEndpoint:U0.normalizeProvider(Q??!1)}),K=void 0;return J.serviceConfiguredEndpoint=async()=>{if(j.serviceId&&!K)K=C7.getEndpointFromConfig(j.serviceId);return K},J},"resolveEndpointConfig"),T7=O((j)=>{let{endpoint:$}=j;if($===void 0)j.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")};return j},"resolveEndpointRequiredConfig")});var j4=q((mQ,N8)=>{var{defineProperty:M0,getOwnPropertyDescriptor:R7,getOwnPropertyNames:S7}=Object,k7=Object.prototype.hasOwnProperty,y=(j,$)=>M0(j,"name",{value:$,configurable:!0}),P7=(j,$)=>{for(var z in $)M0(j,z,{get:$[z],enumerable:!0})},A7=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of S7($))if(!k7.call(j,Q)&&Q!==z)M0(j,Q,{get:()=>$[Q],enumerable:!(Z=R7($,Q))||Z.enumerable})}return j},x7=(j)=>A7(M0({},"__esModule",{value:!0}),j),F8={};P7(F8,{isBrowserNetworkError:()=>h8,isClockSkewCorrectedError:()=>D8,isClockSkewError:()=>l7,isRetryableByTrait:()=>d7,isServerError:()=>s7,isThrottlingError:()=>_7,isTransientError:()=>e0});N8.exports=x7(F8);var E7=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],y7=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],g7=["TimeoutError","RequestTimeout","RequestTimeoutException"],f7=[500,502,503,504],u7=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],c7=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],d7=y((j)=>j.$retryable!==void 0,"isRetryableByTrait"),l7=y((j)=>E7.includes(j.name),"isClockSkewError"),D8=y((j)=>j.$metadata?.clockSkewCorrected,"isClockSkewCorrectedError"),h8=y((j)=>{let $=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);if(!(j&&j instanceof TypeError))return!1;return $.has(j.message)},"isBrowserNetworkError"),_7=y((j)=>j.$metadata?.httpStatusCode===429||y7.includes(j.name)||j.$retryable?.throttling==!0,"isThrottlingError"),e0=y((j,$=0)=>D8(j)||g7.includes(j.name)||u7.includes(j?.code||"")||c7.includes(j?.code||"")||f7.includes(j.$metadata?.httpStatusCode||0)||h8(j)||j.cause!==void 0&&$<=10&&e0(j.cause,$+1),"isTransientError"),s7=y((j)=>{if(j.$metadata?.httpStatusCode!==void 0){let $=j.$metadata.httpStatusCode;if(500<=$&&$<=599&&!e0(j))return!0;return!1}return!1},"isServerError")});var A8=q((pQ,P8)=>{var{defineProperty:b0,getOwnPropertyDescriptor:m7,getOwnPropertyNames:p7}=Object,i7=Object.prototype.hasOwnProperty,T=(j,$)=>b0(j,"name",{value:$,configurable:!0}),a7=(j,$)=>{for(var z in $)b0(j,z,{get:$[z],enumerable:!0})},n7=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of p7($))if(!i7.call(j,Q)&&Q!==z)b0(j,Q,{get:()=>$[Q],enumerable:!(Z=m7($,Q))||Z.enumerable})}return j},r7=(j)=>n7(b0({},"__esModule",{value:!0}),j),C8={};a7(C8,{AdaptiveRetryStrategy:()=>zz,ConfiguredRetryStrategy:()=>Qz,DEFAULT_MAX_ATTEMPTS:()=>$4,DEFAULT_RETRY_DELAY_BASE:()=>i,DEFAULT_RETRY_MODE:()=>o7,DefaultRateLimiter:()=>T8,INITIAL_RETRY_TOKENS:()=>z4,INVOCATION_ID_HEADER:()=>e7,MAXIMUM_RETRY_DELAY:()=>Q4,NO_RETRY_INCREMENT:()=>k8,REQUEST_HEADER:()=>jz,RETRY_COST:()=>R8,RETRY_MODES:()=>I8,StandardRetryStrategy:()=>Z4,THROTTLING_RETRY_DELAY_BASE:()=>v8,TIMEOUT_RETRY_COST:()=>S8});P8.exports=r7(C8);var I8=((j)=>{return j.STANDARD="standard",j.ADAPTIVE="adaptive",j})(I8||{}),$4=3,o7="standard",t7=j4(),T8=class j{constructor($){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=$?.beta??0.7,this.minCapacity=$?.minCapacity??1,this.minFillRate=$?.minFillRate??0.5,this.scaleConstant=$?.scaleConstant??0.4,this.smooth=$?.smooth??0.8;let z=this.getCurrentTimeInSeconds();this.lastThrottleTime=z,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}static{T(this,"DefaultRateLimiter")}static{this.setTimeoutFn=setTimeout}getCurrentTimeInSeconds(){return Date.now()/1000}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket($){if(!this.enabled)return;if(this.refillTokenBucket(),$>this.currentCapacity){let z=($-this.currentCapacity)/this.fillRate*1000;await new Promise((Z)=>j.setTimeoutFn(Z,z))}this.currentCapacity=this.currentCapacity-$}refillTokenBucket(){let $=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=$;return}let z=($-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+z),this.lastTimestamp=$}updateClientSendingRate($){let z;if(this.updateMeasuredRate(),t7.isThrottlingError($)){let Q=!this.enabled?this.measuredTxRate:Math.min(this.measuredTxRate,this.fillRate);this.lastMaxRate=Q,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),z=this.cubicThrottle(Q),this.enableTokenBucket()}else this.calculateTimeWindow(),z=this.cubicSuccess(this.getCurrentTimeInSeconds());let Z=Math.min(z,2*this.measuredTxRate);this.updateTokenBucketRate(Z)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,0.3333333333333333))}cubicThrottle($){return this.getPrecise($*this.beta)}cubicSuccess($){return this.getPrecise(this.scaleConstant*Math.pow($-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate($){this.refillTokenBucket(),this.fillRate=Math.max($,this.minFillRate),this.maxCapacity=Math.max($,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let $=this.getCurrentTimeInSeconds(),z=Math.floor($*2)/2;if(this.requestCount++,z>this.lastTxRateBucket){let Z=this.requestCount/(z-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(Z*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=z}}getPrecise($){return parseFloat($.toFixed(8))}},i=100,Q4=20000,v8=500,z4=500,R8=5,S8=10,k8=1,e7="amz-sdk-invocation-id",jz="amz-sdk-request",$z=T(()=>{let j=i;return{computeNextBackoffDelay:T((Z)=>{return Math.floor(Math.min(Q4,Math.random()*2**Z*j))},"computeNextBackoffDelay"),setDelayBase:T((Z)=>{j=Z},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),O8=T(({retryDelay:j,retryCount:$,retryCost:z})=>{return{getRetryCount:T(()=>$,"getRetryCount"),getRetryDelay:T(()=>Math.min(Q4,j),"getRetryDelay"),getRetryCost:T(()=>z,"getRetryCost")}},"createDefaultRetryToken"),Z4=class{constructor(j){this.maxAttempts=j,this.mode="standard",this.capacity=z4,this.retryBackoffStrategy=$z(),this.maxAttemptsProvider=typeof j==="function"?j:async()=>j}static{T(this,"StandardRetryStrategy")}async acquireInitialRetryToken(j){return O8({retryDelay:i,retryCount:0})}async refreshRetryTokenForRetry(j,$){let z=await this.getMaxAttempts();if(this.shouldRetry(j,$,z)){let Z=$.errorType;this.retryBackoffStrategy.setDelayBase(Z==="THROTTLING"?v8:i);let Q=this.retryBackoffStrategy.computeNextBackoffDelay(j.getRetryCount()),W=$.retryAfterHint?Math.max($.retryAfterHint.getTime()-Date.now()||0,Q):Q,X=this.getCapacityCost(Z);return this.capacity-=X,O8({retryDelay:W,retryCount:j.getRetryCount()+1,retryCost:X})}throw new Error("No retry token available")}recordSuccess(j){this.capacity=Math.max(z4,this.capacity+(j.getRetryCost()??k8))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(j){return console.warn(`Max attempts provider could not resolve. Using default of ${$4}`),$4}}shouldRetry(j,$,z){return j.getRetryCount()+1<z&&this.capacity>=this.getCapacityCost($.errorType)&&this.isRetryableError($.errorType)}getCapacityCost(j){return j==="TRANSIENT"?S8:R8}isRetryableError(j){return j==="THROTTLING"||j==="TRANSIENT"}},zz=class{constructor(j,$){this.maxAttemptsProvider=j,this.mode="adaptive";let{rateLimiter:z}=$??{};this.rateLimiter=z??new T8,this.standardRetryStrategy=new Z4(j)}static{T(this,"AdaptiveRetryStrategy")}async acquireInitialRetryToken(j){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(j)}async refreshRetryTokenForRetry(j,$){return this.rateLimiter.updateClientSendingRate($),this.standardRetryStrategy.refreshRetryTokenForRetry(j,$)}recordSuccess(j){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(j)}},Qz=class extends Z4{static{T(this,"ConfiguredRetryStrategy")}constructor(j,$=i){super(typeof j==="function"?j:async()=>j);if(typeof $==="number")this.computeNextBackoffDelay=()=>$;else this.computeNextBackoffDelay=$}async refreshRetryTokenForRetry(j,$){let z=await super.refreshRetryTokenForRetry(j,$);return z.getRetryDelay=()=>this.computeNextBackoffDelay(z.getRetryCount()),z}}});var y8=q((x8)=>{Object.defineProperty(x8,"__esModule",{value:!0});x8.isStreamingPayload=void 0;var Zz=F("stream"),Wz=(j)=>(j===null||j===void 0?void 0:j.body)instanceof Zz.Readable||typeof ReadableStream!=="undefined"&&(j===null||j===void 0?void 0:j.body)instanceof ReadableStream;x8.isStreamingPayload=Wz});var Tz=q((oQ,o8)=>{var{defineProperty:F0,getOwnPropertyDescriptor:Kz,getOwnPropertyNames:Gz}=Object,Yz=Object.prototype.hasOwnProperty,L=(j,$)=>F0(j,"name",{value:$,configurable:!0}),Bz=(j,$)=>{for(var z in $)F0(j,z,{get:$[z],enumerable:!0})},qz=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of Gz($))if(!Yz.call(j,Q)&&Q!==z)F0(j,Q,{get:()=>$[Q],enumerable:!(Z=Kz($,Q))||Z.enumerable})}return j},Vz=(j)=>qz(F0({},"__esModule",{value:!0}),j),f8={};Bz(f8,{AdaptiveRetryStrategy:()=>Uz,CONFIG_MAX_ATTEMPTS:()=>X4,CONFIG_RETRY_MODE:()=>m8,ENV_MAX_ATTEMPTS:()=>W4,ENV_RETRY_MODE:()=>s8,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>Lz,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>bz,StandardRetryStrategy:()=>_8,defaultDelayDecider:()=>c8,defaultRetryDecider:()=>d8,getOmitRetryHeadersPlugin:()=>Fz,getRetryAfterHint:()=>r8,getRetryPlugin:()=>Iz,omitRetryHeadersMiddleware:()=>p8,omitRetryHeadersMiddlewareOptions:()=>i8,resolveRetryConfig:()=>Mz,retryMiddleware:()=>a8,retryMiddlewareOptions:()=>n8});o8.exports=Vz(f8);var c=l(),u8=Jz(),U=A8(),Hz=L((j,$)=>{let z=j,Z=$?.noRetryIncrement??U.NO_RETRY_INCREMENT,Q=$?.retryCost??U.RETRY_COST,W=$?.timeoutRetryCost??U.TIMEOUT_RETRY_COST,X=j,J=L((Y)=>Y.name==="TimeoutError"?W:Q,"getCapacityAmount"),K=L((Y)=>J(Y)<=X,"hasRetryTokens");return Object.freeze({hasRetryTokens:K,retrieveRetryTokens:L((Y)=>{if(!K(Y))throw new Error("No retry token available");let B=J(Y);return X-=B,B},"retrieveRetryTokens"),releaseRetryTokens:L((Y)=>{X+=Y??Z,X=Math.min(X,z)},"releaseRetryTokens")})},"getDefaultRetryQuota"),c8=L((j,$)=>Math.floor(Math.min(U.MAXIMUM_RETRY_DELAY,Math.random()*2**$*j)),"defaultDelayDecider"),x=j4(),d8=L((j)=>{if(!j)return!1;return x.isRetryableByTrait(j)||x.isClockSkewError(j)||x.isThrottlingError(j)||x.isTransientError(j)},"defaultRetryDecider"),l8=L((j)=>{if(j instanceof Error)return j;if(j instanceof Object)return Object.assign(new Error,j);if(typeof j==="string")return new Error(j);return new Error(`AWS SDK error wrapper for ${j}`)},"asSdkError"),_8=class{constructor(j,$){this.maxAttemptsProvider=j,this.mode=U.RETRY_MODES.STANDARD,this.retryDecider=$?.retryDecider??d8,this.delayDecider=$?.delayDecider??c8,this.retryQuota=$?.retryQuota??Hz(U.INITIAL_RETRY_TOKENS)}static{L(this,"StandardRetryStrategy")}shouldRetry(j,$,z){return $<z&&this.retryDecider(j)&&this.retryQuota.hasRetryTokens(j)}async getMaxAttempts(){let j;try{j=await this.maxAttemptsProvider()}catch($){j=U.DEFAULT_MAX_ATTEMPTS}return j}async retry(j,$,z){let Z,Q=0,W=0,X=await this.getMaxAttempts(),{request:J}=$;if(c.HttpRequest.isInstance(J))J.headers[U.INVOCATION_ID_HEADER]=u8.v4();while(!0)try{if(c.HttpRequest.isInstance(J))J.headers[U.REQUEST_HEADER]=`attempt=${Q+1}; max=${X}`;if(z?.beforeRequest)await z.beforeRequest();let{response:K,output:G}=await j($);if(z?.afterRequest)z.afterRequest(K);return this.retryQuota.releaseRetryTokens(Z),G.$metadata.attempts=Q+1,G.$metadata.totalRetryDelay=W,{response:K,output:G}}catch(K){let G=l8(K);if(Q++,this.shouldRetry(G,Q,X)){Z=this.retryQuota.retrieveRetryTokens(G);let V=this.delayDecider(x.isThrottlingError(G)?U.THROTTLING_RETRY_DELAY_BASE:U.DEFAULT_RETRY_DELAY_BASE,Q),Y=wz(G.$response),B=Math.max(Y||0,V);W+=B,await new Promise((b)=>setTimeout(b,B));continue}if(!G.$metadata)G.$metadata={};throw G.$metadata.attempts=Q,G.$metadata.totalRetryDelay=W,G}}},wz=L((j)=>{if(!c.HttpResponse.isInstance(j))return;let $=Object.keys(j.headers).find((W)=>W.toLowerCase()==="retry-after");if(!$)return;let z=j.headers[$],Z=Number(z);if(!Number.isNaN(Z))return Z*1000;return new Date(z).getTime()-Date.now()},"getDelayFromRetryAfterHeader"),Uz=class extends _8{static{L(this,"AdaptiveRetryStrategy")}constructor(j,$){let{rateLimiter:z,...Z}=$??{};super(j,Z);this.rateLimiter=z??new U.DefaultRateLimiter,this.mode=U.RETRY_MODES.ADAPTIVE}async retry(j,$){return super.retry(j,$,{beforeRequest:async()=>{return this.rateLimiter.getSendToken()},afterRequest:(z)=>{this.rateLimiter.updateClientSendingRate(z)}})}},g8=f0(),W4="AWS_MAX_ATTEMPTS",X4="max_attempts",Lz={environmentVariableSelector:(j)=>{let $=j[W4];if(!$)return;let z=parseInt($);if(Number.isNaN(z))throw new Error(`Environment variable ${W4} mast be a number, got "${$}"`);return z},configFileSelector:(j)=>{let $=j[X4];if(!$)return;let z=parseInt($);if(Number.isNaN(z))throw new Error(`Shared config file entry ${X4} mast be a number, got "${$}"`);return z},default:U.DEFAULT_MAX_ATTEMPTS},Mz=L((j)=>{let{retryStrategy:$,retryMode:z,maxAttempts:Z}=j,Q=g8.normalizeProvider(Z??U.DEFAULT_MAX_ATTEMPTS);return Object.assign(j,{maxAttempts:Q,retryStrategy:async()=>{if($)return $;if(await g8.normalizeProvider(z)()===U.RETRY_MODES.ADAPTIVE)return new U.AdaptiveRetryStrategy(Q);return new U.StandardRetryStrategy(Q)}})},"resolveRetryConfig"),s8="AWS_RETRY_MODE",m8="retry_mode",bz={environmentVariableSelector:(j)=>j[s8],configFileSelector:(j)=>j[m8],default:U.DEFAULT_RETRY_MODE},p8=L(()=>(j)=>async($)=>{let{request:z}=$;if(c.HttpRequest.isInstance(z))delete z.headers[U.INVOCATION_ID_HEADER],delete z.headers[U.REQUEST_HEADER];return j($)},"omitRetryHeadersMiddleware"),i8={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Fz=L((j)=>({applyToStack:($)=>{$.addRelativeTo(p8(),i8)}}),"getOmitRetryHeadersPlugin"),Dz=Xz(),hz=y8(),a8=L((j)=>($,z)=>async(Z)=>{let Q=await j.retryStrategy(),W=await j.maxAttempts();if(Nz(Q)){Q=Q;let X=await Q.acquireInitialRetryToken(z.partition_id),J=new Error,K=0,G=0,{request:V}=Z,Y=c.HttpRequest.isInstance(V);if(Y)V.headers[U.INVOCATION_ID_HEADER]=u8.v4();while(!0)try{if(Y)V.headers[U.REQUEST_HEADER]=`attempt=${K+1}; max=${W}`;let{response:B,output:b}=await $(Z);return Q.recordSuccess(X),b.$metadata.attempts=K+1,b.$metadata.totalRetryDelay=G,{response:B,output:b}}catch(B){let b=Oz(B);if(J=l8(B),Y&&hz.isStreamingPayload(V))throw(z.logger instanceof Dz.NoOpLogger?console:z.logger)?.warn("An error was encountered in a non-retryable streaming request."),J;try{X=await Q.refreshRetryTokenForRetry(X,b)}catch(C){if(!J.$metadata)J.$metadata={};throw J.$metadata.attempts=K+1,J.$metadata.totalRetryDelay=G,J}K=X.getRetryCount();let D=X.getRetryDelay();G+=D,await new Promise((C)=>setTimeout(C,D))}}else{if(Q=Q,Q?.mode)z.userAgent=[...z.userAgent||[],["cfg/retry-mode",Q.mode]];return Q.retry($,Z)}},"retryMiddleware"),Nz=L((j)=>typeof j.acquireInitialRetryToken!=="undefined"&&typeof j.refreshRetryTokenForRetry!=="undefined"&&typeof j.recordSuccess!=="undefined","isRetryStrategyV2"),Oz=L((j)=>{let $={error:j,errorType:Cz(j)},z=r8(j.$response);if(z)$.retryAfterHint=z;return $},"getRetryErrorInfo"),Cz=L((j)=>{if(x.isThrottlingError(j))return"THROTTLING";if(x.isTransientError(j))return"TRANSIENT";if(x.isServerError(j))return"SERVER_ERROR";return"CLIENT_ERROR"},"getRetryErrorType"),n8={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Iz=L((j)=>({applyToStack:($)=>{$.add(a8(j),n8)}}),"getRetryPlugin"),r8=L((j)=>{if(!c.HttpResponse.isInstance(j))return;let $=Object.keys(j.headers).find((W)=>W.toLowerCase()==="retry-after");if(!$)return;let z=j.headers[$],Z=Number(z);if(!Number.isNaN(Z))return new Date(Z*1000);return new Date(z)},"getRetryAfterHint")});var uz=q((jZ,Qj)=>{var{defineProperty:D0,getOwnPropertyDescriptor:vz,getOwnPropertyNames:Rz}=Object,Sz=Object.prototype.hasOwnProperty,R=(j,$)=>D0(j,"name",{value:$,configurable:!0}),kz=(j,$)=>{for(var z in $)D0(j,z,{get:$[z],enumerable:!0})},Pz=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of Rz($))if(!Sz.call(j,Q)&&Q!==z)D0(j,Q,{get:()=>$[Q],enumerable:!(Z=vz($,Q))||Z.enumerable})}return j},Az=(j)=>Pz(D0({},"__esModule",{value:!0}),j),e8={};kz(e8,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>gz,NODE_REGION_CONFIG_OPTIONS:()=>yz,REGION_ENV_NAME:()=>jj,REGION_INI_NAME:()=>$j,getAwsRegionExtensionConfiguration:()=>xz,resolveAwsRegionExtensionConfiguration:()=>Ez,resolveRegionConfig:()=>fz});Qj.exports=Az(e8);var xz=R((j)=>{return{setRegion($){j.region=$},region(){return j.region}}},"getAwsRegionExtensionConfiguration"),Ez=R((j)=>{return{region:j.region()}},"resolveAwsRegionExtensionConfiguration"),jj="AWS_REGION",$j="region",yz={environmentVariableSelector:R((j)=>j[jj],"environmentVariableSelector"),configFileSelector:R((j)=>j[$j],"configFileSelector"),default:R(()=>{throw new Error("Region is missing")},"default")},gz={preferredFile:"credentials"},zj=R((j)=>typeof j==="string"&&(j.startsWith("fips-")||j.endsWith("-fips")),"isFipsRegion"),t8=R((j)=>zj(j)?["fips-aws-global","aws-fips"].includes(j)?"us-east-1":j.replace(/fips-(dkr-|prod-)?|-fips/,""):j,"getRealRegion"),fz=R((j)=>{let{region:$,useFipsEndpoint:z}=j;if(!$)throw new Error("Region is missing");return Object.assign(j,{region:R(async()=>{if(typeof $==="string")return t8($);let Z=await $();return t8(Z)},"region"),useFipsEndpoint:R(async()=>{let Z=typeof $==="string"?$:await $();if(zj(Z))return!0;return typeof z!=="function"?Promise.resolve(!!z):z()},"useFipsEndpoint")})},"resolveRegionConfig")});var dz=q(($Z,cz)=>{cz.exports={name:"@aws-sdk/nested-clients",version:"3.840.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.840.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.840.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.840.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.840.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.6.0","@smithy/fetch-http-handler":"^5.0.4","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.13","@smithy/middleware-retry":"^4.1.14","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.0.6","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.5","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.21","@smithy/util-defaults-mode-node":"^4.0.21","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var ez=q((zZ,Yj)=>{var{defineProperty:N0,getOwnPropertyDescriptor:lz,getOwnPropertyNames:_z}=Object,sz=Object.prototype.hasOwnProperty,h0=(j,$)=>N0(j,"name",{value:$,configurable:!0}),mz=(j,$)=>{for(var z in $)N0(j,z,{get:$[z],enumerable:!0})},pz=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of _z($))if(!sz.call(j,Q)&&Q!==z)N0(j,Q,{get:()=>$[Q],enumerable:!(Z=lz($,Q))||Z.enumerable})}return j},iz=(j)=>pz(N0({},"__esModule",{value:!0}),j),Wj={};mz(Wj,{NODE_APP_ID_CONFIG_OPTIONS:()=>tz,UA_APP_ID_ENV_NAME:()=>Kj,UA_APP_ID_INI_NAME:()=>Gj,createDefaultUserAgentProvider:()=>Jj,crtAvailability:()=>Xj,defaultUserAgent:()=>nz});Yj.exports=iz(Wj);var Zj=F("os"),J4=F("process"),Xj={isCrtAvailable:!1},az=h0(()=>{if(Xj.isCrtAvailable)return["md/crt-avail"];return null},"isCrtAvailable"),Jj=h0(({serviceId:j,clientVersion:$})=>{return async(z)=>{let Z=[["aws-sdk-js",$],["ua","2.1"],[`os/${Zj.platform()}`,Zj.release()],["lang/js"],["md/nodejs",`${J4.versions.node}`]],Q=az();if(Q)Z.push(Q);if(j)Z.push([`api/${j}`,$]);if(J4.env.AWS_EXECUTION_ENV)Z.push([`exec-env/${J4.env.AWS_EXECUTION_ENV}`]);let W=await z?.userAgentAppId?.();return W?[...Z,[`app/${W}`]]:[...Z]}},"createDefaultUserAgentProvider"),nz=Jj,rz=B1(),Kj="AWS_SDK_UA_APP_ID",Gj="sdk_ua_app_id",oz="sdk-ua-app-id",tz={environmentVariableSelector:h0((j)=>j[Kj],"environmentVariableSelector"),configFileSelector:h0((j)=>j[Gj]??j[oz],"configFileSelector"),default:rz.DEFAULT_UA_APP_ID}});var B9=q((QZ,Hj)=>{var{defineProperty:O0,getOwnPropertyDescriptor:z9,getOwnPropertyNames:Q9}=Object,Z9=Object.prototype.hasOwnProperty,qj=(j,$)=>O0(j,"name",{value:$,configurable:!0}),W9=(j,$)=>{for(var z in $)O0(j,z,{get:$[z],enumerable:!0})},X9=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of Q9($))if(!Z9.call(j,Q)&&Q!==z)O0(j,Q,{get:()=>$[Q],enumerable:!(Z=z9($,Q))||Z.enumerable})}return j},J9=(j)=>X9(O0({},"__esModule",{value:!0}),j),Vj={};W9(Vj,{Hash:()=>Y9});Hj.exports=J9(Vj);var K4=j9(),K9=$9(),G9=F("buffer"),Bj=F("crypto"),Y9=class{static{qj(this,"Hash")}constructor(j,$){this.algorithmIdentifier=j,this.secret=$,this.reset()}update(j,$){this.hash.update(K9.toUint8Array(G4(j,$)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?Bj.createHmac(this.algorithmIdentifier,G4(this.secret)):Bj.createHash(this.algorithmIdentifier)}};function G4(j,$){if(G9.Buffer.isBuffer(j))return j;if(typeof j==="string")return K4.fromString(j,$);if(ArrayBuffer.isView(j))return K4.fromArrayBuffer(j.buffer,j.byteOffset,j.byteLength);return K4.fromArrayBuffer(j)}qj(G4,"castSourceData")});var F9=q((WZ,Lj)=>{var{defineProperty:C0,getOwnPropertyDescriptor:q9,getOwnPropertyNames:V9}=Object,H9=Object.prototype.hasOwnProperty,w9=(j,$)=>C0(j,"name",{value:$,configurable:!0}),U9=(j,$)=>{for(var z in $)C0(j,z,{get:$[z],enumerable:!0})},L9=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of V9($))if(!H9.call(j,Q)&&Q!==z)C0(j,Q,{get:()=>$[Q],enumerable:!(Z=q9($,Q))||Z.enumerable})}return j},M9=(j)=>L9(C0({},"__esModule",{value:!0}),j),Uj={};U9(Uj,{calculateBodyLength:()=>b9});Lj.exports=M9(Uj);var wj=F("fs"),b9=w9((j)=>{if(!j)return 0;if(typeof j==="string")return Buffer.byteLength(j);else if(typeof j.byteLength==="number")return j.byteLength;else if(typeof j.size==="number")return j.size;else if(typeof j.start==="number"&&typeof j.end==="number")return j.end+1-j.start;else if(typeof j.path==="string"||Buffer.isBuffer(j.path))return wj.lstatSync(j.path).size;else if(typeof j.fd==="number")return wj.fstatSync(j.fd).size;throw new Error(`Body Length computation failed for ${j}`)},"calculateBodyLength")});var kj=q((XZ,Sj)=>{var{defineProperty:v0,getOwnPropertyDescriptor:D9,getOwnPropertyNames:h9}=Object,N9=Object.prototype.hasOwnProperty,M=(j,$)=>v0(j,"name",{value:$,configurable:!0}),O9=(j,$)=>{for(var z in $)v0(j,z,{get:$[z],enumerable:!0})},C9=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of h9($))if(!N9.call(j,Q)&&Q!==z)v0(j,Q,{get:()=>$[Q],enumerable:!(Z=D9($,Q))||Z.enumerable})}return j},I9=(j)=>C9(v0({},"__esModule",{value:!0}),j),Dj={};O9(Dj,{DEFAULT_MAX_RETRIES:()=>Cj,DEFAULT_TIMEOUT:()=>Oj,ENV_CMDS_AUTH_TOKEN:()=>q4,ENV_CMDS_FULL_URI:()=>I0,ENV_CMDS_RELATIVE_URI:()=>T0,Endpoint:()=>Ij,fromContainerMetadata:()=>S9,fromInstanceMetadata:()=>o9,getInstanceMetadataEndpoint:()=>vj,httpRequest:()=>d,providerConfigFromInit:()=>V4});Sj.exports=I9(Dj);var T9=F("url"),S=a0(),v9=F("buffer"),R9=F("http");function d(j){return new Promise(($,z)=>{let Z=R9.request({method:"GET",...j,hostname:j.hostname?.replace(/^\[(.+)\]$/,"$1")});Z.on("error",(Q)=>{z(Object.assign(new S.ProviderError("Unable to connect to instance metadata service"),Q)),Z.destroy()}),Z.on("timeout",()=>{z(new S.ProviderError("TimeoutError from instance metadata service")),Z.destroy()}),Z.on("response",(Q)=>{let{statusCode:W=400}=Q;if(W<200||300<=W)z(Object.assign(new S.ProviderError("Error response received from instance metadata service"),{statusCode:W})),Z.destroy();let X=[];Q.on("data",(J)=>{X.push(J)}),Q.on("end",()=>{$(v9.Buffer.concat(X)),Z.destroy()})}),Z.end()})}M(d,"httpRequest");var hj=M((j)=>Boolean(j)&&typeof j==="object"&&typeof j.AccessKeyId==="string"&&typeof j.SecretAccessKey==="string"&&typeof j.Token==="string"&&typeof j.Expiration==="string","isImdsCredentials"),Nj=M((j)=>({accessKeyId:j.AccessKeyId,secretAccessKey:j.SecretAccessKey,sessionToken:j.Token,expiration:new Date(j.Expiration),...j.AccountId&&{accountId:j.AccountId}}),"fromImdsCredentials"),Oj=1000,Cj=0,V4=M(({maxRetries:j=Cj,timeout:$=Oj})=>({maxRetries:j,timeout:$}),"providerConfigFromInit"),B4=M((j,$)=>{let z=j();for(let Z=0;Z<$;Z++)z=z.catch(j);return z},"retry"),I0="AWS_CONTAINER_CREDENTIALS_FULL_URI",T0="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",q4="AWS_CONTAINER_AUTHORIZATION_TOKEN",S9=M((j={})=>{let{timeout:$,maxRetries:z}=V4(j);return()=>B4(async()=>{let Z=await E9({logger:j.logger}),Q=JSON.parse(await k9($,Z));if(!hj(Q))throw new S.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:j.logger});return Nj(Q)},z)},"fromContainerMetadata"),k9=M(async(j,$)=>{if(process.env[q4])$.headers={...$.headers,Authorization:process.env[q4]};return(await d({...$,timeout:j})).toString()},"requestFromEcsImds"),P9="169.254.170.2",A9={localhost:!0,"127.0.0.1":!0},x9={"http:":!0,"https:":!0},E9=M(async({logger:j})=>{if(process.env[T0])return{hostname:P9,path:process.env[T0]};if(process.env[I0]){let $=T9.parse(process.env[I0]);if(!$.hostname||!($.hostname in A9))throw new S.CredentialsProviderError(`${$.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:j});if(!$.protocol||!($.protocol in x9))throw new S.CredentialsProviderError(`${$.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:j});return{...$,port:$.port?parseInt($.port,10):void 0}}throw new S.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${T0} or ${I0} environment variable is set`,{tryNextLink:!1,logger:j})},"getCmdsUri"),y9=class j extends S.CredentialsProviderError{constructor($,z=!0){super($,z);this.tryNextLink=z,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,j.prototype)}static{M(this,"InstanceMetadataV1FallbackError")}},H4=V0(),g9=o0(),Ij=((j)=>{return j.IPv4="http://169.254.169.254",j.IPv6="http://[fd00:ec2::254]",j})(Ij||{}),f9="AWS_EC2_METADATA_SERVICE_ENDPOINT",u9="ec2_metadata_service_endpoint",c9={environmentVariableSelector:(j)=>j[f9],configFileSelector:(j)=>j[u9],default:void 0},Tj=((j)=>{return j.IPv4="IPv4",j.IPv6="IPv6",j})(Tj||{}),d9="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",l9="ec2_metadata_service_endpoint_mode",_9={environmentVariableSelector:(j)=>j[d9],configFileSelector:(j)=>j[l9],default:"IPv4"},vj=M(async()=>g9.parseUrl(await s9()||await m9()),"getInstanceMetadataEndpoint"),s9=M(async()=>H4.loadConfig(c9)(),"getFromEndpointConfig"),m9=M(async()=>{let j=await H4.loadConfig(_9)();switch(j){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${j}. Select from ${Object.values(Tj)}`)}},"getFromEndpointModeConfig"),p9=300,i9=300,a9="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Mj=M((j,$)=>{let z=p9+Math.floor(Math.random()*i9),Z=new Date(Date.now()+z*1000);$.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(Z)}.
For more information, please visit: `+a9);let Q=j.originalExpiration??j.expiration;return{...j,...Q?{originalExpiration:Q}:{},expiration:Z}},"getExtendedInstanceMetadataCredentials"),n9=M((j,$={})=>{let z=$?.logger||console,Z;return async()=>{let Q;try{if(Q=await j(),Q.expiration&&Q.expiration.getTime()<Date.now())Q=Mj(Q,z)}catch(W){if(Z)z.warn("Credential renew failed: ",W),Q=Mj(Z,z);else throw W}return Z=Q,Q}},"staticStabilityProvider"),Rj="/latest/meta-data/iam/security-credentials/",r9="/latest/api/token",Y4="AWS_EC2_METADATA_V1_DISABLED",bj="ec2_metadata_v1_disabled",Fj="x-aws-ec2-metadata-token",o9=M((j={})=>n9(t9(j),{logger:j.logger}),"fromInstanceMetadata"),t9=M((j={})=>{let $=!1,{logger:z,profile:Z}=j,{timeout:Q,maxRetries:W}=V4(j),X=M(async(J,K)=>{if($||K.headers?.[Fj]==null){let Y=!1,B=!1,b=await H4.loadConfig({environmentVariableSelector:(D)=>{let C=D[Y4];if(B=!!C&&C!=="false",C===void 0)throw new S.CredentialsProviderError(`${Y4} not set in env, checking config file next.`,{logger:j.logger});return B},configFileSelector:(D)=>{let C=D[bj];return Y=!!C&&C!=="false",Y},default:!1},{profile:Z})();if(j.ec2MetadataV1Disabled||b){let D=[];if(j.ec2MetadataV1Disabled)D.push("credential provider initialization (runtime option ec2MetadataV1Disabled)");if(Y)D.push(`config file profile (${bj})`);if(B)D.push(`process environment variable (${Y4})`);throw new y9(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${D.join(", ")}].`)}}let V=(await B4(async()=>{let Y;try{Y=await jQ(K)}catch(B){if(B.statusCode===401)$=!1;throw B}return Y},J)).trim();return B4(async()=>{let Y;try{Y=await $Q(V,K,j)}catch(B){if(B.statusCode===401)$=!1;throw B}return Y},J)},"getCredentials");return async()=>{let J=await vj();if($)return z?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),X(W,{...J,timeout:Q});else{let K;try{K=(await e9({...J,timeout:Q})).toString()}catch(G){if(G?.statusCode===400)throw Object.assign(G,{message:"EC2 Metadata token request returned error"});else if(G.message==="TimeoutError"||[403,404,405].includes(G.statusCode))$=!0;return z?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),X(W,{...J,timeout:Q})}return X(W,{...J,headers:{[Fj]:K},timeout:Q})}}},"getInstanceMetadataProvider"),e9=M(async(j)=>d({...j,path:r9,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),jQ=M(async(j)=>(await d({...j,path:Rj})).toString(),"getProfile"),$Q=M(async(j,$,z)=>{let Z=JSON.parse((await d({...$,path:Rj+j})).toString());if(!hj(Z))throw new S.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:z.logger});return Nj(Z)},"getCredentialsFromProfile")});var hQ=q((JZ,gj)=>{var{create:zQ,defineProperty:a,getOwnPropertyDescriptor:QQ,getOwnPropertyNames:ZQ,getPrototypeOf:WQ}=Object,XQ=Object.prototype.hasOwnProperty,w4=(j,$)=>a(j,"name",{value:$,configurable:!0}),JQ=(j,$)=>{for(var z in $)a(j,z,{get:$[z],enumerable:!0})},Ej=(j,$,z,Z)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Q of ZQ($))if(!XQ.call(j,Q)&&Q!==z)a(j,Q,{get:()=>$[Q],enumerable:!(Z=QQ($,Q))||Z.enumerable})}return j},KQ=(j,$,z)=>(z=j!=null?zQ(WQ(j)):{},Ej($||!j||!j.__esModule?a(z,"default",{value:j,enumerable:!0}):z,j)),GQ=(j)=>Ej(a({},"__esModule",{value:!0}),j),yj={};JQ(yj,{resolveDefaultsModeConfig:()=>bQ});gj.exports=GQ(yj);var YQ=v1(),Pj=V0(),BQ=a0(),qQ="AWS_EXECUTION_ENV",Aj="AWS_REGION",xj="AWS_DEFAULT_REGION",VQ="AWS_EC2_METADATA_DISABLED",HQ=["in-region","cross-region","mobile","standard","legacy"],wQ="/latest/meta-data/placement/region",UQ="AWS_DEFAULTS_MODE",LQ="defaults_mode",MQ={environmentVariableSelector:(j)=>{return j[UQ]},configFileSelector:(j)=>{return j[LQ]},default:"legacy"},bQ=w4(({region:j=Pj.loadConfig(YQ.NODE_REGION_CONFIG_OPTIONS),defaultsMode:$=Pj.loadConfig(MQ)}={})=>BQ.memoize(async()=>{let z=typeof $==="function"?await $():$;switch(z?.toLowerCase()){case"auto":return FQ(j);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(z?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${HQ.join(", ")}, got ${z}`)}}),"resolveDefaultsModeConfig"),FQ=w4(async(j)=>{if(j){let $=typeof j==="function"?await j():j,z=await DQ();if(!z)return"standard";if($===z)return"in-region";else return"cross-region"}return"standard"},"resolveNodeDefaultsModeAuto"),DQ=w4(async()=>{if(process.env[qQ]&&(process.env[Aj]||process.env[xj]))return process.env[Aj]??process.env[xj];if(!process.env[VQ])try{let{getInstanceMetadataEndpoint:j,httpRequest:$}=await Promise.resolve().then(()=>KQ(kj())),z=await j();return(await $({...z,path:wQ})).toString()}catch(j){}},"inferPhysicalRegion")});
export{nj as Vb,Q6 as Wb,H6 as Xb,c4 as Yb,o4 as Zb,B1 as _b,v1 as $b,a5 as ac,V0 as bc,o0 as cc,v7 as dc,A8 as ec,Tz as fc,dz as gc,ez as hc,B9 as ic,F9 as jc,hQ as kc,uz as lc};
