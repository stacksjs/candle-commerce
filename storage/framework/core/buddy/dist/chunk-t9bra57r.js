// @bun
import{$b as Al,Vb as kI,Wb as LI,Xb as WI,Yb as bd,Zb as fd,_b as YI,ac as JI,bc as dI,cc as id,dc as E1,ec as II,fc as Vl,gc as EI,hc as PI,ic as SI,jc as DI,kc as NI,lc as VI}from"./chunk-5em1jyt2.js";import{Bd as _,Cd as m,xd as il,yd as l1,zd as lI}from"./chunk-4r5aqn27.js";import{Ed as Bd,Fd as $l,Id as md,Jd as Cd,Ld as td}from"./chunk-dwjxgeh3.js";import"./chunk-19q2jx2t.js";import{he as bI}from"./chunk-jvc6fwyc.js";import{le as V}from"./chunk-2g57f3kb.js";var o=V((H1)=>{Object.defineProperty(H1,"__esModule",{value:!0});H1.resolveHttpAuthSchemeConfig=H1.resolveStsAuthConfig=H1.defaultSTSHttpAuthSchemeProvider=H1.defaultSTSHttpAuthSchemeParametersProvider=void 0;var kd=m(),c=Bd(),Ld=O(),Wd=async(l,I,d)=>{return{operation:c.getSmithyContext(I).operation,region:await c.normalizeProvider(l.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};H1.defaultSTSHttpAuthSchemeParametersProvider=Wd;function Yd(l){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:l.region},propertiesExtractor:(I,d)=>({signingProperties:{config:I,context:d}})}}function Jd(l){return{schemeId:"smithy.api#noAuth"}}var Kd=(l)=>{let I=[];switch(l.operation){case"AssumeRoleWithWebIdentity":{I.push(Jd(l));break}default:I.push(Yd(l))}return I};H1.defaultSTSHttpAuthSchemeProvider=Kd;var Xd=(l)=>Object.assign(l,{stsClientCtor:Ld.STSClient});H1.resolveStsAuthConfig=Xd;var Qd=(l)=>{let I=H1.resolveStsAuthConfig(l),d=kd.resolveAwsSdkSigV4Config(I);return Object.assign(d,{authSchemePreference:c.normalizeProvider(l.authSchemePreference??[])})};H1.resolveHttpAuthSchemeConfig=Qd});var s=V((f1)=>{Object.defineProperty(f1,"__esModule",{value:!0});f1.commonParams=f1.resolveClientEndpointParameters=void 0;var jd=(l)=>{return Object.assign(l,{useDualstackEndpoint:l.useDualstackEndpoint??!1,useFipsEndpoint:l.useFipsEndpoint??!1,useGlobalEndpoint:l.useGlobalEndpoint??!1,defaultSigningName:"sts"})};f1.resolveClientEndpointParameters=jd;f1.commonParams={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var rl=V((Nl)=>{Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ruleSet=void 0;var p1="required",D="type",F="fn",r="argv",J="ref",O1=!1,n=!0,Y="booleanEquals",U="stringEquals",u1="sigv4",t1="sts",ll="us-east-1",w="endpoint",s1="https://sts.{Region}.{PartitionResult#dnsSuffix}",B="tree",Q="error",u="getAttr",g1={[p1]:!1,[D]:"String"},p={[p1]:!0,default:!1,[D]:"Boolean"},dl={[J]:"Endpoint"},m1={[F]:"isSet",[r]:[{[J]:"Region"}]},h={[J]:"Region"},C1={[F]:"aws.partition",[r]:[h],assign:"PartitionResult"},Il={[J]:"UseFIPS"},El={[J]:"UseDualStack"},G={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:u1,signingName:t1,signingRegion:ll}]},headers:{}},a={},i1={conditions:[{[F]:U,[r]:[h,"aws-global"]}],[w]:G,[D]:w},Pl={[F]:Y,[r]:[Il,!0]},Sl={[F]:Y,[r]:[El,!0]},x1={[F]:u,[r]:[{[J]:"PartitionResult"},"supportsFIPS"]},Dl={[J]:"PartitionResult"},e1={[F]:Y,[r]:[!0,{[F]:u,[r]:[Dl,"supportsDualStack"]}]},c1=[{[F]:"isSet",[r]:[dl]}],o1=[Pl],n1=[Sl],zd={version:"1.0",parameters:{Region:g1,UseDualStack:p,UseFIPS:p,Endpoint:g1,UseGlobalEndpoint:p},rules:[{conditions:[{[F]:Y,[r]:[{[J]:"UseGlobalEndpoint"},n]},{[F]:"not",[r]:c1},m1,C1,{[F]:Y,[r]:[Il,O1]},{[F]:Y,[r]:[El,O1]}],rules:[{conditions:[{[F]:U,[r]:[h,"ap-northeast-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"ap-south-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"ap-southeast-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"ap-southeast-2"]}],endpoint:G,[D]:w},i1,{conditions:[{[F]:U,[r]:[h,"ca-central-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"eu-central-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"eu-north-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"eu-west-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"eu-west-2"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"eu-west-3"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"sa-east-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,ll]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"us-east-2"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"us-west-1"]}],endpoint:G,[D]:w},{conditions:[{[F]:U,[r]:[h,"us-west-2"]}],endpoint:G,[D]:w},{endpoint:{url:s1,properties:{authSchemes:[{name:u1,signingName:t1,signingRegion:"{Region}"}]},headers:a},[D]:w}],[D]:B},{conditions:c1,rules:[{conditions:o1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[D]:Q},{conditions:n1,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[D]:Q},{endpoint:{url:dl,properties:a,headers:a},[D]:w}],[D]:B},{conditions:[m1],rules:[{conditions:[C1],rules:[{conditions:[Pl,Sl],rules:[{conditions:[{[F]:Y,[r]:[n,x1]},e1],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},[D]:w}],[D]:B},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[D]:Q}],[D]:B},{conditions:o1,rules:[{conditions:[{[F]:Y,[r]:[x1,n]}],rules:[{conditions:[{[F]:U,[r]:[{[F]:u,[r]:[Dl,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:a,headers:a},[D]:w},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},[D]:w}],[D]:B},{error:"FIPS is enabled but this partition does not support FIPS",[D]:Q}],[D]:B},{conditions:n1,rules:[{conditions:[e1],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},[D]:w}],[D]:B},{error:"DualStack is enabled but this partition does not support DualStack",[D]:Q}],[D]:B},i1,{endpoint:{url:s1,properties:a,headers:a},[D]:w}],[D]:B}],[D]:B},{error:"Invalid Configuration: Missing Region",[D]:Q}]};Nl.ruleSet=zd});var wl=V((ql)=>{Object.defineProperty(ql,"__esModule",{value:!0});ql.defaultEndpointResolver=void 0;var yd=fd(),t=bd(),Od=rl(),sd=new t.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),gd=(l,I={})=>{return sd.get(l,()=>t.resolveEndpoint(Od.ruleSet,{endpointParams:l,logger:I.logger}))};ql.defaultEndpointResolver=gd;t.customEndpointFunctions.aws=yd.awsEndpointFunctions});var Ml=V((hl)=>{Object.defineProperty(hl,"__esModule",{value:!0});hl.getRuntimeConfig=void 0;var xd=m(),ed=l1(),cd=_(),od=id(),Rl=Cd(),Ul=md(),nd=o(),pd=wl(),ud=(l)=>{return{apiVersion:"2011-06-15",base64Decoder:l?.base64Decoder??Rl.fromBase64,base64Encoder:l?.base64Encoder??Rl.toBase64,disableHostPrefix:l?.disableHostPrefix??!1,endpointProvider:l?.endpointProvider??pd.defaultEndpointResolver,extensions:l?.extensions??[],httpAuthSchemeProvider:l?.httpAuthSchemeProvider??nd.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:l?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(I)=>I.getIdentityProvider("aws.auth#sigv4"),signer:new xd.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(I)=>I.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ed.NoAuthSigner}],logger:l?.logger??new cd.NoOpLogger,serviceId:l?.serviceId??"STS",urlParser:l?.urlParser??od.parseUrl,utf8Decoder:l?.utf8Decoder??Ul.fromUtf8,utf8Encoder:l?.utf8Encoder??Ul.toUtf8}};hl.getRuntimeConfig=ud});var Ll=V((Bl)=>{Object.defineProperty(Bl,"__esModule",{value:!0});Bl.getRuntimeConfig=void 0;var FI=lI(),rI=FI.__importDefault(EI()),d1=m(),al=PI(),C=Al(),qI=l1(),vI=SI(),_l=Vl(),K=dI(),Tl=td(),wI=DI(),RI=II(),UI=Ml(),hI=_(),GI=NI(),MI=_(),aI=(l)=>{MI.emitWarningIfUnsupportedVersion(process.version);let I=GI.resolveDefaultsModeConfig(l),d=()=>I().then(hI.loadConfigsForDefaultMode),P=UI.getRuntimeConfig(l);d1.emitWarningIfUnsupportedVersion(process.version);let E={profile:l?.profile,logger:P.logger};return{...P,...l,runtime:"node",defaultsMode:I,authSchemePreference:l?.authSchemePreference??K.loadConfig(d1.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,E),bodyLengthChecker:l?.bodyLengthChecker??wI.calculateBodyLength,defaultUserAgentProvider:l?.defaultUserAgentProvider??al.createDefaultUserAgentProvider({serviceId:P.serviceId,clientVersion:rI.default.version}),httpAuthSchemes:l?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(q)=>q.getIdentityProvider("aws.auth#sigv4")||(async(N)=>await l.credentialDefaultProvider(N?.__config||{})()),signer:new d1.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(q)=>q.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new qI.NoAuthSigner}],maxAttempts:l?.maxAttempts??K.loadConfig(_l.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,l),region:l?.region??K.loadConfig(C.NODE_REGION_CONFIG_OPTIONS,{...C.NODE_REGION_CONFIG_FILE_OPTIONS,...E}),requestHandler:Tl.NodeHttpHandler.create(l?.requestHandler??d),retryMode:l?.retryMode??K.loadConfig({..._l.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await d()).retryMode||RI.DEFAULT_RETRY_MODE},l),sha256:l?.sha256??vI.Hash.bind(null,"sha256"),streamCollector:l?.streamCollector??Tl.streamCollector,useDualstackEndpoint:l?.useDualstackEndpoint??K.loadConfig(C.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,E),useFipsEndpoint:l?.useFipsEndpoint??K.loadConfig(C.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,E),userAgentAppId:l?.userAgentAppId??K.loadConfig(al.NODE_APP_ID_CONFIG_OPTIONS,E)}};Bl.getRuntimeConfig=aI});var Jl=V((Wl)=>{Object.defineProperty(Wl,"__esModule",{value:!0});Wl.resolveHttpAuthRuntimeConfig=Wl.getHttpAuthExtensionConfiguration=void 0;var _I=(l)=>{let{httpAuthSchemes:I,httpAuthSchemeProvider:d,credentials:P}=l;return{setHttpAuthScheme(E){let q=I.findIndex((N)=>N.schemeId===E.schemeId);if(q===-1)I.push(E);else I.splice(q,1,E)},httpAuthSchemes(){return I},setHttpAuthSchemeProvider(E){d=E},httpAuthSchemeProvider(){return d},setCredentials(E){P=E},credentials(){return P}}};Wl.getHttpAuthExtensionConfiguration=_I;var TI=(l)=>{return{httpAuthSchemes:l.httpAuthSchemes(),httpAuthSchemeProvider:l.httpAuthSchemeProvider(),credentials:l.credentials()}};Wl.resolveHttpAuthRuntimeConfig=TI});var zl=V((jl)=>{Object.defineProperty(jl,"__esModule",{value:!0});jl.resolveRuntimeExtensions=void 0;var Kl=VI(),Xl=$l(),Ql=_(),Zl=Jl(),BI=(l,I)=>{let d=Object.assign(Kl.getAwsRegionExtensionConfiguration(l),Ql.getDefaultExtensionConfiguration(l),Xl.getHttpHandlerExtensionConfiguration(l),Zl.getHttpAuthExtensionConfiguration(l));return I.forEach((P)=>P.configure(d)),Object.assign(l,Kl.resolveAwsRegionExtensionConfiguration(d),Ql.resolveDefaultRuntimeConfig(d),Xl.resolveHttpHandlerRuntimeConfig(d),Zl.resolveHttpAuthRuntimeConfig(d))};jl.resolveRuntimeExtensions=BI});var O=V((P1)=>{Object.defineProperty(P1,"__esModule",{value:!0});P1.STSClient=P1.__Client=void 0;var bl=kI(),KI=LI(),XI=WI(),fl=YI(),QI=Al(),I1=l1(),ZI=JI(),$I=E1(),yl=Vl(),sl=_();Object.defineProperty(P1,"__Client",{enumerable:!0,get:function(){return sl.Client}});var Ol=o(),jI=s(),HI=Ll(),zI=zl();class gl extends sl.Client{config;constructor(...[l]){let I=HI.getRuntimeConfig(l||{});super(I);this.initConfig=I;let d=jI.resolveClientEndpointParameters(I),P=fl.resolveUserAgentConfig(d),E=yl.resolveRetryConfig(P),q=QI.resolveRegionConfig(E),N=bl.resolveHostHeaderConfig(q),M=$I.resolveEndpointConfig(N),T=Ol.resolveHttpAuthSchemeConfig(M),A=zI.resolveRuntimeExtensions(T,l?.extensions||[]);this.config=A,this.middlewareStack.use(fl.getUserAgentPlugin(this.config)),this.middlewareStack.use(yl.getRetryPlugin(this.config)),this.middlewareStack.use(ZI.getContentLengthPlugin(this.config)),this.middlewareStack.use(bl.getHostHeaderPlugin(this.config)),this.middlewareStack.use(KI.getLoggerPlugin(this.config)),this.middlewareStack.use(XI.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(I1.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Ol.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(X)=>new I1.DefaultIdentityProviderConfig({"aws.auth#sigv4":X.credentials})})),this.middlewareStack.use(I1.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}P1.STSClient=gl});var yE=V((nE,j1)=>{var{defineProperty:i,getOwnPropertyDescriptor:fI,getOwnPropertyNames:yI}=Object,OI=Object.prototype.hasOwnProperty,S=(l,I)=>i(l,"name",{value:I,configurable:!0}),sI=(l,I)=>{for(var d in I)i(l,d,{get:I[d],enumerable:!0})},Y1=(l,I,d,P)=>{if(I&&typeof I==="object"||typeof I==="function"){for(let E of yI(I))if(!OI.call(l,E)&&E!==d)i(l,E,{get:()=>I[E],enumerable:!(P=fI(I,E))||P.enumerable})}return l},gI=(l,I,d)=>(Y1(l,I,"default"),d&&Y1(d,I,"default")),mI=(l)=>Y1(i({},"__esModule",{value:!0}),l),K1={};sI(K1,{AssumeRoleCommand:()=>Z1,AssumeRoleResponseFilterSensitiveLog:()=>el,AssumeRoleWithWebIdentityCommand:()=>$1,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>ld,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>dd,ClientInputEndpointParameters:()=>HE.ClientInputEndpointParameters,CredentialsFilterSensitiveLog:()=>X1,ExpiredTokenException:()=>cl,IDPCommunicationErrorException:()=>Id,IDPRejectedClaimException:()=>ul,InvalidIdentityTokenException:()=>tl,MalformedPolicyDocumentException:()=>ol,PackedPolicyTooLargeException:()=>nl,RegionDisabledException:()=>pl,STS:()=>Rd,STSServiceException:()=>L,decorateDefaultCredentialProvider:()=>fE,getDefaultRoleAssumer:()=>_d,getDefaultRoleAssumerWithWebIdentity:()=>Td});j1.exports=mI(K1);gI(K1,O(),j1.exports);var CI=_(),iI=E1(),xI=il(),eI=_(),cI=s(),xl=_(),oI=_(),L=class l extends oI.ServiceException{static{S(this,"STSServiceException")}constructor(I){super(I);Object.setPrototypeOf(this,l.prototype)}},X1=S((l)=>({...l,...l.SecretAccessKey&&{SecretAccessKey:xl.SENSITIVE_STRING}}),"CredentialsFilterSensitiveLog"),el=S((l)=>({...l,...l.Credentials&&{Credentials:X1(l.Credentials)}}),"AssumeRoleResponseFilterSensitiveLog"),cl=class l extends L{static{S(this,"ExpiredTokenException")}name="ExpiredTokenException";$fault="client";constructor(I){super({name:"ExpiredTokenException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},ol=class l extends L{static{S(this,"MalformedPolicyDocumentException")}name="MalformedPolicyDocumentException";$fault="client";constructor(I){super({name:"MalformedPolicyDocumentException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},nl=class l extends L{static{S(this,"PackedPolicyTooLargeException")}name="PackedPolicyTooLargeException";$fault="client";constructor(I){super({name:"PackedPolicyTooLargeException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},pl=class l extends L{static{S(this,"RegionDisabledException")}name="RegionDisabledException";$fault="client";constructor(I){super({name:"RegionDisabledException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},ul=class l extends L{static{S(this,"IDPRejectedClaimException")}name="IDPRejectedClaimException";$fault="client";constructor(I){super({name:"IDPRejectedClaimException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},tl=class l extends L{static{S(this,"InvalidIdentityTokenException")}name="InvalidIdentityTokenException";$fault="client";constructor(I){super({name:"InvalidIdentityTokenException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},ld=S((l)=>({...l,...l.WebIdentityToken&&{WebIdentityToken:xl.SENSITIVE_STRING}}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog"),dd=S((l)=>({...l,...l.Credentials&&{Credentials:X1(l.Credentials)}}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog"),Id=class l extends L{static{S(this,"IDPCommunicationErrorException")}name="IDPCommunicationErrorException";$fault="client";constructor(I){super({name:"IDPCommunicationErrorException",$fault:"client",...I});Object.setPrototypeOf(this,l.prototype)}},Q1=m(),nI=$l(),v=_(),pI=S(async(l,I)=>{let d=Fd,P;return P=wd({...FE(l,I),[qd]:WE,[vd]:rd}),Nd(I,d,"/",void 0,P)},"se_AssumeRoleCommand"),uI=S(async(l,I)=>{let d=Fd,P;return P=wd({...rE(l,I),[qd]:YE,[vd]:rd}),Nd(I,d,"/",void 0,P)},"se_AssumeRoleWithWebIdentityCommand"),tI=S(async(l,I)=>{if(l.statusCode>=300)return Ed(l,I);let d=await Q1.parseXmlBody(l.body,I),P={};return P=GE(d.AssumeRoleResult,I),{$metadata:W(l),...P}},"de_AssumeRoleCommand"),lE=S(async(l,I)=>{if(l.statusCode>=300)return Ed(l,I);let d=await Q1.parseXmlBody(l.body,I),P={};return P=ME(d.AssumeRoleWithWebIdentityResult,I),{$metadata:W(l),...P}},"de_AssumeRoleWithWebIdentityCommand"),Ed=S(async(l,I)=>{let d={...l,body:await Q1.parseXmlErrorBody(l.body,I)},P=JE(l,d.body);switch(P){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await dE(d,I);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await SE(d,I);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await DE(d,I);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await NE(d,I);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await IE(d,I);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await EE(d,I);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await PE(d,I);default:let E=d.body;return LE({output:l,parsedBody:E.Error,errorCode:P})}},"de_CommandError"),dE=S(async(l,I)=>{let d=l.body,P=aE(d.Error,I),E=new cl({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_ExpiredTokenExceptionRes"),IE=S(async(l,I)=>{let d=l.body,P=_E(d.Error,I),E=new Id({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_IDPCommunicationErrorExceptionRes"),EE=S(async(l,I)=>{let d=l.body,P=TE(d.Error,I),E=new ul({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_IDPRejectedClaimExceptionRes"),PE=S(async(l,I)=>{let d=l.body,P=AE(d.Error,I),E=new tl({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_InvalidIdentityTokenExceptionRes"),SE=S(async(l,I)=>{let d=l.body,P=VE(d.Error,I),E=new ol({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_MalformedPolicyDocumentExceptionRes"),DE=S(async(l,I)=>{let d=l.body,P=BE(d.Error,I),E=new nl({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_PackedPolicyTooLargeExceptionRes"),NE=S(async(l,I)=>{let d=l.body,P=kE(d.Error,I),E=new pl({$metadata:W(l),...P});return v.decorateServiceException(E,d)},"de_RegionDisabledExceptionRes"),FE=S((l,I)=>{let d={};if(l[f]!=null)d[f]=l[f];if(l[y]!=null)d[y]=l[y];if(l[z]!=null){let P=Pd(l[z],I);if(l[z]?.length===0)d.PolicyArns=[];Object.entries(P).forEach(([E,q])=>{let N=`PolicyArns.${E}`;d[N]=q})}if(l[H]!=null)d[H]=l[H];if(l[j]!=null)d[j]=l[j];if(l[A1]!=null){let P=hE(l[A1],I);if(l[A1]?.length===0)d.Tags=[];Object.entries(P).forEach(([E,q])=>{let N=`Tags.${E}`;d[N]=q})}if(l[B1]!=null){let P=UE(l[B1],I);if(l[B1]?.length===0)d.TransitiveTagKeys=[];Object.entries(P).forEach(([E,q])=>{let N=`TransitiveTagKeys.${E}`;d[N]=q})}if(l[v1]!=null)d[v1]=l[v1];if(l[_1]!=null)d[_1]=l[_1];if(l[V1]!=null)d[V1]=l[V1];if(l[k]!=null)d[k]=l[k];if(l[U1]!=null){let P=wE(l[U1],I);if(l[U1]?.length===0)d.ProvidedContexts=[];Object.entries(P).forEach(([E,q])=>{let N=`ProvidedContexts.${E}`;d[N]=q})}return d},"se_AssumeRoleRequest"),rE=S((l,I)=>{let d={};if(l[f]!=null)d[f]=l[f];if(l[y]!=null)d[y]=l[y];if(l[L1]!=null)d[L1]=l[L1];if(l[h1]!=null)d[h1]=l[h1];if(l[z]!=null){let P=Pd(l[z],I);if(l[z]?.length===0)d.PolicyArns=[];Object.entries(P).forEach(([E,q])=>{let N=`PolicyArns.${E}`;d[N]=q})}if(l[H]!=null)d[H]=l[H];if(l[j]!=null)d[j]=l[j];return d},"se_AssumeRoleWithWebIdentityRequest"),Pd=S((l,I)=>{let d={},P=1;for(let E of l){if(E===null)continue;let q=qE(E,I);Object.entries(q).forEach(([N,M])=>{d[`member.${P}.${N}`]=M}),P++}return d},"se_policyDescriptorListType"),qE=S((l,I)=>{let d={};if(l[W1]!=null)d[W1]=l[W1];return d},"se_PolicyDescriptorType"),vE=S((l,I)=>{let d={};if(l[R1]!=null)d[R1]=l[R1];if(l[r1]!=null)d[r1]=l[r1];return d},"se_ProvidedContext"),wE=S((l,I)=>{let d={},P=1;for(let E of l){if(E===null)continue;let q=vE(E,I);Object.entries(q).forEach(([N,M])=>{d[`member.${P}.${N}`]=M}),P++}return d},"se_ProvidedContextsListType"),RE=S((l,I)=>{let d={};if(l[w1]!=null)d[w1]=l[w1];if(l[k1]!=null)d[k1]=l[k1];return d},"se_Tag"),UE=S((l,I)=>{let d={},P=1;for(let E of l){if(E===null)continue;d[`member.${P}`]=E,P++}return d},"se_tagKeyListType"),hE=S((l,I)=>{let d={},P=1;for(let E of l){if(E===null)continue;let q=RE(E,I);Object.entries(q).forEach(([N,M])=>{d[`member.${P}.${N}`]=M}),P++}return d},"se_tagListType"),Sd=S((l,I)=>{let d={};if(l[D1]!=null)d[D1]=v.expectString(l[D1]);if(l[N1]!=null)d[N1]=v.expectString(l[N1]);return d},"de_AssumedRoleUser"),GE=S((l,I)=>{let d={};if(l[$]!=null)d[$]=Dd(l[$],I);if(l[Z]!=null)d[Z]=Sd(l[Z],I);if(l[b]!=null)d[b]=v.strictParseInt32(l[b]);if(l[k]!=null)d[k]=v.expectString(l[k]);return d},"de_AssumeRoleResponse"),ME=S((l,I)=>{let d={};if(l[$]!=null)d[$]=Dd(l[$],I);if(l[a1]!=null)d[a1]=v.expectString(l[a1]);if(l[Z]!=null)d[Z]=Sd(l[Z],I);if(l[b]!=null)d[b]=v.strictParseInt32(l[b]);if(l[G1]!=null)d[G1]=v.expectString(l[G1]);if(l[F1]!=null)d[F1]=v.expectString(l[F1]);if(l[k]!=null)d[k]=v.expectString(l[k]);return d},"de_AssumeRoleWithWebIdentityResponse"),Dd=S((l,I)=>{let d={};if(l[S1]!=null)d[S1]=v.expectString(l[S1]);if(l[M1]!=null)d[M1]=v.expectString(l[M1]);if(l[T1]!=null)d[T1]=v.expectString(l[T1]);if(l[q1]!=null)d[q1]=v.expectNonNull(v.parseRfc3339DateTimeWithOffset(l[q1]));return d},"de_Credentials"),aE=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_ExpiredTokenException"),_E=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_IDPCommunicationErrorException"),TE=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_IDPRejectedClaimException"),AE=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_InvalidIdentityTokenException"),VE=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_MalformedPolicyDocumentException"),BE=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_PackedPolicyTooLargeException"),kE=S((l,I)=>{let d={};if(l[R]!=null)d[R]=v.expectString(l[R]);return d},"de_RegionDisabledException"),W=S((l)=>({httpStatusCode:l.statusCode,requestId:l.headers["x-amzn-requestid"]??l.headers["x-amzn-request-id"]??l.headers["x-amz-request-id"],extendedRequestId:l.headers["x-amz-id-2"],cfId:l.headers["x-amz-cf-id"]}),"deserializeMetadata"),LE=v.withBaseException(L),Nd=S(async(l,I,d,P,E)=>{let{hostname:q,protocol:N="https",port:M,path:T}=await l.endpoint(),A={protocol:N,hostname:q,port:M,method:"POST",path:T.endsWith("/")?T.slice(0,-1)+d:T+d,headers:I};if(P!==void 0)A.hostname=P;if(E!==void 0)A.body=E;return new nI.HttpRequest(A)},"buildHttpRpcRequest"),Fd={"content-type":"application/x-www-form-urlencoded"},rd="2011-06-15",qd="Action",S1="AccessKeyId",WE="AssumeRole",D1="AssumedRoleId",Z="AssumedRoleUser",YE="AssumeRoleWithWebIdentity",N1="Arn",F1="Audience",$="Credentials",r1="ContextAssertion",j="DurationSeconds",q1="Expiration",v1="ExternalId",w1="Key",H="Policy",z="PolicyArns",R1="ProviderArn",U1="ProvidedContexts",h1="ProviderId",b="PackedPolicySize",G1="Provider",f="RoleArn",y="RoleSessionName",M1="SecretAccessKey",a1="SubjectFromWebIdentityToken",k="SourceIdentity",_1="SerialNumber",T1="SessionToken",A1="Tags",V1="TokenCode",B1="TransitiveTagKeys",vd="Version",k1="Value",L1="WebIdentityToken",W1="arn",R="message",wd=S((l)=>Object.entries(l).map(([I,d])=>v.extendedEncodeURIComponent(I)+"="+v.extendedEncodeURIComponent(d)).join("&"),"buildFormUrlencodedString"),JE=S((l,I)=>{if(I.Error?.Code!==void 0)return I.Error.Code;if(l.statusCode==404)return"NotFound"},"loadQueryErrorCode"),Z1=class extends eI.Command.classBuilder().ep(cI.commonParams).m(function(l,I,d,P){return[xI.getSerdePlugin(d,this.serialize,this.deserialize),iI.getEndpointPlugin(d,l.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,el).ser(pI).de(tI).build(){static{S(this,"AssumeRoleCommand")}},KE=E1(),XE=il(),QE=_(),ZE=s(),$1=class extends QE.Command.classBuilder().ep(ZE.commonParams).m(function(l,I,d,P){return[XE.getSerdePlugin(d,this.serialize,this.deserialize),KE.getEndpointPlugin(d,l.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(ld,dd).ser(uI).de(lE).build(){static{S(this,"AssumeRoleWithWebIdentityCommand")}},$E=O(),jE={AssumeRoleCommand:Z1,AssumeRoleWithWebIdentityCommand:$1},Rd=class extends $E.STSClient{static{S(this,"STS")}};CI.createAggregatedClient(jE,Rd);var HE=s(),J1=bI(),Cl="us-east-1",Ud=S((l)=>{if(typeof l?.Arn==="string"){let I=l.Arn.split(":");if(I.length>4&&I[4]!=="")return I[4]}return},"getAccountIdFromAssumedRoleUser"),hd=S(async(l,I,d)=>{let P=typeof l==="function"?await l():l,E=typeof I==="function"?await I():I;return d?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${P} (provider)`,`${E} (parent client)`,`${Cl} (STS default)`),P??E??Cl},"resolveRegion"),zE=S((l,I)=>{let d,P;return async(E,q)=>{if(P=E,!d){let{logger:X=l?.parentClientConfig?.logger,region:x,requestHandler:g=l?.parentClientConfig?.requestHandler,credentialProviderLogger:e}=l,Ad=await hd(x,l?.parentClientConfig?.region,e),Vd=!Gd(g);d=new I({profile:l?.parentClientConfig?.profile,credentialDefaultProvider:S(()=>async()=>P,"credentialDefaultProvider"),region:Ad,requestHandler:Vd?g:void 0,logger:X})}let{Credentials:N,AssumedRoleUser:M}=await d.send(new Z1(q));if(!N||!N.AccessKeyId||!N.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${q.RoleArn}`);let T=Ud(M),A={accessKeyId:N.AccessKeyId,secretAccessKey:N.SecretAccessKey,sessionToken:N.SessionToken,expiration:N.Expiration,...N.CredentialScope&&{credentialScope:N.CredentialScope},...T&&{accountId:T}};return J1.setCredentialFeature(A,"CREDENTIALS_STS_ASSUME_ROLE","i"),A}},"getDefaultRoleAssumer"),bE=S((l,I)=>{let d;return async(P)=>{if(!d){let{logger:T=l?.parentClientConfig?.logger,region:A,requestHandler:X=l?.parentClientConfig?.requestHandler,credentialProviderLogger:x}=l,g=await hd(A,l?.parentClientConfig?.region,x),e=!Gd(X);d=new I({profile:l?.parentClientConfig?.profile,region:g,requestHandler:e?X:void 0,logger:T})}let{Credentials:E,AssumedRoleUser:q}=await d.send(new $1(P));if(!E||!E.AccessKeyId||!E.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${P.RoleArn}`);let N=Ud(q),M={accessKeyId:E.AccessKeyId,secretAccessKey:E.SecretAccessKey,sessionToken:E.SessionToken,expiration:E.Expiration,...E.CredentialScope&&{credentialScope:E.CredentialScope},...N&&{accountId:N}};if(N)J1.setCredentialFeature(M,"RESOLVED_ACCOUNT_ID","T");return J1.setCredentialFeature(M,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),M}},"getDefaultRoleAssumerWithWebIdentity"),Gd=S((l)=>{return l?.metadata?.handlerProtocol==="h2"},"isH2"),Md=O(),ad=S((l,I)=>{if(!I)return l;else return class d extends l{static{S(this,"CustomizableSTSClient")}constructor(P){super(P);for(let E of I)this.middlewareStack.use(E)}}},"getCustomizableStsClientCtor"),_d=S((l={},I)=>zE(l,ad(Md.STSClient,I)),"getDefaultRoleAssumer"),Td=S((l={},I)=>bE(l,ad(Md.STSClient,I)),"getDefaultRoleAssumerWithWebIdentity"),fE=S((l)=>(I)=>l({roleAssumer:_d(I),roleAssumerWithWebIdentity:Td(I),...I}),"decorateDefaultCredentialProvider")});export default yE();
