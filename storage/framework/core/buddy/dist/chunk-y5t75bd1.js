import{Pd as ot,Qd as H}from"./chunk-dwjxgeh3.js";import{Zd as z}from"./chunk-19q2jx2t.js";import{ie as w,je as _,me as E}from"./chunk-2g57f3kb.js";var oe={};E(oe,{Client:()=>O});var k=(e,t)=>{let r=[];if(e)r.push(e);if(t)for(let o of t)r.push(o);return r},b=(e,t)=>{return`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`},$=()=>{let e=[],t=[],r=!1,o=new Set,s=(c)=>c.sort((f,d)=>te[d.step]-te[f.step]||re[d.priority||"normal"]-re[f.priority||"normal"]),n=(c)=>{let f=!1,d=(p)=>{let y=k(p.name,p.aliases);if(y.includes(c)){f=!0;for(let u of y)o.delete(u);return!1}return!0};return e=e.filter(d),t=t.filter(d),f},a=(c)=>{let f=!1,d=(p)=>{if(p.middleware===c){f=!0;for(let y of k(p.name,p.aliases))o.delete(y);return!1}return!0};return e=e.filter(d),t=t.filter(d),f},i=(c)=>{return e.forEach((f)=>{c.add(f.middleware,{...f})}),t.forEach((f)=>{c.addRelativeTo(f.middleware,{...f})}),c.identifyOnResolve?.(v.identifyOnResolve()),c},m=(c)=>{let f=[];return c.before.forEach((d)=>{if(d.before.length===0&&d.after.length===0)f.push(d);else f.push(...m(d))}),f.push(c),c.after.reverse().forEach((d)=>{if(d.before.length===0&&d.after.length===0)f.push(d);else f.push(...m(d))}),f},C=(c=!1)=>{let f=[],d=[],p={};return e.forEach((u)=>{let h={...u,before:[],after:[]};for(let l of k(h.name,h.aliases))p[l]=h;f.push(h)}),t.forEach((u)=>{let h={...u,before:[],after:[]};for(let l of k(h.name,h.aliases))p[l]=h;d.push(h)}),d.forEach((u)=>{if(u.toMiddleware){let h=p[u.toMiddleware];if(h===void 0){if(c)return;throw new Error(`${u.toMiddleware} is not found when adding ${b(u.name,u.aliases)} middleware ${u.relation} ${u.toMiddleware}`)}if(u.relation==="after")h.after.push(u);if(u.relation==="before")h.before.push(u)}}),s(f).map(m).reduce((u,h)=>{return u.push(...h),u},[])},v={add:(c,f={})=>{let{name:d,override:p,aliases:y}=f,u={step:"initialize",priority:"normal",middleware:c,...f},h=k(d,y);if(h.length>0){if(h.some((l)=>o.has(l))){if(!p)throw new Error(`Duplicate middleware name '${b(d,y)}'`);for(let l of h){let x=e.findIndex((R)=>R.name===l||R.aliases?.some((L)=>L===l));if(x===-1)continue;let S=e[x];if(S.step!==u.step||u.priority!==S.priority)throw new Error(`"${b(S.name,S.aliases)}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by "${b(d,y)}" middleware with ${u.priority} priority in ${u.step} step.`);e.splice(x,1)}}for(let l of h)o.add(l)}e.push(u)},addRelativeTo:(c,f)=>{let{name:d,override:p,aliases:y}=f,u={middleware:c,...f},h=k(d,y);if(h.length>0){if(h.some((l)=>o.has(l))){if(!p)throw new Error(`Duplicate middleware name '${b(d,y)}'`);for(let l of h){let x=t.findIndex((R)=>R.name===l||R.aliases?.some((L)=>L===l));if(x===-1)continue;let S=t[x];if(S.toMiddleware!==u.toMiddleware||S.relation!==u.relation)throw new Error(`"${b(S.name,S.aliases)}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by "${b(d,y)}" middleware ${u.relation} "${u.toMiddleware}" middleware.`);t.splice(x,1)}}for(let l of h)o.add(l)}t.push(u)},clone:()=>i($()),use:(c)=>{c.applyToStack(v)},remove:(c)=>{if(typeof c==="string")return n(c);else return a(c)},removeByTag:(c)=>{let f=!1,d=(p)=>{let{tags:y,name:u,aliases:h}=p;if(y&&y.includes(c)){let l=k(u,h);for(let x of l)o.delete(x);return f=!0,!1}return!0};return e=e.filter(d),t=t.filter(d),f},concat:(c)=>{let f=i($());return f.use(c),f.identifyOnResolve(r||f.identifyOnResolve()||(c.identifyOnResolve?.()??!1)),f},applyToStack:i,identify:()=>{return C(!0).map((c)=>{let f=c.step??c.relation+" "+c.toMiddleware;return b(c.name,c.aliases)+" - "+f})},identifyOnResolve(c){if(typeof c==="boolean")r=c;return r},resolve:(c,f)=>{for(let d of C().map((p)=>p.middleware).reverse())c=d(c,f);if(r)console.log(v.identify());return c}};return v},te={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},re={high:3,normal:2,low:1};class O{constructor(e){this.config=e,this.middlewareStack=$()}send(e,t,r){let o=typeof t!=="function"?t:void 0,s=typeof t==="function"?t:r,n=o===void 0&&this.config.cacheMiddleware===!0,a;if(n){if(!this.handlers)this.handlers=new WeakMap;let i=this.handlers;if(i.has(e.constructor))a=i.get(e.constructor);else a=e.resolveMiddleware(this.middlewareStack,this.config,o),i.set(e.constructor,a)}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,o);if(s)a(e).then((i)=>s(null,i.output),(i)=>s(i)).catch(()=>{});else return a(e).then((i)=>i.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var ie={};E(ie,{Command:()=>M});var se=_(z(),1);class M{constructor(){this.middlewareStack=$()}static classBuilder(){return new ne}resolveMiddlewareWithContext(e,t,r,{middlewareFn:o,clientName:s,commandName:n,inputFilterSensitiveLog:a,outputFilterSensitiveLog:i,smithyContext:m,additionalContext:C,CommandCtor:v}){for(let y of o.bind(this)(v,e,t,r))this.middlewareStack.use(y);let c=e.concat(this.middlewareStack),{logger:f}=t,d={logger:f,clientName:s,commandName:n,inputFilterSensitiveLog:a,outputFilterSensitiveLog:i,[se.SMITHY_CONTEXT_KEY]:{commandInstance:this,...m},...C},{requestHandler:p}=t;return c.resolve((y)=>p.handle(y.request,r||{}),d)}}class ne{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=(e)=>e,this._outputFilterSensitiveLog=(e)=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=(r)=>r,t=(r)=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,t;return t=class extends M{static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super();this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(r,o,s){return this.resolveMiddlewareWithContext(r,o,s,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}var g={};E(g,{withBaseException:()=>he,throwDefaultError:()=>D,take:()=>Fe,serializeFloat:()=>He,serializeDateTime:()=>Ue,resolvedPath:()=>G.resolvedPath,resolveDefaultRuntimeConfig:()=>ke,map:()=>Q,loadConfigsForDefaultMode:()=>pe,isSerializableHeaderValue:()=>Ie,getValueFromTextNode:()=>q,getDefaultExtensionConfiguration:()=>j,getDefaultClientConfiguration:()=>be,getArrayIfSingleItem:()=>Ae,extendedEncodeURIComponent:()=>B.extendedEncodeURIComponent,emitWarningIfUnsupportedVersion:()=>we,decorateServiceException:()=>P,createAggregatedClient:()=>le,convertMap:()=>Ne,collectBody:()=>U.collectBody,_json:()=>N,ServiceException:()=>A,SENSITIVE_STRING:()=>ce,NoOpLogger:()=>V,Command:()=>M,Client:()=>O});var ae={};E(ae,{collectBody:()=>U.collectBody});var U=_(H(),1);var fe={};E(fe,{SENSITIVE_STRING:()=>ce});var ce="***SensitiveInformation***";var de={};E(de,{createAggregatedClient:()=>le});var le=(e,t)=>{for(let r of Object.keys(e)){let o=e[r],s=async function(a,i,m){let C=new o(a);if(typeof i==="function")this.send(C,i);else if(typeof m==="function"){if(typeof i!=="object")throw new Error(`Expected http options but got ${typeof i}`);this.send(C,i||{},m)}else return this.send(C,i)},n=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[n]=s}};var me={};E(me,{withBaseException:()=>he,throwDefaultError:()=>D});var ue={};E(ue,{decorateServiceException:()=>P,ServiceException:()=>A});class A extends Error{constructor(e){super(e.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let t=e;return A.prototype.isPrototypeOf(t)||Boolean(t.$fault)&&Boolean(t.$metadata)&&(t.$fault==="client"||t.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let t=e;if(this===A)return A.isInstance(e);if(A.isInstance(e)){if(t.name&&this.name)return this.prototype.isPrototypeOf(e)||t.name===this.name;return this.prototype.isPrototypeOf(e)}return!1}}var P=(e,t={})=>{Object.entries(t).filter(([,o])=>o!==void 0).forEach(([o,s])=>{if(e[o]==null||e[o]==="")e[o]=s});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var D=({output:e,parsedBody:t,exceptionCtor:r,errorCode:o})=>{let s=Xe(e),n=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new r({name:t?.code||t?.Code||o||n||"UnknownError",$fault:"client",$metadata:s});throw P(a,t)},he=(e)=>{return({output:t,parsedBody:r,errorCode:o})=>{D({output:t,parsedBody:r,exceptionCtor:e,errorCode:o})}},Xe=(e)=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var ge={};E(ge,{loadConfigsForDefaultMode:()=>pe});var pe=(e)=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}};var Ee={};E(Ee,{emitWarningIfUnsupportedVersion:()=>we});var ye=!1,we=(e)=>{if(e&&!ye&&parseInt(e.substring(1,e.indexOf(".")))<16)ye=!0};var xe={};E(xe,{extendedEncodeURIComponent:()=>B.extendedEncodeURIComponent});var B=_(H(),1);var _e={};E(_e,{resolveDefaultRuntimeConfig:()=>ke,getDefaultExtensionConfiguration:()=>j,getDefaultClientConfiguration:()=>be});var W=_(z(),1);var Te=(e)=>{let t=[];for(let r in W.AlgorithmId){let o=W.AlgorithmId[r];if(e[o]===void 0)continue;t.push({algorithmId:()=>o,checksumConstructor:()=>e[o]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},Ce=(e)=>{let t={};return e.checksumAlgorithms().forEach((r)=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var Se=(e)=>{return{setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}},ve=(e)=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var j=(e)=>{return Object.assign(Te(e),Se(e))},be=j,ke=(e)=>{return Object.assign(Ce(e),ve(e))};var $e={};E($e,{getArrayIfSingleItem:()=>Ae});var Ae=(e)=>Array.isArray(e)?e:[e];var Re={};E(Re,{getValueFromTextNode:()=>q});var q=(e)=>{for(let r in e)if(e.hasOwnProperty(r)&&e[r]["#text"]!==void 0)e[r]=e[r]["#text"];else if(typeof e[r]==="object"&&e[r]!==null)e[r]=q(e[r]);return e};var Me={};E(Me,{isSerializableHeaderValue:()=>Ie});var Ie=(e)=>{return e!=null};var Pe={};E(Pe,{NoOpLogger:()=>V});class V{trace(){}debug(){}info(){}warn(){}error(){}}var Oe={};E(Oe,{take:()=>Fe,map:()=>Q,convertMap:()=>Ne});function Q(e,t,r){let o,s,n;if(typeof t==="undefined"&&typeof r==="undefined")o={},n=e;else if(o=e,typeof t==="function")return s=t,n=r,et(o,s,n);else n=t;for(let a of Object.keys(n)){if(!Array.isArray(n[a])){o[a]=n[a];continue}Le(o,null,n,a)}return o}var Ne=(e)=>{let t={};for(let[r,o]of Object.entries(e||{}))t[r]=[,o];return t},Fe=(e,t)=>{let r={};for(let o in t)Le(r,e,t,o);return r},et=(e,t,r)=>{return Q(e,Object.entries(r).reduce((o,[s,n])=>{if(Array.isArray(n))o[s]=n;else if(typeof n==="function")o[s]=[t,n()];else o[s]=[t,n];return o},{}))},Le=(e,t,r,o)=>{if(t!==null){let a=r[o];if(typeof a==="function")a=[,a];let[i=tt,m=rt,C=o]=a;if(typeof i==="function"&&i(t[C])||typeof i!=="function"&&!!i)e[o]=m(t[C]);return}let[s,n]=r[o];if(typeof n==="function"){let a,i=s===void 0&&(a=n())!=null,m=typeof s==="function"&&!!s(void 0)||typeof s!=="function"&&!!s;if(i)e[o]=a;else if(m)e[o]=n()}else{let a=s===void 0&&n!=null,i=typeof s==="function"&&!!s(n)||typeof s!=="function"&&!!s;if(a||i)e[o]=n}},tt=(e)=>e!=null,rt=(e)=>e;var ze={};E(ze,{resolvedPath:()=>G.resolvedPath});var G=_(H(),1);var De={};E(De,{serializeFloat:()=>He,serializeDateTime:()=>Ue});var He=(e)=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},Ue=(e)=>e.toISOString().replace(".000Z","Z");var Be={};E(Be,{_json:()=>N});var N=(e)=>{if(e==null)return{};if(Array.isArray(e))return e.filter((t)=>t!=null).map(N);if(typeof e==="object"){let t={};for(let r of Object.keys(e)){if(e[r]==null)continue;t[r]=N(e[r])}return t}return e};w(g,_(ot(),1));var Gt=(e)=>{return{setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}},Jt=(e)=>{return{httpHandler:e.httpHandler()}};var st=_(z(),1);class J{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let t=new J({...e,headers:{...e.headers}});if(t.query)t.query=nt(t.query);return t}static isInstance(e){if(!e)return!1;let t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query==="object"&&typeof t.headers==="object"}clone(){return J.clone(this)}}function nt(e){return Object.keys(e).reduce((t,r)=>{let o=e[r];return{...t,[r]:Array.isArray(o)?[...o]:o}},{})}class F{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let t=e;return typeof t.statusCode==="number"&&typeof t.headers==="object"}}var I=(e)=>encodeURIComponent(e).replace(/[!'()*]/g,it),it=(e)=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Y(e){let t=[];for(let r of Object.keys(e).sort()){let o=e[r];if(r=I(r),Array.isArray(o))for(let s=0,n=o.length;s<n;s++)t.push(`${r}=${I(o[s])}`);else{let s=r;if(o||typeof o==="string")s+=`=${I(o)}`;t.push(s)}}return t.join("&")}import{Agent as Ze,request as lt}from"http";import{Agent as Ke,request as dt}from"https";var We=["ECONNRESET","EPIPE","ETIMEDOUT"];var Z=(e)=>{let t={};for(let r of Object.keys(e)){let o=e[r];t[r]=Array.isArray(o)?o.join(","):o}return t};var T={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:(e)=>clearTimeout(e)};var je=1000,qe=(e,t,r=0)=>{if(!r)return-1;let o=(s)=>{let n=T.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-s),a=(i)=>{if(i?.connecting)i.on("connect",()=>{T.clearTimeout(n)});else T.clearTimeout(n)};if(e.socket)a(e.socket);else e.on("socket",a)};if(r<2000)return o(0),0;return T.setTimeout(o.bind(null,je),je)};var at=3000,Ve=(e,{keepAlive:t,keepAliveMsecs:r},o=at)=>{if(t!==!0)return-1;let s=()=>{if(e.socket)e.socket.setKeepAlive(t,r||0);else e.on("socket",(n)=>{n.setKeepAlive(t,r||0)})};if(o===0)return s(),0;return T.setTimeout(s,o)};var Qe=3000,Ge=(e,t,r=Je)=>{let o=(s)=>{let n=r-s,a=()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))};if(e.socket)e.socket.setTimeout(n,a),e.on("close",()=>e.socket?.removeListener("timeout",a));else e.setTimeout(n,a)};if(0<r&&r<6000)return o(0),0;return T.setTimeout(o.bind(null,r===0?0:Qe),Qe)};import{Readable as ct}from"stream";var Ye=6000;async function K(e,t,r=Ye){let o=t.headers??{},s=o.Expect||o.expect,n=-1,a=!0;if(s==="100-continue")a=await Promise.race([new Promise((i)=>{n=Number(T.setTimeout(()=>i(!0),Math.max(Ye,r)))}),new Promise((i)=>{e.on("continue",()=>{T.clearTimeout(n),i(!0)}),e.on("response",()=>{T.clearTimeout(n),i(!1)}),e.on("error",()=>{T.clearTimeout(n),i(!1)})})]);if(a)ft(e,t.body)}function ft(e,t){if(t instanceof ct){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t==="string"){e.end(t);return}let r=t;if(typeof r==="object"&&r.buffer&&typeof r.byteOffset==="number"&&typeof r.byteLength==="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var Je=0;class X{static create(e){if(typeof e?.handle==="function")return e;return new X(e)}static checkSocketUsage(e,t,r=console){let{sockets:o,requests:s,maxSockets:n}=e;if(typeof n!=="number"||n===1/0)return t;let a=15000;if(Date.now()-a<t)return t;if(o&&s)for(let i in o){let m=o[i]?.length??0,C=s[i]?.length??0;if(m>=n&&C>=2*n)return r?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${m} and ${C} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((t,r)=>{if(typeof e==="function")e().then((o)=>{t(this.resolveDefaultConfig(o))}).catch(r);else t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:r,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:n,httpsAgent:a}=e||{},i=!0,m=50;return{connectionTimeout:r,requestTimeout:t??o,socketAcquisitionWarningTimeout:s,httpAgent:(()=>{if(n instanceof Ze||typeof n?.destroy==="function")return n;return new Ze({keepAlive:!0,maxSockets:50,...n})})(),httpsAgent:(()=>{if(a instanceof Ke||typeof a?.destroy==="function")return a;return new Ke({keepAlive:!0,maxSockets:50,...a})})(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){if(!this.config)this.config=await this.configProvider;return new Promise((r,o)=>{let s=void 0,n=[],a=async(l)=>{await s,n.forEach(T.clearTimeout),r(l)},i=async(l)=>{await s,n.forEach(T.clearTimeout),o(l)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(t?.aborted){let l=new Error("Request aborted");l.name="AbortError",i(l);return}let m=e.protocol==="https:",C=m?this.config.httpsAgent:this.config.httpAgent;n.push(T.setTimeout(()=>{this.socketWarningTimestamp=X.checkSocketUsage(C,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2000)+(this.config.connectionTimeout??1000)));let v=Y(e.query||{}),c=void 0;if(e.username!=null||e.password!=null){let l=e.username??"",x=e.password??"";c=`${l}:${x}`}let f=e.path;if(v)f+=`?${v}`;if(e.fragment)f+=`#${e.fragment}`;let d=e.hostname??"";if(d[0]==="["&&d.endsWith("]"))d=e.hostname.slice(1,-1);else d=e.hostname;let p={headers:e.headers,host:d,method:e.method,path:f,port:e.port,agent:C,auth:c},u=(m?dt:lt)(p,(l)=>{let x=new F({statusCode:l.statusCode||-1,reason:l.statusMessage,headers:Z(l.headers),body:l});a({response:x})});if(u.on("error",(l)=>{if(We.includes(l.code))i(Object.assign(l,{name:"TimeoutError"}));else i(l)}),t){let l=()=>{u.destroy();let x=new Error("Request aborted");x.name="AbortError",i(x)};if(typeof t.addEventListener==="function"){let x=t;x.addEventListener("abort",l,{once:!0}),u.once("close",()=>x.removeEventListener("abort",l))}else t.onabort=l}n.push(qe(u,i,this.config.connectionTimeout)),n.push(Ge(u,i,this.config.requestTimeout));let h=p.agent;if(typeof h==="object"&&"keepAlive"in h)n.push(Ve(u,{keepAlive:h.keepAlive,keepAliveMsecs:h.keepAliveMsecs}));s=K(u,e,this.config.requestTimeout).catch((l)=>{return n.forEach(T.clearTimeout),o(l)})})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((r)=>{return{...r,[e]:t}})}httpHandlerConfigs(){return this.config??{}}}import{Writable as ut}from"stream";class ee extends ut{constructor(){super(...arguments);this.bufferedBytes=[]}_write(e,t,r){this.bufferedBytes.push(e),r()}}var io=(e)=>{if(ht(e))return mt(e);return new Promise((t,r)=>{let o=new ee;e.pipe(o),e.on("error",(s)=>{o.end(),r(s)}),o.on("error",r),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})})},ht=(e)=>typeof ReadableStream==="function"&&e instanceof ReadableStream;async function mt(e){let t=[],r=e.getReader(),o=!1,s=0;while(!o){let{done:i,value:m}=await r.read();if(m)t.push(m),s+=m.length;o=i}let n=new Uint8Array(s),a=0;for(let i of t)n.set(i,a),a+=i.length;return n}export{Gt as Yc,Jt as Zc,J as _c,F as $c,O as ad,U as bd,M as cd,ce as dd,le as ed,A as fd,P as gd,he as hd,pe as id,we as jd,B as kd,j as ld,ke as md,Ae as nd,Ie as od,V as pd,Q as qd,Fe as rd,Ue as sd,N as td,g as ud,X as vd,io as wd};
