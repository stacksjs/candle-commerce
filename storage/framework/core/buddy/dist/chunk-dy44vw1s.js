import{Od as u,Sd as w}from"./chunk-0gcz8bd6.js";import{_d as m}from"./chunk-mp45a05d.js";import{ae as s}from"./chunk-1krazvx7.js";var a=s(m(),1);var d=s(m(),1);function c(o){try{let e=new Set(Array.from(o.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch(e){return o}}var h=(o,e)=>async()=>{try{let t=o(process.env,e);if(t===void 0)throw new Error;return t}catch(t){throw new d.CredentialsProviderError(t.message||`Not found in ENV: ${c(o.toString())}`,{logger:e?.logger})}};var y=s(m(),1);var C=(o,{preferredFile:e="config",...t}={})=>async()=>{let r=u(t),{configFile:n,credentialsFile:i}=await w(t),f=i[r]||{},p=n[r]||{},E=e==="config"?{...f,...p}:{...p,...f};try{let g=o(E,e==="config"?n:i);if(g===void 0)throw new Error;return g}catch(l){throw new y.CredentialsProviderError(l.message||`Not found in config files w/ profile [${r}]: ${c(o.toString())}`,{logger:t.logger})}};var F=s(m(),1),v=(o)=>typeof o==="function",S=(o)=>v(o)?async()=>await o():F.fromStatic(o);var T=({environmentVariableSelector:o,configFileSelector:e,default:t},r={})=>{let{signingName:n,logger:i}=r;return a.memoize(a.chain(h(o,{signingName:n,logger:i}),C(e,r),S(t)))};function N(o){let e={};if(o=o.replace(/^\?/,""),o)for(let t of o.split("&")){let[r,n=null]=t.split("=");if(r=decodeURIComponent(r),n)n=decodeURIComponent(n);if(!(r in e))e[r]=n;else if(Array.isArray(e[r]))e[r].push(n);else e[r]=[e[r],n]}return e}var x=(o)=>{if(typeof o==="string")return x(new URL(o));let{hostname:e,pathname:t,port:r,protocol:n,search:i}=o,f;if(i)f=N(i);return{hostname:e,port:r?parseInt(r):void 0,protocol:n,path:t,query:f}};
export{T as Sc,x as Tc};
