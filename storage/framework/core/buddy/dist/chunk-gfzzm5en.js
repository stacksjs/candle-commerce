// @bun
import{je as eJ,le as G,oe as I}from"./chunk-2g57f3kb.js";var D=G((vE)=>{vE.fromCallback=function(q){return Object.defineProperty(function(...n){if(typeof n[n.length-1]==="function")q.apply(this,n);else return new Promise((E,y)=>{n.push((J,O)=>J!=null?y(J):E(O)),q.apply(this,n)})},"name",{value:q.name})};vE.fromPromise=function(q){return Object.defineProperty(function(...n){let E=n[n.length-1];if(typeof E!=="function")return q.apply(this,n);else n.pop(),q.apply(this,n).then((y)=>E(null,y),E)},"name",{value:q.name})}});var iq=G((_O,bq)=>{var o=I("constants"),gE=process.cwd,zq=null,bE=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!zq)zq=gE.call(process);return zq};try{process.cwd()}catch(q){}if(typeof process.chdir==="function"){if(Lq=process.chdir,process.chdir=function(q){zq=null,Lq.call(process,q)},Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,Lq)}var Lq;bq.exports=iE;function iE(q){if(o.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./))n(q);if(!q.lutimes)E(q);if(q.chown=O(q.chown),q.fchown=O(q.fchown),q.lchown=O(q.lchown),q.chmod=y(q.chmod),q.fchmod=y(q.fchmod),q.lchmod=y(q.lchmod),q.chownSync=V(q.chownSync),q.fchownSync=V(q.fchownSync),q.lchownSync=V(q.lchownSync),q.chmodSync=J(q.chmodSync),q.fchmodSync=J(q.fchmodSync),q.lchmodSync=J(q.lchmodSync),q.stat=x(q.stat),q.fstat=x(q.fstat),q.lstat=x(q.lstat),q.statSync=R(q.statSync),q.fstatSync=R(q.fstatSync),q.lstatSync=R(q.lstatSync),q.chmod&&!q.lchmod)q.lchmod=function(_,P,z){if(z)process.nextTick(z)},q.lchmodSync=function(){};if(q.chown&&!q.lchown)q.lchown=function(_,P,z,K){if(K)process.nextTick(K)},q.lchownSync=function(){};if(bE==="win32")q.rename=typeof q.rename!=="function"?q.rename:function(_){function P(z,K,L){var H=Date.now(),Z=0;_(z,K,function T(h){if(h&&(h.code==="EACCES"||h.code==="EPERM"||h.code==="EBUSY")&&Date.now()-H<60000){if(setTimeout(function(){q.stat(K,function(m,yq){if(m&&m.code==="ENOENT")_(z,K,T);else L(h)})},Z),Z<100)Z+=10;return}if(L)L(h)})}if(Object.setPrototypeOf)Object.setPrototypeOf(P,_);return P}(q.rename);q.read=typeof q.read!=="function"?q.read:function(_){function P(z,K,L,H,Z,T){var h;if(T&&typeof T==="function"){var m=0;h=function(yq,Sq,gq){if(yq&&yq.code==="EAGAIN"&&m<10)return m++,_.call(q,z,K,L,H,Z,h);T.apply(this,arguments)}}return _.call(q,z,K,L,H,Z,h)}if(Object.setPrototypeOf)Object.setPrototypeOf(P,_);return P}(q.read),q.readSync=typeof q.readSync!=="function"?q.readSync:function(_){return function(P,z,K,L,H){var Z=0;while(!0)try{return _.call(q,P,z,K,L,H)}catch(T){if(T.code==="EAGAIN"&&Z<10){Z++;continue}throw T}}}(q.readSync);function n(_){_.lchmod=function(P,z,K){_.open(P,o.O_WRONLY|o.O_SYMLINK,z,function(L,H){if(L){if(K)K(L);return}_.fchmod(H,z,function(Z){_.close(H,function(T){if(K)K(Z||T)})})})},_.lchmodSync=function(P,z){var K=_.openSync(P,o.O_WRONLY|o.O_SYMLINK,z),L=!0,H;try{H=_.fchmodSync(K,z),L=!1}finally{if(L)try{_.closeSync(K)}catch(Z){}else _.closeSync(K)}return H}}function E(_){if(o.hasOwnProperty("O_SYMLINK")&&_.futimes)_.lutimes=function(P,z,K,L){_.open(P,o.O_SYMLINK,function(H,Z){if(H){if(L)L(H);return}_.futimes(Z,z,K,function(T){_.close(Z,function(h){if(L)L(T||h)})})})},_.lutimesSync=function(P,z,K){var L=_.openSync(P,o.O_SYMLINK),H,Z=!0;try{H=_.futimesSync(L,z,K),Z=!1}finally{if(Z)try{_.closeSync(L)}catch(T){}else _.closeSync(L)}return H};else if(_.futimes)_.lutimes=function(P,z,K,L){if(L)process.nextTick(L)},_.lutimesSync=function(){}}function y(_){if(!_)return _;return function(P,z,K){return _.call(q,P,z,function(L){if($(L))L=null;if(K)K.apply(this,arguments)})}}function J(_){if(!_)return _;return function(P,z){try{return _.call(q,P,z)}catch(K){if(!$(K))throw K}}}function O(_){if(!_)return _;return function(P,z,K,L){return _.call(q,P,z,K,function(H){if($(H))H=null;if(L)L.apply(this,arguments)})}}function V(_){if(!_)return _;return function(P,z,K){try{return _.call(q,P,z,K)}catch(L){if(!$(L))throw L}}}function x(_){if(!_)return _;return function(P,z,K){if(typeof z==="function")K=z,z=null;function L(H,Z){if(Z){if(Z.uid<0)Z.uid+=4294967296;if(Z.gid<0)Z.gid+=4294967296}if(K)K.apply(this,arguments)}return z?_.call(q,P,z,L):_.call(q,P,L)}}function R(_){if(!_)return _;return function(P,z){var K=z?_.call(q,P,z):_.call(q,P);if(K){if(K.uid<0)K.uid+=4294967296;if(K.gid<0)K.gid+=4294967296}return K}}function $(_){if(!_)return!0;if(_.code==="ENOSYS")return!0;var P=!process.getuid||process.getuid()!==0;if(P){if(_.code==="EINVAL"||_.code==="EPERM")return!0}return!1}}});var pq=G((KO,lq)=>{var hq=I("stream").Stream;lq.exports=hE;function hE(q){return{ReadStream:n,WriteStream:E};function n(y,J){if(!(this instanceof n))return new n(y,J);hq.call(this);var O=this;this.path=y,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,J=J||{};var V=Object.keys(J);for(var x=0,R=V.length;x<R;x++){var $=V[x];this[$]=J[$]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!=="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){O._read()});return}q.open(this.path,this.flags,this.mode,function(_,P){if(_){O.emit("error",_),O.readable=!1;return}O.fd=P,O.emit("open",P),O._read()})}function E(y,J){if(!(this instanceof E))return new E(y,J);hq.call(this),this.path=y,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,J=J||{};var O=Object.keys(J);for(var V=0,x=O.length;V<x;V++){var R=O[V];this[R]=J[R]}if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}if(this.busy=!1,this._queue=[],this.fd===null)this._open=q.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush()}}});var oq=G((xO,cq)=>{cq.exports=pE;var lE=Object.getPrototypeOf||function(q){return q.__proto__};function pE(q){if(q===null||typeof q!=="object")return q;if(q instanceof Object)var n={__proto__:lE(q)};else var n=Object.create(null);return Object.getOwnPropertyNames(q).forEach(function(E){Object.defineProperty(n,E,Object.getOwnPropertyDescriptor(q,E))}),n}});var s=G((UO,Bq)=>{var w=I("fs"),cE=iq(),oE=pq(),dE=oq(),Pq=I("util"),F,Gq;if(typeof Symbol==="function"&&typeof Symbol.for==="function")F=Symbol.for("graceful-fs.queue"),Gq=Symbol.for("graceful-fs.previous");else F="___graceful-fs.queue",Gq="___graceful-fs.previous";function fE(){}function fq(q,n){Object.defineProperty(q,F,{get:function(){return n}})}var a=fE;if(Pq.debuglog)a=Pq.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))a=function(){var q=Pq.format.apply(Pq,arguments);q="GFS4: "+q.split(/\n/).join(`
GFS4: `),console.error(q)};if(!w[F]){if(Tq=global[F]||[],fq(w,Tq),w.close=function(q){function n(E,y){return q.call(w,E,function(J){if(!J)dq();if(typeof y==="function")y.apply(this,arguments)})}return Object.defineProperty(n,Gq,{value:q}),n}(w.close),w.closeSync=function(q){function n(E){q.apply(w,arguments),dq()}return Object.defineProperty(n,Gq,{value:q}),n}(w.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))process.on("exit",function(){a(w[F]),I("assert").equal(w[F].length,0)})}var Tq;if(!global[F])fq(global,w[F]);Bq.exports=jq(dE(w));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!w.__patched)Bq.exports=jq(w),w.__patched=!0;function jq(q){cE(q),q.gracefulify=jq,q.createReadStream=Sq,q.createWriteStream=gq;var n=q.readFile;q.readFile=E;function E(U,Y,X){if(typeof Y==="function")X=Y,Y=null;return W(U,Y,X);function W(M,u,j,B){return n(M,u,function(C){if(C&&(C.code==="EMFILE"||C.code==="ENFILE"))t([W,[M,u,j],C,B||Date.now(),Date.now()]);else if(typeof j==="function")j.apply(this,arguments)})}}var y=q.writeFile;q.writeFile=J;function J(U,Y,X,W){if(typeof X==="function")W=X,X=null;return M(U,Y,X,W);function M(u,j,B,C,k){return y(u,j,B,function(N){if(N&&(N.code==="EMFILE"||N.code==="ENFILE"))t([M,[u,j,B,C],N,k||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var O=q.appendFile;if(O)q.appendFile=V;function V(U,Y,X,W){if(typeof X==="function")W=X,X=null;return M(U,Y,X,W);function M(u,j,B,C,k){return O(u,j,B,function(N){if(N&&(N.code==="EMFILE"||N.code==="ENFILE"))t([M,[u,j,B,C],N,k||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var x=q.copyFile;if(x)q.copyFile=R;function R(U,Y,X,W){if(typeof X==="function")W=X,X=0;return M(U,Y,X,W);function M(u,j,B,C,k){return x(u,j,B,function(N){if(N&&(N.code==="EMFILE"||N.code==="ENFILE"))t([M,[u,j,B,C],N,k||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var $=q.readdir;q.readdir=P;var _=/^v[0-5]\./;function P(U,Y,X){if(typeof Y==="function")X=Y,Y=null;var W=_.test(process.version)?function u(j,B,C,k){return $(j,M(j,B,C,k))}:function u(j,B,C,k){return $(j,B,M(j,B,C,k))};return W(U,Y,X);function M(u,j,B,C){return function(k,N){if(k&&(k.code==="EMFILE"||k.code==="ENFILE"))t([W,[u,j,B],k,C||Date.now(),Date.now()]);else{if(N&&N.sort)N.sort();if(typeof B==="function")B.call(this,k,N)}}}}if(process.version.substr(0,4)==="v0.8"){var z=oE(q);T=z.ReadStream,m=z.WriteStream}var K=q.ReadStream;if(K)T.prototype=Object.create(K.prototype),T.prototype.open=h;var L=q.WriteStream;if(L)m.prototype=Object.create(L.prototype),m.prototype.open=yq;Object.defineProperty(q,"ReadStream",{get:function(){return T},set:function(U){T=U},enumerable:!0,configurable:!0}),Object.defineProperty(q,"WriteStream",{get:function(){return m},set:function(U){m=U},enumerable:!0,configurable:!0});var H=T;Object.defineProperty(q,"FileReadStream",{get:function(){return H},set:function(U){H=U},enumerable:!0,configurable:!0});var Z=m;Object.defineProperty(q,"FileWriteStream",{get:function(){return Z},set:function(U){Z=U},enumerable:!0,configurable:!0});function T(U,Y){if(this instanceof T)return K.apply(this,arguments),this;else return T.apply(Object.create(T.prototype),arguments)}function h(){var U=this;Rq(U.path,U.flags,U.mode,function(Y,X){if(Y){if(U.autoClose)U.destroy();U.emit("error",Y)}else U.fd=X,U.emit("open",X),U.read()})}function m(U,Y){if(this instanceof m)return L.apply(this,arguments),this;else return m.apply(Object.create(m.prototype),arguments)}function yq(){var U=this;Rq(U.path,U.flags,U.mode,function(Y,X){if(Y)U.destroy(),U.emit("error",Y);else U.fd=X,U.emit("open",X)})}function Sq(U,Y){return new q.ReadStream(U,Y)}function gq(U,Y){return new q.WriteStream(U,Y)}var $E=q.open;q.open=Rq;function Rq(U,Y,X,W){if(typeof X==="function")W=X,X=null;return M(U,Y,X,W);function M(u,j,B,C,k){return $E(u,j,B,function(N,OO){if(N&&(N.code==="EMFILE"||N.code==="ENFILE"))t([M,[u,j,B,C],N,k||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}return q}function t(q){a("ENQUEUE",q[0].name,q[1]),w[F].push(q),wq()}var Aq;function dq(){var q=Date.now();for(var n=0;n<w[F].length;++n)if(w[F][n].length>2)w[F][n][3]=q,w[F][n][4]=q;wq()}function wq(){if(clearTimeout(Aq),Aq=void 0,w[F].length===0)return;var q=w[F].shift(),n=q[0],E=q[1],y=q[2],J=q[3],O=q[4];if(J===void 0)a("RETRY",n.name,E),n.apply(null,E);else if(Date.now()-J>=60000){a("TIMEOUT",n.name,E);var V=E.pop();if(typeof V==="function")V.call(null,y)}else{var x=Date.now()-O,R=Math.max(O-J,1),$=Math.min(R*1.2,100);if(x>=$)a("RETRY",n.name,E),n.apply(null,E.concat([J]));else w[F].push(q)}if(Aq===void 0)Aq=setTimeout(wq,0)}});var g=G((uq)=>{var rq=D().fromCallback,S=s(),rE=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter((q)=>{return typeof S[q]==="function"});Object.assign(uq,S);rE.forEach((q)=>{uq[q]=rq(S[q])});uq.exists=function(q,n){if(typeof n==="function")return S.exists(q,n);return new Promise((E)=>{return S.exists(q,E)})};uq.read=function(q,n,E,y,J,O){if(typeof O==="function")return S.read(q,n,E,y,J,O);return new Promise((V,x)=>{S.read(q,n,E,y,J,(R,$,_)=>{if(R)return x(R);V({bytesRead:$,buffer:_})})})};uq.write=function(q,n,...E){if(typeof E[E.length-1]==="function")return S.write(q,n,...E);return new Promise((y,J)=>{S.write(q,n,...E,(O,V,x)=>{if(O)return J(O);y({bytesWritten:V,buffer:x})})})};uq.readv=function(q,n,...E){if(typeof E[E.length-1]==="function")return S.readv(q,n,...E);return new Promise((y,J)=>{S.readv(q,n,...E,(O,V,x)=>{if(O)return J(O);y({bytesRead:V,buffers:x})})})};uq.writev=function(q,n,...E){if(typeof E[E.length-1]==="function")return S.writev(q,n,...E);return new Promise((y,J)=>{S.writev(q,n,...E,(O,V,x)=>{if(O)return J(O);y({bytesWritten:V,buffers:x})})})};if(typeof S.realpath.native==="function")uq.realpath.native=rq(S.realpath.native);else process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var eq=G((Ey,aq)=>{var ny=I("path");Ey.checkPath=function q(n){if(process.platform==="win32"){if(/[<>:"|?*]/.test(n.replace(ny.parse(n).root,""))){let y=new Error(`Path contains invalid characters: ${n}`);throw y.code="EINVAL",y}}}});var nn=G((Jy,Dq)=>{var tq=g(),{checkPath:sq}=eq(),qn=(q)=>{let n={mode:511};if(typeof q==="number")return q;return{...n,...q}.mode};Jy.makeDir=async(q,n)=>{return sq(q),tq.mkdir(q,{mode:qn(n),recursive:!0})};Jy.makeDirSync=(q,n)=>{return sq(q),tq.mkdirSync(q,{mode:qn(n),recursive:!0})}});var l=G((PO,En)=>{var _y=D().fromPromise,{makeDir:Ky,makeDirSync:Iq}=nn(),Qq=_y(Ky);En.exports={mkdirs:Qq,mkdirsSync:Iq,mkdirp:Qq,mkdirpSync:Iq,ensureDir:Qq,ensureDirSync:Iq}});var d=G((AO,Jn)=>{var xy=D().fromPromise,yn=g();function Uy(q){return yn.access(q).then(()=>!0).catch(()=>!1)}Jn.exports={pathExists:xy(Uy),pathExistsSync:yn.existsSync}});var Wq=G((GO,On)=>{var qq=g(),zy=D().fromPromise;async function Ly(q,n,E){let y=await qq.open(q,"r+"),J=null;try{await qq.futimes(y,n,E)}finally{try{await qq.close(y)}catch(O){J=O}}if(J)throw J}function Py(q,n,E){let y=qq.openSync(q,"r+");return qq.futimesSync(y,n,E),qq.closeSync(y)}On.exports={utimesMillis:zy(Ly),utimesMillisSync:Py}});var e=G((XO,xn)=>{var nq=g(),Q=I("path"),Vn=D().fromPromise;function Ay(q,n,E){let y=E.dereference?(J)=>nq.stat(J,{bigint:!0}):(J)=>nq.lstat(J,{bigint:!0});return Promise.all([y(q),y(n).catch((J)=>{if(J.code==="ENOENT")return null;throw J})]).then(([J,O])=>({srcStat:J,destStat:O}))}function Gy(q,n,E){let y,J=E.dereference?(V)=>nq.statSync(V,{bigint:!0}):(V)=>nq.lstatSync(V,{bigint:!0}),O=J(q);try{y=J(n)}catch(V){if(V.code==="ENOENT")return{srcStat:O,destStat:null};throw V}return{srcStat:O,destStat:y}}async function Xy(q,n,E,y){let{srcStat:J,destStat:O}=await Ay(q,n,y);if(O){if(Jq(J,O)){let V=Q.basename(q),x=Q.basename(n);if(E==="move"&&V!==x&&V.toLowerCase()===x.toLowerCase())return{srcStat:J,destStat:O,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(J.isDirectory()&&!O.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${q}'.`);if(!J.isDirectory()&&O.isDirectory())throw new Error(`Cannot overwrite directory '${n}' with non-directory '${q}'.`)}if(J.isDirectory()&&Mq(q,n))throw new Error(Xq(q,n,E));return{srcStat:J,destStat:O}}function Yy(q,n,E,y){let{srcStat:J,destStat:O}=Gy(q,n,y);if(O){if(Jq(J,O)){let V=Q.basename(q),x=Q.basename(n);if(E==="move"&&V!==x&&V.toLowerCase()===x.toLowerCase())return{srcStat:J,destStat:O,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(J.isDirectory()&&!O.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${q}'.`);if(!J.isDirectory()&&O.isDirectory())throw new Error(`Cannot overwrite directory '${n}' with non-directory '${q}'.`)}if(J.isDirectory()&&Mq(q,n))throw new Error(Xq(q,n,E));return{srcStat:J,destStat:O}}async function _n(q,n,E,y){let J=Q.resolve(Q.dirname(q)),O=Q.resolve(Q.dirname(E));if(O===J||O===Q.parse(O).root)return;let V;try{V=await nq.stat(O,{bigint:!0})}catch(x){if(x.code==="ENOENT")return;throw x}if(Jq(n,V))throw new Error(Xq(q,E,y));return _n(q,n,O,y)}function Kn(q,n,E,y){let J=Q.resolve(Q.dirname(q)),O=Q.resolve(Q.dirname(E));if(O===J||O===Q.parse(O).root)return;let V;try{V=nq.statSync(O,{bigint:!0})}catch(x){if(x.code==="ENOENT")return;throw x}if(Jq(n,V))throw new Error(Xq(q,E,y));return Kn(q,n,O,y)}function Jq(q,n){return n.ino&&n.dev&&n.ino===q.ino&&n.dev===q.dev}function Mq(q,n){let E=Q.resolve(q).split(Q.sep).filter((J)=>J),y=Q.resolve(n).split(Q.sep).filter((J)=>J);return E.every((J,O)=>y[O]===J)}function Xq(q,n,E){return`Cannot ${E} '${q}' to a subdirectory of itself, '${n}'.`}xn.exports={checkPaths:Vn(Xy),checkPathsSync:Yy,checkParentPaths:Vn(_n),checkParentPathsSync:Kn,isSrcSubdir:Mq,areIdentical:Jq}});var An=G((YO,Pn)=>{var v=g(),Oq=I("path"),{mkdirs:Zy}=l(),{pathExists:Cy}=d(),{utimesMillis:Hy}=Wq(),Vq=e();async function Ny(q,n,E={}){if(typeof E==="function")E={filter:E};if(E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32")process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:y,destStat:J}=await Vq.checkPaths(q,n,"copy",E);if(await Vq.checkParentPaths(q,y,n,"copy"),!await zn(q,n,E))return;let V=Oq.dirname(n);if(!await Cy(V))await Zy(V);await Ln(J,q,n,E)}async function zn(q,n,E){if(!E.filter)return!0;return E.filter(q,n)}async function Ln(q,n,E,y){let O=await(y.dereference?v.stat:v.lstat)(n);if(O.isDirectory())return wy(O,q,n,E,y);if(O.isFile()||O.isCharacterDevice()||O.isBlockDevice())return Ry(O,q,n,E,y);if(O.isSymbolicLink())return By(q,n,E,y);if(O.isSocket())throw new Error(`Cannot copy a socket file: ${n}`);if(O.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${n}`);throw new Error(`Unknown file: ${n}`)}async function Ry(q,n,E,y,J){if(!n)return Un(q,E,y,J);if(J.overwrite)return await v.unlink(y),Un(q,E,y,J);if(J.errorOnExist)throw new Error(`'${y}' already exists`)}async function Un(q,n,E,y){if(await v.copyFile(n,E),y.preserveTimestamps){if(Ty(q.mode))await jy(E,q.mode);let J=await v.stat(n);await Hy(E,J.atime,J.mtime)}return v.chmod(E,q.mode)}function Ty(q){return(q&128)===0}function jy(q,n){return v.chmod(q,n|128)}async function wy(q,n,E,y,J){if(!n)await v.mkdir(y);let O=[];for await(let V of await v.opendir(E)){let x=Oq.join(E,V.name),R=Oq.join(y,V.name);O.push(zn(x,R,J).then(($)=>{if($)return Vq.checkPaths(x,R,"copy",J).then(({destStat:_})=>{return Ln(_,x,R,J)})}))}if(await Promise.all(O),!n)await v.chmod(y,q.mode)}async function By(q,n,E,y){let J=await v.readlink(n);if(y.dereference)J=Oq.resolve(process.cwd(),J);if(!q)return v.symlink(J,E);let O=null;try{O=await v.readlink(E)}catch(V){if(V.code==="EINVAL"||V.code==="UNKNOWN")return v.symlink(J,E);throw V}if(y.dereference)O=Oq.resolve(process.cwd(),O);if(Vq.isSrcSubdir(J,O))throw new Error(`Cannot copy '${J}' to a subdirectory of itself, '${O}'.`);if(Vq.isSrcSubdir(O,J))throw new Error(`Cannot overwrite '${O}' with '${J}'.`);return await v.unlink(E),v.symlink(J,E)}Pn.exports=Ny});var Cn=G((ZO,Zn)=>{var b=s(),_q=I("path"),uy=l().mkdirsSync,Dy=Wq().utimesMillisSync,Kq=e();function Iy(q,n,E){if(typeof E==="function")E={filter:E};if(E=E||{},E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32")process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:y,destStat:J}=Kq.checkPathsSync(q,n,"copy",E);if(Kq.checkParentPathsSync(q,y,n,"copy"),E.filter&&!E.filter(q,n))return;let O=_q.dirname(n);if(!b.existsSync(O))uy(O);return Gn(J,q,n,E)}function Gn(q,n,E,y){let O=(y.dereference?b.statSync:b.lstatSync)(n);if(O.isDirectory())return vy(O,q,n,E,y);else if(O.isFile()||O.isCharacterDevice()||O.isBlockDevice())return Qy(O,q,n,E,y);else if(O.isSymbolicLink())return gy(q,n,E,y);else if(O.isSocket())throw new Error(`Cannot copy a socket file: ${n}`);else if(O.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${n}`);throw new Error(`Unknown file: ${n}`)}function Qy(q,n,E,y,J){if(!n)return Xn(q,E,y,J);return Wy(q,E,y,J)}function Wy(q,n,E,y){if(y.overwrite)return b.unlinkSync(E),Xn(q,n,E,y);else if(y.errorOnExist)throw new Error(`'${E}' already exists`)}function Xn(q,n,E,y){if(b.copyFileSync(n,E),y.preserveTimestamps)My(q.mode,n,E);return kq(E,q.mode)}function My(q,n,E){if(ky(q))Fy(E,q);return $y(n,E)}function ky(q){return(q&128)===0}function Fy(q,n){return kq(q,n|128)}function kq(q,n){return b.chmodSync(q,n)}function $y(q,n){let E=b.statSync(q);return Dy(n,E.atime,E.mtime)}function vy(q,n,E,y,J){if(!n)return my(q.mode,E,y,J);return Yn(E,y,J)}function my(q,n,E,y){return b.mkdirSync(E),Yn(n,E,y),kq(E,q)}function Yn(q,n,E){let y=b.opendirSync(q);try{let J;while((J=y.readSync())!==null)Sy(J.name,q,n,E)}finally{y.closeSync()}}function Sy(q,n,E,y){let J=_q.join(n,q),O=_q.join(E,q);if(y.filter&&!y.filter(J,O))return;let{destStat:V}=Kq.checkPathsSync(J,O,"copy",y);return Gn(V,J,O,y)}function gy(q,n,E,y){let J=b.readlinkSync(n);if(y.dereference)J=_q.resolve(process.cwd(),J);if(!q)return b.symlinkSync(J,E);else{let O;try{O=b.readlinkSync(E)}catch(V){if(V.code==="EINVAL"||V.code==="UNKNOWN")return b.symlinkSync(J,E);throw V}if(y.dereference)O=_q.resolve(process.cwd(),O);if(Kq.isSrcSubdir(J,O))throw new Error(`Cannot copy '${J}' to a subdirectory of itself, '${O}'.`);if(Kq.isSrcSubdir(O,J))throw new Error(`Cannot overwrite '${O}' with '${J}'.`);return by(J,E)}}function by(q,n){return b.unlinkSync(n),b.symlinkSync(q,n)}Zn.exports=Iy});var Yq=G((CO,Hn)=>{var iy=D().fromPromise;Hn.exports={copy:iy(An()),copySync:Cn()}});var xq=G((HO,Rn)=>{var Nn=s(),hy=D().fromCallback;function ly(q,n){Nn.rm(q,{recursive:!0,force:!0},n)}function py(q){Nn.rmSync(q,{recursive:!0,force:!0})}Rn.exports={remove:hy(ly),removeSync:py}});var Qn=G((NO,In)=>{var cy=D().fromPromise,wn=g(),Bn=I("path"),un=l(),Dn=xq(),Tn=cy(async function q(n){let E;try{E=await wn.readdir(n)}catch{return un.mkdirs(n)}return Promise.all(E.map((y)=>Dn.remove(Bn.join(n,y))))});function jn(q){let n;try{n=wn.readdirSync(q)}catch{return un.mkdirsSync(q)}n.forEach((E)=>{E=Bn.join(q,E),Dn.removeSync(E)})}In.exports={emptyDirSync:jn,emptydirSync:jn,emptyDir:Tn,emptydir:Tn}});var Fn=G((RO,kn)=>{var oy=D().fromPromise,Wn=I("path"),c=g(),Mn=l();async function dy(q){let n;try{n=await c.stat(q)}catch{}if(n&&n.isFile())return;let E=Wn.dirname(q),y=null;try{y=await c.stat(E)}catch(J){if(J.code==="ENOENT"){await Mn.mkdirs(E),await c.writeFile(q,"");return}else throw J}if(y.isDirectory())await c.writeFile(q,"");else await c.readdir(E)}function fy(q){let n;try{n=c.statSync(q)}catch{}if(n&&n.isFile())return;let E=Wn.dirname(q);try{if(!c.statSync(E).isDirectory())c.readdirSync(E)}catch(y){if(y&&y.code==="ENOENT")Mn.mkdirsSync(E);else throw y}c.writeFileSync(q,"")}kn.exports={createFile:oy(dy),createFileSync:fy}});var gn=G((TO,Sn)=>{var ry=D().fromPromise,$n=I("path"),f=g(),vn=l(),{pathExists:ay}=d(),{areIdentical:mn}=e();async function ey(q,n){let E;try{E=await f.lstat(n)}catch{}let y;try{y=await f.lstat(q)}catch(V){throw V.message=V.message.replace("lstat","ensureLink"),V}if(E&&mn(y,E))return;let J=$n.dirname(n);if(!await ay(J))await vn.mkdirs(J);await f.link(q,n)}function ty(q,n){let E;try{E=f.lstatSync(n)}catch{}try{let O=f.lstatSync(q);if(E&&mn(O,E))return}catch(O){throw O.message=O.message.replace("lstat","ensureLink"),O}let y=$n.dirname(n);if(f.existsSync(y))return f.linkSync(q,n);return vn.mkdirsSync(y),f.linkSync(q,n)}Sn.exports={createLink:ry(ey),createLinkSync:ty}});var hn=G((jO,bn)=>{var r=I("path"),Uq=g(),{pathExists:sy}=d(),qJ=D().fromPromise;async function nJ(q,n){if(r.isAbsolute(q)){try{await Uq.lstat(q)}catch(O){throw O.message=O.message.replace("lstat","ensureSymlink"),O}return{toCwd:q,toDst:q}}let E=r.dirname(n),y=r.join(E,q);if(await sy(y))return{toCwd:y,toDst:q};try{await Uq.lstat(q)}catch(O){throw O.message=O.message.replace("lstat","ensureSymlink"),O}return{toCwd:q,toDst:r.relative(E,q)}}function EJ(q,n){if(r.isAbsolute(q)){if(!Uq.existsSync(q))throw new Error("absolute srcpath does not exist");return{toCwd:q,toDst:q}}let E=r.dirname(n),y=r.join(E,q);if(Uq.existsSync(y))return{toCwd:y,toDst:q};if(!Uq.existsSync(q))throw new Error("relative srcpath does not exist");return{toCwd:q,toDst:r.relative(E,q)}}bn.exports={symlinkPaths:qJ(nJ),symlinkPathsSync:EJ}});var cn=G((wO,pn)=>{var ln=g(),yJ=D().fromPromise;async function JJ(q,n){if(n)return n;let E;try{E=await ln.lstat(q)}catch{return"file"}return E&&E.isDirectory()?"dir":"file"}function OJ(q,n){if(n)return n;let E;try{E=ln.lstatSync(q)}catch{return"file"}return E&&E.isDirectory()?"dir":"file"}pn.exports={symlinkType:yJ(JJ),symlinkTypeSync:OJ}});var rn=G((BO,fn)=>{var VJ=D().fromPromise,on=I("path"),p=g(),{mkdirs:_J,mkdirsSync:KJ}=l(),{symlinkPaths:xJ,symlinkPathsSync:UJ}=hn(),{symlinkType:zJ,symlinkTypeSync:LJ}=cn(),{pathExists:PJ}=d(),{areIdentical:dn}=e();async function AJ(q,n,E){let y;try{y=await p.lstat(n)}catch{}if(y&&y.isSymbolicLink()){let[x,R]=await Promise.all([p.stat(q),p.stat(n)]);if(dn(x,R))return}let J=await xJ(q,n);q=J.toDst;let O=await zJ(J.toCwd,E),V=on.dirname(n);if(!await PJ(V))await _J(V);return p.symlink(q,n,O)}function GJ(q,n,E){let y;try{y=p.lstatSync(n)}catch{}if(y&&y.isSymbolicLink()){let x=p.statSync(q),R=p.statSync(n);if(dn(x,R))return}let J=UJ(q,n);q=J.toDst,E=LJ(J.toCwd,E);let O=on.dirname(n);if(p.existsSync(O))return p.symlinkSync(q,n,E);return KJ(O),p.symlinkSync(q,n,E)}fn.exports={createSymlink:VJ(AJ),createSymlinkSync:GJ}});var yE=G((uO,EE)=>{var{createFile:an,createFileSync:en}=Fn(),{createLink:tn,createLinkSync:sn}=gn(),{createSymlink:qE,createSymlinkSync:nE}=rn();EE.exports={createFile:an,createFileSync:en,ensureFile:an,ensureFileSync:en,createLink:tn,createLinkSync:sn,ensureLink:tn,ensureLinkSync:sn,createSymlink:qE,createSymlinkSync:nE,ensureSymlink:qE,ensureSymlinkSync:nE}});var Zq=G((DO,JE)=>{function XJ(q,{EOL:n=`
`,finalEOL:E=!0,replacer:y=null,spaces:J}={}){let O=E?n:"";return JSON.stringify(q,y,J).replace(/\n/g,n)+O}function YJ(q){if(Buffer.isBuffer(q))q=q.toString("utf8");return q.replace(/^\uFEFF/,"")}JE.exports={stringify:XJ,stripBom:YJ}});var KE=G((IO,_E)=>{var Eq;try{Eq=s()}catch(q){Eq=I("fs")}var Cq=D(),{stringify:OE,stripBom:VE}=Zq();async function ZJ(q,n={}){if(typeof n==="string")n={encoding:n};let E=n.fs||Eq,y="throws"in n?n.throws:!0,J=await Cq.fromCallback(E.readFile)(q,n);J=VE(J);let O;try{O=JSON.parse(J,n?n.reviver:null)}catch(V){if(y)throw V.message=`${q}: ${V.message}`,V;else return null}return O}var CJ=Cq.fromPromise(ZJ);function HJ(q,n={}){if(typeof n==="string")n={encoding:n};let E=n.fs||Eq,y="throws"in n?n.throws:!0;try{let J=E.readFileSync(q,n);return J=VE(J),JSON.parse(J,n.reviver)}catch(J){if(y)throw J.message=`${q}: ${J.message}`,J;else return null}}async function NJ(q,n,E={}){let y=E.fs||Eq,J=OE(n,E);await Cq.fromCallback(y.writeFile)(q,J,E)}var RJ=Cq.fromPromise(NJ);function TJ(q,n,E={}){let y=E.fs||Eq,J=OE(n,E);return y.writeFileSync(q,J,E)}var jJ={readFile:CJ,readFileSync:HJ,writeFile:RJ,writeFileSync:TJ};_E.exports=jJ});var UE=G((QO,xE)=>{var Hq=KE();xE.exports={readJson:Hq.readFile,readJsonSync:Hq.readFileSync,writeJson:Hq.writeFile,writeJsonSync:Hq.writeFileSync}});var Nq=G((WO,PE)=>{var wJ=D().fromPromise,Fq=g(),zE=I("path"),LE=l(),BJ=d().pathExists;async function uJ(q,n,E="utf-8"){let y=zE.dirname(q);if(!await BJ(y))await LE.mkdirs(y);return Fq.writeFile(q,n,E)}function DJ(q,...n){let E=zE.dirname(q);if(!Fq.existsSync(E))LE.mkdirsSync(E);Fq.writeFileSync(q,...n)}PE.exports={outputFile:wJ(uJ),outputFileSync:DJ}});var GE=G((MO,AE)=>{var{stringify:IJ}=Zq(),{outputFile:QJ}=Nq();async function WJ(q,n,E={}){let y=IJ(n,E);await QJ(q,y,E)}AE.exports=WJ});var YE=G((kO,XE)=>{var{stringify:MJ}=Zq(),{outputFileSync:kJ}=Nq();function FJ(q,n,E){let y=MJ(n,E);kJ(q,y,E)}XE.exports=FJ});var CE=G((FO,ZE)=>{var $J=D().fromPromise,i=UE();i.outputJson=$J(GE());i.outputJsonSync=YE();i.outputJSON=i.outputJson;i.outputJSONSync=i.outputJsonSync;i.writeJSON=i.writeJson;i.writeJSONSync=i.writeJsonSync;i.readJSON=i.readJson;i.readJSONSync=i.readJsonSync;ZE.exports=i});var jE=G(($O,TE)=>{var vJ=g(),HE=I("path"),{copy:mJ}=Yq(),{remove:RE}=xq(),{mkdirp:SJ}=l(),{pathExists:gJ}=d(),NE=e();async function bJ(q,n,E={}){let y=E.overwrite||E.clobber||!1,{srcStat:J,isChangingCase:O=!1}=await NE.checkPaths(q,n,"move",E);await NE.checkParentPaths(q,J,n,"move");let V=HE.dirname(n);if(HE.parse(V).root!==V)await SJ(V);return iJ(q,n,y,O)}async function iJ(q,n,E,y){if(!y){if(E)await RE(n);else if(await gJ(n))throw new Error("dest already exists.")}try{await vJ.rename(q,n)}catch(J){if(J.code!=="EXDEV")throw J;await hJ(q,n,E)}}async function hJ(q,n,E){return await mJ(q,n,{overwrite:E,errorOnExist:!0,preserveTimestamps:!0}),RE(q)}TE.exports=bJ});var IE=G((vO,DE)=>{var BE=s(),vq=I("path"),lJ=Yq().copySync,uE=xq().removeSync,pJ=l().mkdirpSync,wE=e();function cJ(q,n,E){E=E||{};let y=E.overwrite||E.clobber||!1,{srcStat:J,isChangingCase:O=!1}=wE.checkPathsSync(q,n,"move",E);if(wE.checkParentPathsSync(q,J,n,"move"),!oJ(n))pJ(vq.dirname(n));return dJ(q,n,y,O)}function oJ(q){let n=vq.dirname(q);return vq.parse(n).root===n}function dJ(q,n,E,y){if(y)return $q(q,n,E);if(E)return uE(n),$q(q,n,E);if(BE.existsSync(n))throw new Error("dest already exists.");return $q(q,n,E)}function $q(q,n,E){try{BE.renameSync(q,n)}catch(y){if(y.code!=="EXDEV")throw y;return fJ(q,n,E)}}function fJ(q,n,E){return lJ(q,n,{overwrite:E,errorOnExist:!0,preserveTimestamps:!0}),uE(q)}DE.exports=cJ});var WE=G((mO,QE)=>{var rJ=D().fromPromise;QE.exports={move:rJ(jE()),moveSync:IE()}});var kE=G((SO,ME)=>{ME.exports={...g(),...Yq(),...Qn(),...yE(),...CE(),...l(),...WE(),...Nq(),...d(),...xq()}});var mq=eJ(kE(),1);import tJ from"process";import{projectPath as sJ}from"@stacksjs/path";import{ValidationBoolean as qO,ValidationEnum as nO,ValidationNumber as EO}from"@stacksjs/validation";import{schema as A}from"@stacksjs/validation";var FE={APP_NAME:{validation:A.string(),default:"Stacks"},APP_ENV:{validation:A.enum(["local","dev","stage","prod"]),default:"local"},APP_KEY:{validation:A.string(),default:"base64:1234567890"},PORT:{validation:A.number(),default:3000},PORT_BACKEND:{validation:A.number(),default:3000},PORT_ADMIN:{validation:A.number(),default:3000},PORT_LIBRARY:{validation:A.number(),default:3000},PORT_DESKTOP:{validation:A.number(),default:3000},PORT_EMAIL:{validation:A.number(),default:3000},PORT_DOCS:{validation:A.number(),default:3000},PORT_INSPECT:{validation:A.number(),default:3000},PORT_API:{validation:A.number(),default:3000},PORT_SYSTEM_TRAY:{validation:A.number(),default:3000},APP_MAINTENANCE:{validation:A.boolean(),default:!1},DEBUG:{validation:A.boolean(),default:!1},API_PREFIX:{validation:A.string(),default:"/api"},DOCS_PREFIX:{validation:A.string(),default:"/docs"},DB_CONNECTION:{validation:A.enum(["mysql","sqlite","postgres"]),default:"mysql"},DB_HOST:{validation:A.string(),default:"localhost"},DB_PORT:{validation:A.number(),default:3306},AWS_ACCOUNT_ID:{validation:A.string(),default:""},AWS_ACCESS_KEY_ID:{validation:A.string(),default:""},AWS_SECRET_ACCESS_KEY:{validation:A.string(),default:""},AWS_DEFAULT_REGION:{validation:A.string(),default:""},AWS_DEFAULT_PASSWORD:{validation:A.string(),default:""},MAIL_MAILER:{validation:A.enum(["ses","sendmail","log","smtp"]),default:"ses"},MAIL_HOST:{validation:A.string(),default:""},MAIL_PORT:{validation:A.number(),default:465},MAIL_USERNAME:{validation:A.string(),default:""},MAIL_PASSWORD:{validation:A.string(),default:""},MAIL_FROM_ADDRESS:{validation:A.string(),default:""},SEARCH_ENGINE_DRIVER:{validation:A.enum(["meilisearch","algolia","typesense"]),default:"meilisearch"},STRIPE_SECRET_KEY:{validation:A.string(),default:""},STRIPE_PUBLISHABLE_KEY:{validation:A.string(),default:""},MEILISEARCH_HOST:{validation:A.string(),default:""},MEILISEARCH_KEY:{validation:A.string(),default:""},FRONTEND_APP_ENV:{validation:A.enum(["development","staging","production"]),default:"development"},FRONTEND_APP_URL:{validation:A.string(),default:""}};var aJ={APP_ENV:["local","dev","development","staging","prod","production"],DB_CONNECTION:["mysql","sqlite","postgres","dynamodb"],MAIL_MAILER:["smtp","mailgun","ses","postmark","sendmail","log"],SEARCH_ENGINE_DRIVER:["opensearch"],FRONTEND_APP_ENV:["development","staging","production"]},hO=Object.entries(FE).reduce((q,[n,E])=>{if(typeof E==="object"&&E!==null&&"validation"in E)return q[n]=E.validation.name,q;let y;switch(typeof E){case"string":y="string";break;case"number":y="number";break;case"boolean":y="boolean";break;default:if(Array.isArray(E)){y="enum";break}if(typeof E==="object"&&E!==null){let J=E.name;if(J==="string"||J==="number"||J==="boolean"){y=J;break}if(!J&&n in aJ){y="enum";break}console.error("Unknown env value type",typeof E)}throw new Error(`Invalid env value for ${n}`)}return q[n]=y,q},{});var yO={get:(q,n)=>{let E=q[n];if(typeof E==="string"&&/^\d+$/.test(E)&&n!=="AWS_ACCOUNT_ID")return Number(E);if(typeof E==="string"&&/^true|false$/.test(E))return E==="true";if(E instanceof nO)return q[n];if(E instanceof qO)return!!q[n];if(E instanceof EO)return Number(q[n]);return E}};function JO(){return typeof Bun!=="undefined"?Bun.env:tJ.env}var dO=new Proxy(JO(),yO);function fO(q,n,E){let y=E?.path||sJ(".env"),O=mq.default.readFileSync(y,"utf-8").split(`
`),V=O.findIndex((x)=>x.startsWith(`${q}=`));if(V!==-1)O[V]=`${q}=${n}`;else O.push(`${q}=${n}`);mq.default.writeFileSync(y,O.join(`
`))}export{fO as writeEnv,JO as process,aJ as envEnum,dO as env};
