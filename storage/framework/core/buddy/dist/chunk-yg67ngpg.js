// @bun
import{Ac as ce,Bc as ie,Cc as Ae,Dc as Ke,Ec as es,Fc as Qe,Gc as le,Hc as pe,Ic as Xe,Jc as ye,Kc as Ze,Lc as be,Mc as xe,Nc as ve,Oc as ke,Pc as Re,Qc as Ue,Rc as $e,mc as Ie,nc as _e,oc as Le,pc as Pe,qc as Me,rc as V,sc as N,tc as f,uc as g,vc as We,wc as ne,xc as oe,yc as $,zc as F}from"./chunk-f7b4q8w7.js";import{Sc as l,Tc as se}from"./chunk-dy44vw1s.js";import{$c as E,Uc as ze,Vc as De,Yc as Ye,_c as ss,bd as je,cd as u,dd as Ge,ed as me,fd as he,hd as Be,id as Fe,kd as Oe,ld as te,md as p,nd as m,pd as Ve,qd as o,rd as ue,sd as we}from"./chunk-mwyf46cf.js";import{td as Bs,ud as U,yd as x}from"./chunk-c0tfr62j.js";import{Ed as ys,Fd as ms}from"./chunk-x9e3h3eh.js";import"./chunk-0gcz8bd6.js";import"./chunk-jpw6wb6x.js";import"./chunk-5b5bjkxb.js";import"./chunk-mp45a05d.js";import{ae as c}from"./chunk-1krazvx7.js";var y=c(U(),1);var J=c(x(),1);var I=async(e,s,t)=>{return{operation:$(s).operation,region:await F(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};function cs(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function b(e){return{schemeId:"smithy.api#noAuth"}}var _=(e)=>{let s=[];switch(e.operation){case"GetRoleCredentials":{s.push(b(e));break}case"ListAccountRoles":{s.push(b(e));break}case"ListAccounts":{s.push(b(e));break}case"Logout":{s.push(b(e));break}default:s.push(cs(e))}return s},L=(e)=>{let s=J.resolveAwsSdkSigV4Config(e);return Object.assign(s,{authSchemePreference:F(e.authSchemePreference??[])})};var P=(e)=>{return Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"})},M={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var W={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.840.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.840.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.840.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.840.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.840.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.6.0","@smithy/fetch-http-handler":"^5.0.4","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.13","@smithy/middleware-retry":"^4.1.14","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.0.6","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.5","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.21","@smithy/util-defaults-mode-node":"^4.0.21","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var R=c(x(),1);var re=c(x(),1),ae=c(U(),1);var v=c(ms(),1),k=c(ys(),1);var A={["required"]:!1,type:"String"},K={["required"]:!0,default:!1,type:"Boolean"},Q={["ref"]:"Endpoint"},T={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseFIPS"},!0]},H={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseDualStack"},!0]},n={},X={["fn"]:"getAttr",["argv"]:[{["ref"]:"PartitionResult"},"supportsFIPS"]},G={["ref"]:"PartitionResult"},Y={["fn"]:"booleanEquals",["argv"]:[!0,{["fn"]:"getAttr",["argv"]:[G,"supportsDualStack"]}]},Z=[T],C=[H],j=[{["ref"]:"Region"}],ls={version:"1.0",parameters:{Region:A,UseDualStack:K,UseFIPS:K,Endpoint:A},rules:[{conditions:[{["fn"]:"isSet",["argv"]:[Q]}],rules:[{conditions:Z,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:"error"},{conditions:C,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:"error"},{endpoint:{url:Q,properties:n,headers:n},type:"endpoint"}],type:"tree"},{conditions:[{["fn"]:"isSet",["argv"]:j}],rules:[{conditions:[{["fn"]:"aws.partition",["argv"]:j,assign:"PartitionResult"}],rules:[{conditions:[T,H],rules:[{conditions:[{["fn"]:"booleanEquals",["argv"]:[!0,X]},Y],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:n,headers:n},type:"endpoint"}],type:"tree"},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:"error"}],type:"tree"},{conditions:Z,rules:[{conditions:[{["fn"]:"booleanEquals",["argv"]:[X,!0]}],rules:[{conditions:[{["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[G,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:n,headers:n},type:"endpoint"},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:n,headers:n},type:"endpoint"}],type:"tree"},{error:"FIPS is enabled but this partition does not support FIPS",type:"error"}],type:"tree"},{conditions:C,rules:[{conditions:[Y],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:n,headers:n},type:"endpoint"}],type:"tree"},{error:"DualStack is enabled but this partition does not support DualStack",type:"error"}],type:"tree"},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:n,headers:n},type:"endpoint"}],type:"tree"}],type:"tree"},{error:"Invalid Configuration: Missing Region",type:"error"}]},O=ls;var ps=new V({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),ee=(e,s={})=>{return ps.get(e,()=>f(O,{endpointParams:e,logger:s.logger}))};N.aws=g;var de=(e)=>{return{apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??v.fromBase64,base64Encoder:e?.base64Encoder??v.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ee,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??_,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(s)=>s.getIdentityProvider("aws.auth#sigv4"),signer:new re.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(s)=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ae.NoAuthSigner}],logger:e?.logger??new te,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??se,utf8Decoder:e?.utf8Decoder??k.fromUtf8,utf8Encoder:e?.utf8Encoder??k.toUtf8}};var Ee=(e)=>{he(process.version);let s=Re(e),t=()=>s().then(me),a=de(e);R.emitWarningIfUnsupportedVersion(process.version);let r={profile:e?.profile,logger:a.logger};return{...a,...e,runtime:"node",defaultsMode:s,authSchemePreference:e?.authSchemePreference??l(R.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,r),bodyLengthChecker:e?.bodyLengthChecker??ke,defaultUserAgentProvider:e?.defaultUserAgentProvider??be({serviceId:a.serviceId,clientVersion:W.version}),maxAttempts:e?.maxAttempts??l(pe,e),region:e?.region??l(ce,{...ie,...r}),requestHandler:ue.create(e?.requestHandler??t),retryMode:e?.retryMode??l({...ye,default:async()=>(await t()).retryMode||le},e),sha256:e?.sha256??ve.bind(null,"sha256"),streamCollector:e?.streamCollector??we,useDualstackEndpoint:e?.useDualstackEndpoint??l(ne,r),useFipsEndpoint:e?.useFipsEndpoint??l(oe,r),userAgentAppId:e?.userAgentAppId??l(xe,r)}};var qe=(e)=>{let{httpAuthSchemes:s,httpAuthSchemeProvider:t,credentials:a}=e;return{setHttpAuthScheme(r){let d=s.findIndex((B)=>B.schemeId===r.schemeId);if(d===-1)s.push(r);else s.splice(d,1,r)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(r){t=r},httpAuthSchemeProvider(){return t},setCredentials(r){a=r},credentials(){return a}}},Se=(e)=>{return{httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}};var Je=(e,s)=>{let t=Object.assign(Ue(e),Be(e),ze(e),qe(e));return s.forEach((a)=>a.configure(t)),Object.assign(e,$e(t),Fe(t),De(t),Se(t))};class Ce extends Ye{config;constructor(...[e]){let s=Ee(e||{});super(s);this.initConfig=s;let t=P(s),a=Me(t),r=Xe(a),d=Ae(r),B=Ie(d),as=Qe(B),ds=L(as),ns=Je(ds,e?.extensions||[]);this.config=ns,this.middlewareStack.use(We(this.config)),this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(_e(this.config)),this.middlewareStack.use(Le(this.config)),this.middlewareStack.use(Pe(this.config)),this.middlewareStack.use(y.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:I,identityProviderConfigProvider:async(os)=>new y.DefaultIdentityProviderConfig({"aws.auth#sigv4":os.credentials})})),this.middlewareStack.use(y.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}var ts=c(Bs(),1);class i extends je{constructor(e){super(e);Object.setPrototypeOf(this,i.prototype)}}class q extends i{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e});Object.setPrototypeOf(this,q.prototype)}}class S extends i{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e});Object.setPrototypeOf(this,S.prototype)}}class z extends i{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e});Object.setPrototypeOf(this,z.prototype)}}class D extends i{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e});Object.setPrototypeOf(this,D.prototype)}}var Te=(e)=>({...e,...e.accessToken&&{accessToken:E}}),hs=(e)=>({...e,...e.secretAccessKey&&{secretAccessKey:E},...e.sessionToken&&{sessionToken:E}}),He=(e)=>({...e,...e.roleCredentials&&{roleCredentials:hs(e.roleCredentials)}});var h=c(x(),1),Ne=c(U(),1);var fe=async(e,s)=>{let t=Ne.requestBuilder(e,s),a=p({},Oe,{[Ds]:e[Es]});t.bp("/federation/credentials");let r=p({[zs]:[,o.expectNonNull(e[Ss],"roleName")],[qs]:[,o.expectNonNull(e[Rs],"accountId")]}),d;return t.m("GET").h(a).q(r).b(d),t.build()};var ge=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return us(e,s);let t=p({$metadata:w(e)}),a=o.expectNonNull(o.expectObject(await h.parseJsonBody(e.body,s)),"body"),r=m(a,{roleCredentials:Ve});return Object.assign(t,r),t};var us=async(e,s)=>{let t={...e,body:await h.parseJsonErrorBody(e.body,s)},a=h.loadRestJsonErrorCode(e,t.body);switch(a){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await bs(t,s);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await xs(t,s);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await vs(t,s);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await ks(t,s);default:let r=t.body;return ws({output:e,parsedBody:r,errorCode:a})}},ws=Ge(i),bs=async(e,s)=>{let t=p({}),a=e.body,r=m(a,{message:o.expectString});Object.assign(t,r);let d=new q({$metadata:w(e),...t});return u(d,e.body)},xs=async(e,s)=>{let t=p({}),a=e.body,r=m(a,{message:o.expectString});Object.assign(t,r);let d=new S({$metadata:w(e),...t});return u(d,e.body)},vs=async(e,s)=>{let t=p({}),a=e.body,r=m(a,{message:o.expectString});Object.assign(t,r);let d=new z({$metadata:w(e),...t});return u(d,e.body)},ks=async(e,s)=>{let t=p({}),a=e.body,r=m(a,{message:o.expectString});Object.assign(t,r);let d=new D({$metadata:w(e),...t});return u(d,e.body)},w=(e)=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var Rs="accountId",Es="accessToken",qs="account_id";var Ss="roleName",zs="role_name",Ds="x-amz-sso_bearer_token";class rs extends ss.classBuilder().ep(M).m(function(e,s,t,a){return[ts.getSerdePlugin(t,this.serialize,this.deserialize),es(t,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Te,He).ser(fe).de(ge).build(){}export{Ce as SSOClient,rs as GetRoleCredentialsCommand};
